(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38750,(e,t,r)=>{t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},87201,(e,t,r)=>{let n,a=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];r.getSymbolSize=function(e){if(!e)throw Error('"version" cannot be null or undefined');if(e<1||e>40)throw Error('"version" should be in range from 1 to 40');return 4*e+17},r.getSymbolTotalCodewords=function(e){return a[e]},r.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},r.setToSJISFunction=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');n=e},r.isKanjiModeEnabled=function(){return void 0!==n},r.toSJIS=function(e){return n(e)}},73133,(e,t,r)=>{r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2},r.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},r.from=function(e,t){if(r.isValid(e))return e;try{if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw Error("Unknown EC Level: "+e)}}catch(e){return t}}},73666,(e,t,r)=>{function n(){this.buffer=[],this.length=0}n.prototype={get:function(e){let t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},t.exports=n},11421,(e,t,r)=>{function n(e){if(!e||e<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}n.prototype.set=function(e,t,r,n){let a=e*this.size+t;this.data[a]=r,n&&(this.reservedBit[a]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},t.exports=n},20637,(e,t,r)=>{let n=e.r(87201).getSymbolSize;r.getRowColCoords=function(e){if(1===e)return[];let t=Math.floor(e/7)+2,r=n(e),a=145===r?26:2*Math.ceil((r-13)/(2*t-2)),s=[r-7];for(let e=1;e<t-1;e++)s[e]=s[e-1]-a;return s.push(6),s.reverse()},r.getPositions=function(e){let t=[],n=r.getRowColCoords(e),a=n.length;for(let e=0;e<a;e++)for(let r=0;r<a;r++)(0!==e||0!==r)&&(0!==e||r!==a-1)&&(e!==a-1||0!==r)&&t.push([n[e],n[r]]);return t}},14002,(e,t,r)=>{let n=e.r(87201).getSymbolSize;r.getPositions=function(e){let t=n(e);return[[0,0],[t-7,0],[0,t-7]]}},37692,(e,t,r)=>{r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};r.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},r.from=function(e){return r.isValid(e)?parseInt(e,10):void 0},r.getPenaltyN1=function(e){let t=e.size,r=0,n=0,a=0,s=null,i=null;for(let l=0;l<t;l++){n=a=0,s=i=null;for(let o=0;o<t;o++){let t=e.get(l,o);t===s?n++:(n>=5&&(r+=3+(n-5)),s=t,n=1),(t=e.get(o,l))===i?a++:(a>=5&&(r+=3+(a-5)),i=t,a=1)}n>=5&&(r+=3+(n-5)),a>=5&&(r+=3+(a-5))}return r},r.getPenaltyN2=function(e){let t=e.size,r=0;for(let n=0;n<t-1;n++)for(let a=0;a<t-1;a++){let t=e.get(n,a)+e.get(n,a+1)+e.get(n+1,a)+e.get(n+1,a+1);(4===t||0===t)&&r++}return 3*r},r.getPenaltyN3=function(e){let t=e.size,r=0,n=0,a=0;for(let s=0;s<t;s++){n=a=0;for(let i=0;i<t;i++)n=n<<1&2047|e.get(s,i),i>=10&&(1488===n||93===n)&&r++,a=a<<1&2047|e.get(i,s),i>=10&&(1488===a||93===a)&&r++}return 40*r},r.getPenaltyN4=function(e){let t=0,r=e.data.length;for(let n=0;n<r;n++)t+=e.data[n];return 10*Math.abs(Math.ceil(100*t/r/5)-10)},r.applyMask=function(e,t){let n=t.size;for(let a=0;a<n;a++)for(let s=0;s<n;s++)t.isReserved(s,a)||t.xor(s,a,function(e,t,n){switch(e){case r.Patterns.PATTERN000:return(t+n)%2==0;case r.Patterns.PATTERN001:return t%2==0;case r.Patterns.PATTERN010:return n%3==0;case r.Patterns.PATTERN011:return(t+n)%3==0;case r.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case r.Patterns.PATTERN101:return t*n%2+t*n%3==0;case r.Patterns.PATTERN110:return(t*n%2+t*n%3)%2==0;case r.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw Error("bad maskPattern:"+e)}}(e,s,a))},r.getBestMask=function(e,t){let n=Object.keys(r.Patterns).length,a=0,s=1/0;for(let i=0;i<n;i++){t(i),r.applyMask(i,e);let n=r.getPenaltyN1(e)+r.getPenaltyN2(e)+r.getPenaltyN3(e)+r.getPenaltyN4(e);r.applyMask(i,e),n<s&&(s=n,a=i)}return a}},48125,(e,t,r)=>{let n=e.r(73133),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];r.getBlocksCount=function(e,t){switch(t){case n.L:return a[(e-1)*4+0];case n.M:return a[(e-1)*4+1];case n.Q:return a[(e-1)*4+2];case n.H:return a[(e-1)*4+3];default:return}},r.getTotalCodewordsCount=function(e,t){switch(t){case n.L:return s[(e-1)*4+0];case n.M:return s[(e-1)*4+1];case n.Q:return s[(e-1)*4+2];case n.H:return s[(e-1)*4+3];default:return}}},54232,(e,t,r)=>{let n=new Uint8Array(512),a=new Uint8Array(256),s=1;for(let e=0;e<255;e++)n[e]=s,a[s]=e,256&(s<<=1)&&(s^=285);for(let e=255;e<512;e++)n[e]=n[e-255];r.log=function(e){if(e<1)throw Error("log("+e+")");return a[e]},r.exp=function(e){return n[e]},r.mul=function(e,t){return 0===e||0===t?0:n[a[e]+a[t]]}},50677,(e,t,r)=>{let n=e.r(54232);r.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let a=0;a<e.length;a++)for(let s=0;s<t.length;s++)r[a+s]^=n.mul(e[a],t[s]);return r},r.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let e=r[0];for(let a=0;a<t.length;a++)r[a]^=n.mul(t[a],e);let a=0;for(;a<r.length&&0===r[a];)a++;r=r.slice(a)}return r},r.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let a=0;a<e;a++)t=r.mul(t,new Uint8Array([1,n.exp(a)]));return t}},62458,(e,t,r)=>{let n=e.r(50677);function a(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}a.prototype.initialize=function(e){this.degree=e,this.genPoly=n.generateECPolynomial(this.degree)},a.prototype.encode=function(e){if(!this.genPoly)throw Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=n.mod(t,this.genPoly),a=this.degree-r.length;if(a>0){let e=new Uint8Array(this.degree);return e.set(r,a),e}return r},t.exports=a},67483,(e,t,r)=>{r.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},96592,(e,t,r)=>{let n="[0-9]+",a="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",s="(?:(?![A-Z0-9 $%*+\\-./:]|"+(a=a.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";r.KANJI=RegExp(a,"g"),r.BYTE_KANJI=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),r.BYTE=RegExp(s,"g"),r.NUMERIC=RegExp(n,"g"),r.ALPHANUMERIC=RegExp("[A-Z $%*+\\-./:]+","g");let i=RegExp("^"+a+"$"),l=RegExp("^"+n+"$"),o=RegExp("^[A-Z0-9 $%*+\\-./:]+$");r.testKanji=function(e){return i.test(e)},r.testNumeric=function(e){return l.test(e)},r.testAlphanumeric=function(e){return o.test(e)}},50882,(e,t,r)=>{let n=e.r(67483),a=e.r(96592);r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(e,t){if(!e.ccBits)throw Error("Invalid mode: "+e);if(!n.isValid(t))throw Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},r.getBestModeForData=function(e){return a.testNumeric(e)?r.NUMERIC:a.testAlphanumeric(e)?r.ALPHANUMERIC:a.testKanji(e)?r.KANJI:r.BYTE},r.toString=function(e){if(e&&e.id)return e.id;throw Error("Invalid mode")},r.isValid=function(e){return e&&e.bit&&e.ccBits},r.from=function(e,t){if(r.isValid(e))return e;try{if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw Error("Unknown mode: "+e)}}catch(e){return t}}},93547,(e,t,r)=>{let n=e.r(87201),a=e.r(48125),s=e.r(73133),i=e.r(50882),l=e.r(67483),o=n.getBCHDigit(7973);function d(e,t){return i.getCharCountIndicator(e,t)+4}r.from=function(e,t){return l.isValid(e)?parseInt(e,10):t},r.getCapacity=function(e,t,r){if(!l.isValid(e))throw Error("Invalid QR Code version");void 0===r&&(r=i.BYTE);let s=(n.getSymbolTotalCodewords(e)-a.getTotalCodewordsCount(e,t))*8;if(r===i.MIXED)return s;let o=s-d(r,e);switch(r){case i.NUMERIC:return Math.floor(o/10*3);case i.ALPHANUMERIC:return Math.floor(o/11*2);case i.KANJI:return Math.floor(o/13);case i.BYTE:default:return Math.floor(o/8)}},r.getBestVersionForData=function(e,t){let n,a=s.from(t,s.M);if(Array.isArray(e)){if(e.length>1){for(let t=1;t<=40;t++)if(function(e,t){let r=0;return e.forEach(function(e){let n=d(e.mode,t);r+=n+e.getBitsLength()}),r}(e,t)<=r.getCapacity(t,a,i.MIXED))return t;return}if(0===e.length)return 1;n=e[0]}else n=e;return function(e,t,n){for(let a=1;a<=40;a++)if(t<=r.getCapacity(a,n,e))return a}(n.mode,n.getLength(),a)},r.getEncodedBits=function(e){if(!l.isValid(e)||e<7)throw Error("Invalid QR Code version");let t=e<<12;for(;n.getBCHDigit(t)-o>=0;)t^=7973<<n.getBCHDigit(t)-o;return e<<12|t}},57655,(e,t,r)=>{let n=e.r(87201),a=n.getBCHDigit(1335);r.getEncodedBits=function(e,t){let r=e.bit<<3|t,s=r<<10;for(;n.getBCHDigit(s)-a>=0;)s^=1335<<n.getBCHDigit(s)-a;return(r<<10|s)^21522}},94097,(e,t,r)=>{let n=e.r(50882);function a(e){this.mode=n.NUMERIC,this.data=e.toString()}a.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t,r;for(t=0;t+3<=this.data.length;t+=3)r=parseInt(this.data.substr(t,3),10),e.put(r,10);let n=this.data.length-t;n>0&&(r=parseInt(this.data.substr(t),10),e.put(r,3*n+1))},t.exports=a},12553,(e,t,r)=>{let n=e.r(50882),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(e){this.mode=n.ALPHANUMERIC,this.data=e}s.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=45*a.indexOf(this.data[t]);r+=a.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(a.indexOf(this.data[t]),6)},t.exports=s},82257,(e,t,r)=>{let n=e.r(50882);function a(e){this.mode=n.BYTE,"string"==typeof e?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}a.getBitsLength=function(e){return 8*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)},t.exports=a},22644,(e,t,r)=>{let n=e.r(50882),a=e.r(87201);function s(e){this.mode=n.KANJI,this.data=e}s.getBitsLength=function(e){return 13*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=a.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");r=(r>>>8&255)*192+(255&r),e.put(r,13)}},t.exports=s},45953,(e,t,r)=>{"use strict";var n={single_source_shortest_paths:function(e,t,r){var a,s,i,l,o,d,c,u={},h={};h[t]=0;var g=n.PriorityQueue.make();for(g.push(t,0);!g.empty();)for(i in s=(a=g.pop()).value,l=a.cost,o=e[s]||{})o.hasOwnProperty(i)&&(d=l+o[i],c=h[i],(void 0===h[i]||c>d)&&(h[i]=d,g.push(i,d),u[i]=s));if(void 0!==r&&void 0===h[r])throw Error("Could not find a path from "+t+" to "+r+".");return u},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],n=t;n;)r.push(n),e[n],n=e[n];return r.reverse(),r},find_path:function(e,t,r){var a=n.single_source_shortest_paths(e,t,r);return n.extract_shortest_path_from_predecessor_list(a,r)},PriorityQueue:{make:function(e){var t,r=n.PriorityQueue,a={};for(t in e=e||{},r)r.hasOwnProperty(t)&&(a[t]=r[t]);return a.queue=[],a.sorter=e.sorter||r.default_sorter,a},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=n},97930,(e,t,r)=>{let n=e.r(50882),a=e.r(94097),s=e.r(12553),i=e.r(82257),l=e.r(22644),o=e.r(96592),d=e.r(87201),c=e.r(45953);function u(e){return unescape(encodeURIComponent(e)).length}function h(e,t,r){let n,a=[];for(;null!==(n=e.exec(r));)a.push({data:n[0],index:n.index,mode:t,length:n[0].length});return a}function g(e){let t,r,a=h(o.NUMERIC,n.NUMERIC,e),s=h(o.ALPHANUMERIC,n.ALPHANUMERIC,e);return d.isKanjiModeEnabled()?(t=h(o.BYTE,n.BYTE,e),r=h(o.KANJI,n.KANJI,e)):(t=h(o.BYTE_KANJI,n.BYTE,e),r=[]),a.concat(s,t,r).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function m(e,t){switch(t){case n.NUMERIC:return a.getBitsLength(e);case n.ALPHANUMERIC:return s.getBitsLength(e);case n.KANJI:return l.getBitsLength(e);case n.BYTE:return i.getBitsLength(e)}}function x(e,t){let r,o=n.getBestModeForData(e);if((r=n.from(t,o))!==n.BYTE&&r.bit<o.bit)throw Error('"'+e+'" cannot be encoded with mode '+n.toString(r)+".\n Suggested mode is: "+n.toString(o));switch(r===n.KANJI&&!d.isKanjiModeEnabled()&&(r=n.BYTE),r){case n.NUMERIC:return new a(e);case n.ALPHANUMERIC:return new s(e);case n.KANJI:return new l(e);case n.BYTE:return new i(e)}}r.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(x(t,null)):t.data&&e.push(x(t.data,t.mode)),e},[])},r.fromString=function(e,t){let a=function(e,t){let r={},a={start:{}},s=["start"];for(let i=0;i<e.length;i++){let l=e[i],o=[];for(let e=0;e<l.length;e++){let d=l[e],c=""+i+e;o.push(c),r[c]={node:d,lastCount:0},a[c]={};for(let e=0;e<s.length;e++){let i=s[e];r[i]&&r[i].node.mode===d.mode?(a[i][c]=m(r[i].lastCount+d.length,d.mode)-m(r[i].lastCount,d.mode),r[i].lastCount+=d.length):(r[i]&&(r[i].lastCount=d.length),a[i][c]=m(d.length,d.mode)+4+n.getCharCountIndicator(d.mode,t))}}s=o}for(let e=0;e<s.length;e++)a[s[e]].end=0;return{map:a,table:r}}(function(e){let t=[];for(let r=0;r<e.length;r++){let a=e[r];switch(a.mode){case n.NUMERIC:t.push([a,{data:a.data,mode:n.ALPHANUMERIC,length:a.length},{data:a.data,mode:n.BYTE,length:a.length}]);break;case n.ALPHANUMERIC:t.push([a,{data:a.data,mode:n.BYTE,length:a.length}]);break;case n.KANJI:t.push([a,{data:a.data,mode:n.BYTE,length:u(a.data)}]);break;case n.BYTE:t.push([{data:a.data,mode:n.BYTE,length:u(a.data)}])}}return t}(g(e,d.isKanjiModeEnabled())),t),s=c.find_path(a.map,"start","end"),i=[];for(let e=1;e<s.length-1;e++)i.push(a.table[s[e]].node);return r.fromArray(i.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},r.rawSplit=function(e){return r.fromArray(g(e,d.isKanjiModeEnabled()))}},30671,(e,t,r)=>{let n=e.r(87201),a=e.r(73133),s=e.r(73666),i=e.r(11421),l=e.r(20637),o=e.r(14002),d=e.r(37692),c=e.r(48125),u=e.r(62458),h=e.r(93547),g=e.r(57655),m=e.r(50882),x=e.r(97930);function f(e,t,r){let n,a,s=e.size,i=g.getEncodedBits(t,r);for(n=0;n<15;n++)a=(i>>n&1)==1,n<6?e.set(n,8,a,!0):n<8?e.set(n+1,8,a,!0):e.set(s-15+n,8,a,!0),n<8?e.set(8,s-n-1,a,!0):n<9?e.set(8,15-n-1+1,a,!0):e.set(8,15-n-1,a,!0);e.set(s-8,8,1,!0)}r.create=function(e,t){let r,g;if(void 0===e||""===e)throw Error("No input text");let p=a.M;return void 0!==t&&(p=a.from(t.errorCorrectionLevel,a.M),r=h.from(t.version),g=d.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),function(e,t,r,a){let g;if(Array.isArray(e))g=x.fromArray(e);else if("string"==typeof e){let n=t;if(!n){let t=x.rawSplit(e);n=h.getBestVersionForData(t,r)}g=x.fromString(e,n||40)}else throw Error("Invalid data");let p=h.getBestVersionForData(g,r);if(!p)throw Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<p)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+p+".\n")}else t=p;let b=function(e,t,r){let a=new s;r.forEach(function(t){a.put(t.mode.bit,4),a.put(t.getLength(),m.getCharCountIndicator(t.mode,e)),t.write(a)});let i=(n.getSymbolTotalCodewords(e)-c.getTotalCodewordsCount(e,t))*8;for(a.getLengthInBits()+4<=i&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(0);let l=(i-a.getLengthInBits())/8;for(let e=0;e<l;e++)a.put(e%2?17:236,8);return function(e,t,r){let a,s,i=n.getSymbolTotalCodewords(t),l=i-c.getTotalCodewordsCount(t,r),o=c.getBlocksCount(t,r),d=i%o,h=o-d,g=Math.floor(i/o),m=Math.floor(l/o),x=m+1,f=g-m,p=new u(f),b=0,y=Array(o),j=Array(o),w=0,N=new Uint8Array(e.buffer);for(let e=0;e<o;e++){let t=e<h?m:x;y[e]=N.slice(b,b+t),j[e]=p.encode(y[e]),b+=t,w=Math.max(w,t)}let v=new Uint8Array(i),C=0;for(a=0;a<w;a++)for(s=0;s<o;s++)a<y[s].length&&(v[C++]=y[s][a]);for(a=0;a<f;a++)for(s=0;s<o;s++)v[C++]=j[s][a];return v}(a,e,t)}(t,r,g),y=new i(n.getSymbolSize(t));!function(e,t){let r=e.size,n=o.getPositions(t);for(let t=0;t<n.length;t++){let a=n[t][0],s=n[t][1];for(let t=-1;t<=7;t++)if(!(a+t<=-1)&&!(r<=a+t))for(let n=-1;n<=7;n++)s+n<=-1||r<=s+n||(t>=0&&t<=6&&(0===n||6===n)||n>=0&&n<=6&&(0===t||6===t)||t>=2&&t<=4&&n>=2&&n<=4?e.set(a+t,s+n,!0,!0):e.set(a+t,s+n,!1,!0))}}(y,t);let j=y.size;for(let e=8;e<j-8;e++){let t=e%2==0;y.set(e,6,t,!0),y.set(6,e,t,!0)}return!function(e,t){let r=l.getPositions(t);for(let t=0;t<r.length;t++){let n=r[t][0],a=r[t][1];for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)-2===t||2===t||-2===r||2===r||0===t&&0===r?e.set(n+t,a+r,!0,!0):e.set(n+t,a+r,!1,!0)}}(y,t),f(y,r,0),t>=7&&function(e,t){let r,n,a,s=e.size,i=h.getEncodedBits(t);for(let t=0;t<18;t++)r=Math.floor(t/3),n=t%3+s-8-3,a=(i>>t&1)==1,e.set(r,n,a,!0),e.set(n,r,a,!0)}(y,t),!function(e,t){let r=e.size,n=-1,a=r-1,s=7,i=0;for(let l=r-1;l>0;l-=2)for(6===l&&l--;;){for(let r=0;r<2;r++)if(!e.isReserved(a,l-r)){let n=!1;i<t.length&&(n=(t[i]>>>s&1)==1),e.set(a,l-r,n),-1==--s&&(i++,s=7)}if((a+=n)<0||r<=a){a-=n,n=-n;break}}}(y,b),isNaN(a)&&(a=d.getBestMask(y,f.bind(null,y,r))),d.applyMask(a,y),f(y,r,a),{modules:y,version:t,errorCorrectionLevel:r,maskPattern:a,segments:g}}(e,r,p,g)}},25950,(e,t,r)=>{function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw Error("Invalid hex color: "+e);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");let r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+t.slice(0,6).join("")}}r.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,a=e.scale||4;return{width:r,scale:r?4:a,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},r.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},r.getImageWidth=function(e,t){let n=r.getScale(e,t);return Math.floor((e+2*t.margin)*n)},r.qrToImageData=function(e,t,n){let a=t.modules.size,s=t.modules.data,i=r.getScale(a,n),l=Math.floor((a+2*n.margin)*i),o=n.margin*i,d=[n.color.light,n.color.dark];for(let t=0;t<l;t++)for(let r=0;r<l;r++){let c=(t*l+r)*4,u=n.color.light;t>=o&&r>=o&&t<l-o&&r<l-o&&(u=d[+!!s[Math.floor((t-o)/i)*a+Math.floor((r-o)/i)]]),e[c++]=u.r,e[c++]=u.g,e[c++]=u.b,e[c]=u.a}}},63037,(e,t,r)=>{let n=e.r(25950);r.render=function(e,t,r){var a;let s=r,i=t;void 0!==s||t&&t.getContext||(s=t,t=void 0),t||(i=function(){try{return document.createElement("canvas")}catch(e){throw Error("You need to specify a canvas element")}}()),s=n.getOptions(s);let l=n.getImageWidth(e.modules.size,s),o=i.getContext("2d"),d=o.createImageData(l,l);return n.qrToImageData(d.data,e,s),a=i,o.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=l,a.width=l,a.style.height=l+"px",a.style.width=l+"px",o.putImageData(d,0,0),i},r.renderToDataURL=function(e,t,n){let a=n;void 0!==a||t&&t.getContext||(a=t,t=void 0),a||(a={});let s=r.render(e,t,a),i=a.type||"image/png",l=a.rendererOpts||{};return s.toDataURL(i,l.quality)}},10891,(e,t,r)=>{let n=e.r(25950);function a(e,t){let r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function s(e,t,r){let n=e+t;return void 0!==r&&(n+=" "+r),n}r.render=function(e,t,r){let i=n.getOptions(t),l=e.modules.size,o=e.modules.data,d=l+2*i.margin,c=i.color.light.a?"<path "+a(i.color.light,"fill")+' d="M0 0h'+d+"v"+d+'H0z"/>':"",u="<path "+a(i.color.dark,"stroke")+' d="'+function(e,t,r){let n="",a=0,i=!1,l=0;for(let o=0;o<e.length;o++){let d=Math.floor(o%t),c=Math.floor(o/t);d||i||(i=!0),e[o]?(l++,o>0&&d>0&&e[o-1]||(n+=i?s("M",d+r,.5+c+r):s("m",a,0),a=0,i=!1),d+1<t&&e[o+1]||(n+=s("h",l),l=0)):a++}return n}(o,l,i.margin)+'"/>',h='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+('viewBox="0 0 '+d+" ")+d+'" shape-rendering="crispEdges">'+c+u+"</svg>\n";return"function"==typeof r&&r(null,h),h}},73134,(e,t,r)=>{let n=e.r(38750),a=e.r(30671),s=e.r(63037),i=e.r(10891);function l(e,t,r,s,i){let l=[].slice.call(arguments,1),o=l.length,d="function"==typeof l[o-1];if(!d&&!n())throw Error("Callback required as last argument");if(d){if(o<2)throw Error("Too few arguments provided");2===o?(i=r,r=t,t=s=void 0):3===o&&(t.getContext&&void 0===i?(i=s,s=void 0):(i=s,s=r,r=t,t=void 0))}else{if(o<1)throw Error("Too few arguments provided");return 1===o?(r=t,t=s=void 0):2!==o||t.getContext||(s=r,r=t,t=void 0),new Promise(function(n,i){try{let i=a.create(r,s);n(e(i,t,s))}catch(e){i(e)}})}try{let n=a.create(r,s);i(null,e(n,t,s))}catch(e){i(e)}}r.create=a.create,r.toCanvas=l.bind(null,s.render),r.toDataURL=l.bind(null,s.renderToDataURL),r.toString=l.bind(null,function(e,t,r){return i.render(e,r)})},87735,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(18566),a=e.i(57688),s=e.i(22724),i=e.i(37963),l=e.i(92006),o=e.i(73134);let d=function({profilePath:e}){let[n,a]=(0,r.useState)(""),s=(0,r.useMemo)(()=>{if(!e)return"";let t=window.location.origin,r=e.startsWith("/")?e:`/${e}`;return`${t}${r}`},[e]);return(0,r.useEffect)(()=>{let e=!1;return s?(o.default.toDataURL(s,{errorCorrectionLevel:"M",margin:1,width:320}).then(t=>{e||a(t)}).catch(()=>{e||a("")}),()=>{e=!0}):void a("")},[s]),(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,t.jsx)("div",{className:"w-40 h-40 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:n?(0,t.jsx)("img",{src:n,alt:"Mã QR hồ sơ",className:"w-full h-full rounded-lg"}):(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"Đang tạo QR…"})}),(0,t.jsx)("p",{className:"text-sm text-gray-500 text-center md:text-base",children:"Mã QR để người khác kết bạn hoặc xem hồ sơ của bạn."})]})};var c=e.i(74842);function u(){let e=(0,c.useToast)(),[n,a]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),[l,o]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),h=async()=>{if(!s||s!==l)return void e({type:"error",message:"Mật khẩu xác nhận không khớp"});try{u(!0);let t=localStorage.getItem("info_user"),r=t?JSON.parse(t):null,l=String(r?._id||""),d=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"changePassword",data:{userId:l,currentPassword:n,newPassword:s}})}),c=await d.json();if(!d.ok||!c.success)return void e({type:"error",message:c.message||"Đổi mật khẩu thất bại"});e({type:"success",message:"Đổi mật khẩu thành công"}),a(""),i(""),o("")}finally{u(!1)}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{type:"password",placeholder:"Mật khẩu hiện tại",value:n,onChange:e=>a(e.target.value),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800"}),(0,t.jsx)("input",{type:"password",placeholder:"Mật khẩu mới",value:s,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800"}),(0,t.jsx)("input",{type:"password",placeholder:"Xác nhận mật khẩu mới",value:l,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800"}),(0,t.jsx)("button",{onClick:h,disabled:d,className:"cursor-pointer w-full px-4 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 disabled:opacity-70",children:d?"Đang đổi...":"Đổi mật khẩu"})]})}function h(){let e=(0,c.useToast)(),[n,a]=(0,r.useState)({showOnline:!0,allowFriendRequests:!0,allowTagging:!0}),[s,i]=(0,r.useState)(null);(0,r.useEffect)(()=>{try{let e=localStorage.getItem("info_user"),t=e?JSON.parse(e):null,r=t?.privacy||null;r&&a(r)}catch{}},[]);let l=async(t,r)=>{try{i(String(r));let n=localStorage.getItem("info_user"),s=n?JSON.parse(n):null,l=String(s?._id||""),o=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",field:"_id",value:l,data:{privacy:t}})}),d=await o.json();if(!o.ok||d.error)return void e({type:"error",message:"Cập nhật thất bại"});try{let e=localStorage.getItem("info_user"),r=e?JSON.parse(e):null;r&&localStorage.setItem("info_user",JSON.stringify({...r,privacy:t}))}catch{}a(t),e({type:"success",message:"Đã lưu"})}finally{i(null)}},o=e=>{l({...n,[e]:!n[e]},e)};return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,t.jsx)("span",{className:"text-gray-800 font-medium",children:"Hiển thị trạng thái online"}),(0,t.jsx)("button",{onClick:()=>o("showOnline"),className:`px-3 py-1 rounded-lg text-sm ${n.showOnline?"bg-indigo-600 text-white":"bg-gray-200 text-gray-800"}`,children:"showOnline"===s?"...":n.showOnline?"Bật":"Tắt"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,t.jsx)("span",{className:"text-gray-800 font-medium",children:"Cho phép lời mời kết bạn"}),(0,t.jsx)("button",{onClick:()=>o("allowFriendRequests"),className:`px-3 py-1 rounded-lg text-sm ${n.allowFriendRequests?"bg-indigo-600 text-white":"bg-gray-200 text-gray-800"}`,children:"allowFriendRequests"===s?"...":n.allowFriendRequests?"Bật":"Tắt"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,t.jsx)("span",{className:"text-gray-800 font-medium",children:"Cho phép gắn thẻ @"}),(0,t.jsx)("button",{onClick:()=>o("allowTagging"),className:`px-3 py-1 rounded-lg text-sm ${n.allowTagging?"bg-indigo-600 text-white":"bg-gray-200 text-gray-800"}`,children:"allowTagging"===s?"...":n.allowTagging?"Bật":"Tắt"})]})]})}var g=e.i(91416);function m(){let e=(0,c.useToast)(),[n,a]=(0,r.useState)({soundEnabled:!0,desktopAlerts:!0,showPreview:!0}),[s,i]=(0,r.useState)(null),{playMessageSound:l}=(0,g.useChatNotifications)({});(0,r.useEffect)(()=>{try{let e=localStorage.getItem("info_user"),t=e?JSON.parse(e):null,r=t?.notifications||null;r&&a(r)}catch{}},[]);let o=async(t,r)=>{try{i(String(r));let n=localStorage.getItem("info_user"),s=n?JSON.parse(n):null,l=String(s?._id||""),o=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",field:"_id",value:l,data:{notifications:t}})}),d=await o.json();if(!o.ok||d.error)return void e({type:"error",message:"Cập nhật thất bại"});try{let e=localStorage.getItem("info_user"),r=e?JSON.parse(e):null;r&&localStorage.setItem("info_user",JSON.stringify({...r,notifications:t}))}catch{}a(t),e({type:"success",message:"Đã lưu"})}finally{i(null)}},d=e=>{o({...n,[e]:!n[e]},e)};return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,t.jsx)("span",{className:"text-gray-800 font-medium",children:"Âm thanh thông báo"}),(0,t.jsx)("button",{onClick:()=>d("soundEnabled"),className:`px-3 py-1 rounded-lg text-sm ${n.soundEnabled?"bg-indigo-600 text-white":"bg-gray-200 text-gray-800"}`,children:"soundEnabled"===s?"...":n.soundEnabled?"Bật":"Tắt"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,t.jsx)("span",{className:"text-gray-800 font-medium",children:"Thử âm thanh"}),(0,t.jsx)("button",{onClick:()=>{n.soundEnabled?l():e({type:"info",message:"Âm thanh đang tắt"})},className:"px-3 py-1 rounded-lg text-sm bg-indigo-600 text-white",children:"Phát “ting”"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,t.jsx)("span",{className:"text-gray-800 font-medium",children:"Hiện banner desktop"}),(0,t.jsx)("button",{onClick:()=>d("desktopAlerts"),className:`px-3 py-1 rounded-lg text-sm ${n.desktopAlerts?"bg-indigo-600 text-white":"bg-gray-200 text-gray-800"}`,children:"desktopAlerts"===s?"...":n.desktopAlerts?"Bật":"Tắt"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,t.jsx)("span",{className:"text-gray-800 font-medium",children:"Hiển thị preview nội dung"}),(0,t.jsx)("button",{onClick:()=>d("showPreview"),className:`px-3 py-1 rounded-lg text-sm ${n.showPreview?"bg-indigo-600 text-white":"bg-gray-200 text-gray-800"}`,children:"showPreview"===s?"...":n.showPreview?"Bật":"Tắt"})]})]})}var x=e.i(50719);let f=function(){let[e,a]=(0,r.useState)(null),s=(0,n.useRouter)(),i={password:"Đổi mật khẩu",privacy:"Quyền riêng tư",notifications:"Cài đặt thông báo"},l=async()=>{try{await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"logout"})})}catch{}try{localStorage.removeItem("info_user"),localStorage.removeItem("remember_login")}catch{}s.push("/login")};return(0,t.jsxs)("div",{className:"space-y-3",children:[[{key:"password",label:"Đổi mật khẩu"},{key:"privacy",label:"Quyền riêng tư"},{key:"notifications",label:"Cài đặt thông báo"}].map(e=>(0,t.jsx)("button",{onClick:()=>a(e.key),className:"cursor-pointer w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 rounded-lg md:text-lg",children:e.label},e.key)),(0,t.jsxs)("button",{onClick:l,className:"cursor-pointer w-full px-4 py-3 text-left bg-red-50 hover:bg-red-100 rounded-lg md:text-lg text-red-600 inline-flex items-center gap-2",children:[(0,t.jsx)(x.HiOutlineLogout,{className:"w-5 h-5"})," Đăng xuất"]}),e&&(0,t.jsxs)("div",{className:"fixed inset-0 z-[9999]",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 h-[110%]",onClick:()=>a(null)}),(0,t.jsx)("div",{className:"hidden md:flex absolute inset-0 items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b-gray-300",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-800",children:i[e]}),(0,t.jsx)("button",{onClick:()=>a(null),className:"cursor-pointer px-3 py-1 text-sm font-medium rounded-lg bg-gray-100 hover:bg-gray-200",children:"Đóng"})]}),(0,t.jsxs)("div",{className:"p-4",children:["password"===e&&(0,t.jsx)(u,{}),"privacy"===e&&(0,t.jsx)(h,{}),"notifications"===e&&(0,t.jsx)(m,{})]})]})}),(0,t.jsx)("div",{className:"md:hidden absolute inset-x-0 bottom-0 p-5",children:(0,t.jsxs)("div",{className:"bg-white rounded-t-2xl shadow-2xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b-gray-300 border-b",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-800",children:i[e]}),(0,t.jsx)("button",{onClick:()=>a(null),className:"cursor-pointer px-3 py-1 text-sm font-medium rounded-lg bg-gray-100 hover:bg-gray-200",children:"Đóng"})]}),(0,t.jsxs)("div",{className:"p-4 max-h-[70vh] overflow-y-auto",children:["password"===e&&(0,t.jsx)(u,{}),"privacy"===e&&(0,t.jsx)(h,{}),"notifications"===e&&(0,t.jsx)(m,{})]})]})})]})]})};function p({data:e}){let r=[{id:1,name:"Ban lãnh đạo"},{id:2,name:"Quản lý"},{id:3,name:"Kinh doanh"},{id:4,name:"Thiết kế"},{id:5,name:"Sản xuất"},{id:6,name:"Sàn TMĐT"},{id:7,name:"Kế toán"},{id:8,name:"Kho TM"},{id:9,name:"HCNS"},{id:10,name:"Maketing"}].find(t=>t.id===Number(e.department))?.name||e.department||"Chưa cập nhật";return(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Thông tin cá nhân"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Giới tính"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:e.gender||"Chưa cập nhật"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Ngày sinh"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:e.birthday||"Chưa cập nhật"})]}),(0,t.jsxs)("div",{className:"py-2 border-b border-gray-100",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Điện thoại"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:e.phone||"Chưa cập nhật"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2 pl-32",children:"Số điện thoại chỉ hiển thị với người có lưu số bạn trong danh bạ máy"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Email"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:e.email||"Chưa cập nhật"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Địa chỉ"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:e.address||"Chưa cập nhật"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Phòng ban"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:r})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Chức vụ"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:e.title||"Chưa cập nhật"})]})]})]})}var b=e.i(14674);let y={user:(0,t.jsx)(b.HiUser,{className:"w-6 h-6 text-gray-500"}),phone:(0,t.jsx)(b.HiPhone,{className:"w-6 h-6 text-gray-500"}),calendar:(0,t.jsx)(b.HiCalendar,{className:"w-6 h-6 text-gray-500"}),email:(0,t.jsx)(b.HiEnvelope,{className:"w-6 h-6 text-gray-500"}),location:(0,t.jsx)(b.HiMapPin,{className:"w-6 h-6 text-gray-500"}),building:(0,t.jsx)(b.HiBuildingOffice2,{className:"w-6 h-6 text-gray-500"}),briefcase:(0,t.jsx)(b.HiBriefcase,{className:"w-6 h-6 text-gray-500"})};function j({icon:e,label:r,value:n,badge:a}){return(0,t.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-2xl px-6 py-3 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[e?y[e]:null,(0,t.jsx)("span",{className:"text-gray-600 font-medium text-base",children:r})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900 text-base",children:n}),a&&(0,t.jsx)("div",{className:"mt-1.5",children:a})]})]})}let w={1:{label:"Ban lãnh đạo",color:"bg-pink-100 text-pink-700"},2:{label:"Quản lý",color:"bg-purple-100 text-purple-700"},3:{label:"Kinh doanh",color:"bg-blue-100 text-blue-700"},4:{label:"Thiết kế",color:"bg-green-100 text-green-700"},5:{label:"Sản xuất",color:"bg-yellow-100 text-yellow-700"},6:{label:"Sàn TMĐT",color:"bg-orange-100 text-orange-700"},7:{label:"Kế toán",color:"bg-red-100 text-red-700"},8:{label:"Kho TM",color:"bg-gray-100 text-gray-700"},9:{label:"HCNS",color:"bg-teal-100 text-teal-700"},10:{label:"Maketing",color:"bg-pink-100 text-pink-700"}};function N({form:e}){let r=e.department?w[e.department]:void 0;return(0,t.jsxs)("div",{className:"space-y-4 max-w-2xl mx-auto",children:[(0,t.jsx)(j,{icon:"user",label:"Tên hiển thị",value:e.name||"Chưa đặt"}),(0,t.jsx)(j,{icon:"phone",label:"Số điện thoại",value:e.phone||"Chưa đặt"}),(0,t.jsx)(j,{icon:"user",label:"Giới tính",value:e.gender||"Chưa chọn"}),(0,t.jsx)(j,{icon:"calendar",label:"Ngày sinh",value:e.birthday||"Chưa chọn"}),(0,t.jsx)(j,{icon:"email",label:"Email",value:e.email||"Chưa đặt"}),(0,t.jsx)(j,{icon:"location",label:"Địa chỉ",value:e.address||"Chưa đặt"}),(0,t.jsx)(j,{icon:"building",label:"Phòng ban",value:r?.label||"Chưa xác định",badge:r&&(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${r.color}`,children:r.label})}),(0,t.jsx)(j,{icon:"briefcase",label:"Chức vụ",value:e.title||"Chưa đặt"})]})}function v({form:e,setForm:n,isSaving:a,onSave:s}){let[i,l]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),c=[{id:1,name:"Ban lãnh đạo"},{id:2,name:"Quản lý"},{id:3,name:"Kinh doanh"},{id:4,name:"Thiết kế"},{id:5,name:"Sản xuất"},{id:6,name:"Sàn TMĐT"},{id:7,name:"Kế toán"},{id:8,name:"Kho TM"},{id:9,name:"HCNS"},{id:10,name:"Maketing"}];return(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Chỉnh sửa thông tin"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Tên hiển thị"}),(0,t.jsx)("input",{className:"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400",value:e.name,onChange:t=>n({...e,name:t.target.value}),placeholder:"Chưa cập nhật"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Giới tính"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>l(!i),className:`
      w-full px-5 p-2 rounded-2xl  text-base font-medium text-left cursor-pointer
      flex items-center justify-between transition-all duration-200
      focus:outline-none
      ${i?"bg-white ring-4 ring-[#0068ff]/20 border-2 border-[#0068ff]":"border-2 border-transparent "}
      ${e.gender?"text-gray-900":"text-gray-500"}
    `,children:[(0,t.jsx)("span",{children:e.gender||"Chưa cập nhật"}),(0,t.jsx)(x.HiChevronDown,{className:`w-5 h-5 text-gray-500 transition-transform duration-300 ${i?"rotate-180":""}`})]}),i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)}),(0,t.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden z-50",children:["Nam","Nữ","Khác"].map(r=>(0,t.jsxs)("button",{type:"button",onClick:()=>{n({...e,gender:r}),l(!1)},className:`
              w-full px-5 py-4 text-left font-medium transition-all duration-150 cursor-pointer
              ${e.gender===r?"bg-[#0068ff]/5 text-[#0068ff]":"text-gray-800 hover:bg-gray-100"}
              active:bg-gray-200 flex items-center justify-between
            `,children:[(0,t.jsx)("span",{children:r}),e.gender===r&&(0,t.jsx)(b.HiCheck,{className:"w-5 h-5 text-[#0068ff]"})]},r))})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 ",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Ngày sinh"}),(0,t.jsx)("input",{type:"date",className:"flex-1 text-right cursor-pointer text-gray-900 font-medium focus:outline-none bg-transparent",value:e.birthday,onChange:t=>n({...e,birthday:t.target.value})})]}),(0,t.jsxs)("div",{className:"py-2 border-b border-gray-100",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Điện thoại"}),(0,t.jsx)("input",{type:"tel",className:"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400",value:e.phone,onChange:t=>n({...e,phone:t.target.value}),placeholder:"Chưa cập nhật"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2 pl-32",children:"Số điện thoại chỉ hiển thị với người có lưu số bạn trong danh bạ máy"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Email"}),(0,t.jsx)("input",{type:"email",className:"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400",value:e.email,onChange:t=>n({...e,email:t.target.value}),placeholder:"Chưa cập nhật"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Địa chỉ"}),(0,t.jsx)("input",{className:"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400",value:e.address,onChange:t=>n({...e,address:t.target.value}),placeholder:"Chưa cập nhật"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-4 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 text-base w-32",children:"Phòng ban"}),(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>d(!o),className:`
        w-full px-4 py-1 text-right font-medium text-base transition-all duration-200 cursor-pointer
        flex items-center justify-end gap-3
        ${e.department?"text-gray-900":"text-gray-500"}
        focus:outline-none
      `,children:[(0,t.jsx)("span",{className:"truncate max-w-[180px]",children:c.find(t=>String(t.id)===e.department)?.name||"Chưa cập nhật"}),(0,t.jsx)(x.HiChevronDown,{className:`w-5 h-5 text-gray-500 transition-transform duration-300 flex-shrink-0 ${o?"rotate-180":""}`})]}),o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)}),(0,t.jsxs)("div",{className:"absolute h-[24rem] overflow-y-auto right-0 custom-scrollbar bottom-full mt-2 w-64 bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden z-50",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>{n({...e,department:""}),d(!1)},className:`
              w-full px-5 py-4 text-left font-medium transition-all duration-150 cursor-pointer
              ${!e.department?"bg-[#0068ff]/5 text-[#0068ff]":"text-gray-800 hover:bg-gray-100"}
              active:bg-gray-200 flex items-center justify-between
            `,children:[(0,t.jsx)("span",{children:"Chưa cập nhật"}),!e.department&&(0,t.jsx)(b.HiCheck,{className:"w-5 h-5 text-[#0068ff]"})]}),c.map(r=>(0,t.jsxs)("button",{type:"button",onClick:()=>{n({...e,department:String(r.id)}),d(!1)},className:`
                w-full px-5 py-4 text-left font-medium transition-all duration-150 cursor-pointer border-t border-gray-100
                ${e.department===String(r.id)?"bg-[#0068ff]/5 text-[#0068ff]":"text-gray-800 hover:bg-gray-100"}
                active:bg-gray-200 flex items-center justify-between
              `,children:[(0,t.jsx)("span",{children:r.name}),e.department===String(r.id)&&(0,t.jsx)(b.HiCheck,{className:"w-5 h-5 text-[#0068ff]"})]},r.id))]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Chức vụ"}),(0,t.jsx)("input",{className:"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400",value:e.title,onChange:t=>n({...e,title:t.target.value}),placeholder:"Chưa cập nhật"})]})]}),(0,t.jsx)("button",{onClick:s,disabled:a,className:"w-full mt-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold rounded-full shadow-sm transition-all duration-200 active:scale-95 flex items-center justify-center gap-2 cursor-pointer",children:a?"Đang lưu...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.HiCheck,{className:"w-5 h-5"}),"Lưu thông tin"]})})]})}function C({onDataChange:e,isOwner:a}){let s=(0,n.useSearchParams)(),i=(0,c.useToast)(),[l,o]=(0,r.useState)({name:"",phone:"",gender:"",birthday:"",email:"",address:"",department:"",title:""}),[d,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{x(!0)},[]);let f=(0,r.useMemo)(()=>{try{let e=localStorage.getItem("info_user");return e?JSON.parse(e):null}catch{return null}},[]),p=(0,r.useMemo)(()=>String(f?.username||f?._id||""),[f]),y=s.get("user")||"",j=a??(p&&y&&p===y),w=(0,r.useRef)(!1);(0,r.useEffect)(()=>{if(w.current||!f)return;let t={name:String(f.name||f.username||""),phone:String(f.phone||""),gender:String(f.gender||""),birthday:String(f.birthday||""),email:String(f.email||""),address:String(f.address||""),department:String(f.department||""),title:String(f.title||"")};o(t),w.current=!0,e?.(t)},[f,e]);let C=async()=>{if(j){u(!0);try{let t=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",field:f?.username?"username":"_id",value:p,data:l})}),r=await t.json();if(!t.ok||r.error)throw Error(r.error||"Lưu thất bại");localStorage.setItem("info_user",JSON.stringify({...f,...l})),e?.(l),i({type:"success",message:"Đã lưu thông tin!"}),g(!1)}catch(e){i({type:"error",message:e.message||"Lỗi hệ thống"})}finally{u(!1)}}};if(!m)return null;if(!j)return(0,t.jsx)(N,{form:l});if(h)return(0,t.jsx)(v,{form:l,setForm:o,isSaving:d,onSave:C});let S=[{id:2,name:"Quản lý"},{id:3,name:"Kinh doanh"},{id:4,name:"Thiết kế"},{id:5,name:"Sản xuất"},{id:6,name:"Sàn TMĐT"},{id:7,name:"Kế toán"},{id:8,name:"Kho TM"},{id:9,name:"HCNS"},{id:10,name:"Maketing"}].find(e=>e.id===Number(l.department))?.name||l.department||"Chưa cập nhật";return(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Thông tin cá nhân"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Tên hiển thị"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:l.name||"Chưa cập nhật"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Giới tính"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:l.gender||"Chưa cập nhật"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Ngày sinh"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:l.birthday||"Chưa cập nhật"})]}),(0,t.jsxs)("div",{className:"py-2 border-b border-gray-100",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Điện thoại"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:l.phone||"Chưa cập nhật"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2 pl-32",children:"Số điện thoại chỉ hiển thị với người có lưu số bạn trong danh bạ máy"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Email"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:l.email||"Chưa cập nhật"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Địa chỉ"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:l.address||"Chưa cập nhật"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Phòng ban"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:S})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-500 w-32",children:"Chức vụ"}),(0,t.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:l.title||"Chưa cập nhật"})]})]}),(0,t.jsxs)("button",{onClick:()=>g(!0),className:"w-full mt-6 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-3 rounded-full flex items-center justify-center gap-2 transition-colors cursor-pointer",children:[(0,t.jsx)(b.HiPencil,{className:"w-4 h-4"}),"Chỉnh sửa"]})]})}function S({tab:e,isOwner:r,overviewData:n,handleOverviewData:a,profileIdForQr:s}){return(0,t.jsxs)("div",{className:"",children:[(0,t.jsxs)("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 delay-100",children:["info"===e&&(0,t.jsx)(t.Fragment,{children:r?(0,t.jsx)(C,{isOwner:r,onDataChange:e=>a(e)}):(0,t.jsx)(p,{data:n})}),"qr"===e&&(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Mã QR"}),(0,t.jsx)("div",{className:"flex justify-center py-6",children:(0,t.jsx)("div",{className:" p-2  ",children:(0,t.jsx)(d,{profilePath:s?`/profile/${encodeURIComponent(s)}`:""})})})]}),"settings"===e&&r&&(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Cài đặt"}),(0,t.jsx)(f,{})]}),"profile"===e&&(0,t.jsx)(p,{data:n})]}),!["info","qr","settings","profile"].includes(e)&&(0,t.jsx)("div",{className:"text-center py-20 text-gray-500",children:(0,t.jsx)("p",{className:"text-lg",children:"Chưa có nội dung"})})]})}var k=e.i(74080);function T({isOpen:e,onClose:n,title:a,children:s,rightAction:i,headerClassName:l="",titleClassName:o="",backButtonClassName:d=""}){let[c,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{u(!0)},[]),(0,r.useEffect)(()=>{if(e)g(!0),document.body.style.overflow="hidden";else{let e=setTimeout(()=>g(!1),300);return document.body.style.overflow="",()=>clearTimeout(e)}},[e]),c&&h)?(0,k.createPortal)((0,t.jsxs)("div",{className:"fixed inset-0 z-[9999] flex justify-center items-end md:items-center",children:[(0,t.jsx)("div",{className:`absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity duration-300 ${e?"opacity-100":"opacity-0"}`,onClick:n}),(0,t.jsxs)("div",{className:`relative w-full h-full md:h-[90vh] md:max-w-[480px] md:rounded-3xl md:overflow-hidden bg-white shadow-2xl transition-all duration-300 ease-in-out transform flex flex-col ${e?"translate-x-0 opacity-100 scale-100":"translate-x-full md:translate-x-0 md:opacity-0 md:scale-95"}`,children:[(0,t.jsxs)("div",{className:`flex-none p-2 border-b border-gray-100 flex items-center justify-between sticky top-0 z-10 ${l||"bg-white/80 backdrop-blur-md"}`,children:[(0,t.jsx)("button",{onClick:n,className:`p-2 -ml-2 rounded-full transition-colors cursor-pointer ${d||"text-gray-600 hover:bg-gray-100 active:bg-gray-200"}`,children:(0,t.jsx)(b.HiChevronLeft,{className:"w-6 h-6"})}),(0,t.jsx)("h2",{className:`text-lg font-bold flex-1 text-center pr-8 ${o||"text-gray-800"}`,children:a}),i&&(0,t.jsx)("div",{className:"absolute right-4",children:i})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto bg-gray-50 custom-scrollbar",children:s})]})]}),document.body):null}function E(){let e=(0,n.useParams)(),o=(0,n.useRouter)(),d="string"==typeof e?.user?e.user:"",{currentUser:c,currentId:u}=(0,s.useCurrentUser)(),h=!!(d&&(d===String(c?._id||"")||d===String(c?.username||""))),{viewingUserId:g,overviewData:m,setOverviewData:f,displayName:p,setDisplayName:y,displayDept:j,setDisplayDept:w,displayTitle:N,setDisplayTitle:v,displayBio:C,setDisplayBio:k,avatar:E,background:M,setAvatar:P,setBackground:B}=function(e,t,n){let[a,s]=(0,r.useState)(""),[i,l]=(0,r.useState)({phone:"",gender:"",birthday:"",email:"",address:"",department:"",title:"",bio:""}),[o,d]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[f,p]=(0,r.useState)(void 0),[b,y]=(0,r.useState)(void 0),j=(0,r.useCallback)(e=>{if(!e)return;s(String(e._id||""));let r=String(n?._id||""),a=e.nicknames||void 0,i=!t&&r&&a?String(a[r]||"").trim():"",o=String(e.name||e.username||"");d(i||o),u(String(e.department||"")),g(String(e.title||"")),x(String(e.bio||"")),p("string"==typeof e.avatar?e.avatar:void 0),y("string"==typeof e.background?e.background:void 0),l({phone:String(e.phone||""),gender:String(e.gender||""),birthday:String(e.birthday||""),email:String(e.email||""),address:String(e.address||""),department:String(e.department||""),title:String(e.title||""),bio:String(e.bio||"")})},[t,n]);return(0,r.useEffect)(()=>{if(t)return void j(n);let r=async()=>{try{let t=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"getById",_id:e})}),r=await t.json(),n=Array.isArray(r?.data)?r.data:void 0,a=r?.row||n?.[0]||r?.user||r;j(a||null)}catch{}};e&&r()},[t,e,n,j]),{viewingUserId:a,overviewData:i,displayName:o,setDisplayName:d,displayDept:c,setDisplayDept:u,displayTitle:h,setDisplayTitle:g,displayBio:m,setDisplayBio:x,avatar:f,background:b,setAvatar:p,setBackground:y,setOverviewData:l}}(d,!!h,c),A=g||h&&String(c?._id||"")||d,{handleUpload:I,isUploadingAvatar:R,isUploadingBackground:H}=function(e,t,n,a){let[s,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1);return{handleUpload:async(r,s)=>{if(t&&e&&r.type.startsWith("image/")&&!(r.size>0x40000000)){"avatar"===s?i(!0):o(!0);try{let t=new FormData;t.append("file",r),t.append("roomId",s),t.append("sender",e),t.append("receiver",""),t.append("type","image"),t.append("folderName","avatar"===s?"Avatars":"Backgrounds");let i=await fetch(`/api/upload?uploadId=${s}_${e}`,{method:"POST",body:t}),l=await i.json();if(!l.success||!l.link)return;let o=l.link,d=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",field:"_id",value:e,data:{[s]:o}})});if((await d.json()).error)return;"avatar"===s?n(o):a(o);try{let e=localStorage.getItem("info_user");if(e){let t=JSON.parse(e);localStorage.setItem("info_user",JSON.stringify({...t,[s]:o}))}}catch{}}finally{"avatar"===s?i(!1):o(!1)}}},isUploadingAvatar:s,isUploadingBackground:l}}(u,!!h,P,B),[_,L]=(0,r.useState)("profile"),[O,U]=(0,r.useState)(!1),[z,J]=(0,r.useState)(""),[K,F]=(0,r.useState)(!1),$=(0,r.useRef)(null),D=(0,r.useRef)(null),[Q,q]=(0,r.useState)(!1),[Y,V]=(0,r.useState)(p),[X,G]=(0,r.useState)(!1),[W,Z]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1),[er,en]=(0,r.useState)(null),[ea,es]=(0,r.useState)(null),[ei,el]=(0,r.useState)("image.jpg"),eo=(e,t)=>{try{let r=new FileReader;r.onload=()=>{en(String(r.result||"")),es(t),el(e.name||("avatar"===t?"avatar.jpg":"background.jpg")),et(!0)},r.readAsDataURL(e)}catch{}},ed=async e=>{ea&&(await I(e,ea),et(!1),en(null),es(null))},ec=async e=>{if(!c||!c._id||!d)return;let t=String(e||"").trim();try{if(G(!0),!(await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"updateNickname",roomId:d,currentUserId:String(c._id),data:{nickname:t}})})).ok)throw Error();if(t)y(t);else try{let e=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"getById",_id:d})}),t=await e.json(),r=t?.row||t?.user||t,n=String(r?.name||r?.username||"");y(n)}catch{}q(!1)}finally{G(!1)}},eu=async(e,t)=>{if(u&&h)try{await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",field:"_id",value:u,data:{[e]:t}})});try{let r=localStorage.getItem("info_user");if(r){let n=JSON.parse(r);localStorage.setItem("info_user",JSON.stringify({...n,[e]:t}))}}catch{}"title"===e&&(v(t),f(e=>({...e,title:t}))),"bio"===e&&(k(t),f(e=>({...e,bio:t})))}catch(e){console.error("Failed to update profile",e)}},eh=(0,r.useMemo)(()=>{let e=String(j||m.department||"");return[{id:2,name:"Quản lý"},{id:3,name:"Kinh doanh"},{id:4,name:"Thiết kế"},{id:5,name:"Sản xuất"},{id:6,name:"Sàn TMĐT"},{id:7,name:"Kế toán"},{id:8,name:"Kho TM"},{id:9,name:"HCNS"},{id:10,name:"Maketing"}].find(t=>t.id===Number(e))?.name||e||"Chưa xác định"},[j,m.department]);return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 ",children:[(0,t.jsxs)("div",{className:"w-full bg-gray-50 h-screen overflow-y-auto custom-scrollbar pb-[5rem] md:pb-0 relative no-scrollbar",children:[(0,t.jsxs)("div",{className:"relative bg-white pb-4 mb-2",children:[(0,t.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-30 flex md:justify-end justify-end items-center p-4 text-white",children:[(0,t.jsx)("button",{onClick:()=>o.back(),className:"cursor-pointer hidden p-1.5 rounded-full bg-black/20 backdrop-blur-md hover:bg-black/30 transition-colors",children:(0,t.jsx)(b.HiChevronLeft,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{className:"cursor-pointer p-1.5 rounded-full bg-black/20 backdrop-blur-md hover:bg-black/30 transition-colors",children:(0,t.jsx)(b.HiClock,{className:"w-6 h-6"})}),h&&(0,t.jsx)("button",{onClick:()=>{L("more_actions"),U(!0)},className:"cursor-pointer p-1.5 rounded-full bg-black/20 backdrop-blur-md hover:bg-black/30 transition-colors",children:(0,t.jsx)(b.HiEllipsisHorizontal,{className:"w-6 h-6"})})]})]}),(0,t.jsxs)("div",{className:"relative h-64 w-full z-0",children:[M?(0,t.jsx)(a.default,{src:(0,i.getProxyUrl)(M),alt:"Cover",fill:!0,className:"object-cover",priority:!0,sizes:"100vw"}):(0,t.jsx)("div",{className:"absolute inset-0 bg-blue-400"}),H&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 z-20 flex items-center justify-center backdrop-blur-sm",children:(0,t.jsx)("div",{className:"w-10 h-10 border-4 border-white/30 border-t-white rounded-full animate-spin"})}),h&&!H&&(0,t.jsxs)("label",{className:"absolute bottom-4 right-4 p-2 bg-black/30 backdrop-blur-md rounded-full text-white cursor-pointer hover:bg-black/40 transition-colors z-10",children:[(0,t.jsx)(b.HiCamera,{className:"w-5 h-5"}),(0,t.jsx)("input",{ref:D,type:"file",accept:"image/*",className:"hidden",onChange:e=>e.target.files?.[0]&&eo(e.target.files[0],"background")})]})]}),(0,t.jsxs)("div",{className:"relative px-4 flex flex-col items-center -mt-16 pointer-events-none",children:[(0,t.jsxs)("div",{className:"relative pointer-events-auto",children:[(0,t.jsx)("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 whitespace-nowrap bg-white text-gray-700 text-xs font-medium px-3 py-1.5 rounded-2xl shadow-lg border border-gray-100 after:content-[''] after:absolute after:top-full after:left-1/2 after:-translate-x-1/2 after:border-4 after:border-transparent after:border-t-white animate-bounce",children:"Trạng thái hiện tại"}),(0,t.jsxs)("div",{className:"w-32 h-32 rounded-full border-4 border-white shadow-md overflow-hidden relative bg-gray-200 z-10",children:[E&&!W?(0,t.jsx)(a.default,{src:(0,i.getProxyUrl)(E),alt:"Avatar",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 33vw",unoptimized:!0,onError:()=>Z(!0),onLoadingComplete:()=>Z(!1)}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-gray-500",children:(0,t.jsx)(b.HiUserCircle,{className:"w-20 h-20"})}),R&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 z-20 flex items-center justify-center backdrop-blur-sm",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-white/30 border-t-white rounded-full animate-spin"})}),h&&!R&&(0,t.jsxs)("label",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-pointer z-10",children:[(0,t.jsx)(b.HiCamera,{className:"w-8 h-8 text-white"}),(0,t.jsx)("input",{ref:$,type:"file",accept:"image/*",className:"hidden",onChange:e=>e.target.files?.[0]&&eo(e.target.files[0],"avatar")})]})]})]}),Q?(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-2 pointer-events-auto",children:[(0,t.jsx)("input",{value:Y,onChange:e=>V(e.target.value),className:"px-3 py-2 text-xl font-bold text-gray-900 border-b-2 border-blue-500 bg-transparent focus:outline-none",disabled:X,onKeyDown:e=>{"Enter"===e.key&&ec(Y),"Escape"===e.key&&q(!1)}}),(0,t.jsx)("button",{onClick:()=>ec(Y),disabled:X,className:`p-2 rounded-full ${X?"bg-green-100 text-green-500 opacity-70":"hover:bg-green-100 text-green-600"}`,title:"Lưu",children:X?(0,t.jsx)("span",{className:"w-5 h-5 inline-block border-2 border-green-600 border-t-transparent rounded-full animate-spin"}):(0,t.jsx)(b.HiCheck,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>ec(""),disabled:X,className:"p-2 rounded-full hover:bg-gray-100 text-gray-600",title:"Xóa biệt danh",children:(0,t.jsx)(b.HiArchiveBox,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>{q(!1),V(p)},disabled:X,className:"p-2 rounded-full hover:bg-red-100 text-red-500",title:"Hủy",children:(0,t.jsx)(x.HiX,{className:"w-5 h-5"})})]}):(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-2 pointer-events-auto",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:p}),!h&&(0,t.jsx)("button",{onClick:()=>{V(p),q(!0)},className:"p-2 rounded-full hover:bg-gray-100 text-gray-500",title:"Sửa biệt danh",children:(0,t.jsx)(b.HiPencilSquare,{className:"w-5 h-5"})})]}),(0,t.jsxs)("button",{onClick:()=>{L("edit_intro"),J(C||""),U(!0)},className:"cursor-pointer mt-1 flex items-center gap-1 text-blue-600 text-sm font-medium hover:underline pointer-events-auto",children:[(0,t.jsx)(b.HiPencilSquare,{className:"w-4 h-4"}),C||"Cập nhật giới thiệu bản thân"]}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-center gap-2 mt-4 w-full pointer-events-auto",children:[(m.title||N)&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,t.jsx)(b.HiBriefcase,{className:"w-3.5 h-3.5 text-purple-500"}),m.title||N]}),(m.department||j)&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,t.jsx)(b.HiBuildingOffice2,{className:"w-3.5 h-3.5 text-orange-500"}),eh]}),m.gender&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,t.jsx)(b.HiUserCircle,{className:"w-3.5 h-3.5 text-indigo-500"}),m.gender]}),m.birthday&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,t.jsx)(b.HiCalendar,{className:"w-3.5 h-3.5 text-pink-500"}),m.birthday]}),m.phone&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,t.jsx)(b.HiPhone,{className:"w-3.5 h-3.5 text-green-500"}),m.phone]}),m.email&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,t.jsx)(b.HiEnvelope,{className:"w-3.5 h-3.5 text-blue-500"}),(0,t.jsx)("span",{className:"truncate max-w-[150px]",children:m.email})]}),m.address&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,t.jsx)(b.HiMapPin,{className:"w-3.5 h-3.5 text-red-500"}),(0,t.jsx)("span",{className:"truncate max-w-[150px]",children:m.address})]})]})]}),(0,t.jsxs)("div",{className:"mt-6 mx-4 flex justify-start md:justify-center gap-3 overflow-x-auto custom-scrollbar pb-2 ",children:[(0,t.jsxs)("button",{className:" cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:(0,t.jsx)(b.HiSparkles,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"font-medium text-gray-700 text-sm",children:"Cài zStyle"})]}),(0,t.jsxs)("button",{className:"cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:(0,t.jsx)(b.HiPhoto,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"font-medium text-gray-700 text-sm",children:"Ảnh của tôi"})]}),(0,t.jsxs)("button",{className:"cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:(0,t.jsx)(b.HiArchiveBox,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"font-medium text-gray-700 text-sm",children:"Kho khoảnh..."})]}),(0,t.jsxs)("button",{onClick:()=>{L("info"),U(!0)},className:"cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center",children:(0,t.jsx)(b.HiInformationCircle,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"font-medium text-gray-700 text-sm",children:"Thông tin"})]}),(0,t.jsxs)("button",{onClick:()=>{L("qr"),U(!0)},className:"cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform mr-4",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center",children:(0,t.jsx)(b.HiQrCode,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"font-medium text-gray-700 text-sm",children:"Mã QR"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 text-center",children:[(0,t.jsx)("div",{className:"relative w-full max-w-[200px] mx-auto mb-4",children:(0,t.jsxs)("div",{className:"w-24 h-40 mx-auto bg-blue-50 rounded-2xl border-2 border-blue-100 flex items-center justify-center relative shadow-inner",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-white rounded-full shadow-sm flex items-center justify-center",children:(0,t.jsx)(b.HiUserCircle,{className:"w-10 h-10 text-gray-300"})}),(0,t.jsx)("div",{className:"absolute -top-2 -right-4 bg-green-500 p-1.5 rounded-lg",children:(0,t.jsx)(b.HiEllipsisHorizontal,{className:"w-4 h-4 text-white"})}),(0,t.jsx)("div",{className:"absolute top-10 -left-4 text-red-500",children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:(0,t.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})]})}),(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:["Hôm nay ",p," có gì vui?"]}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mb-6 max-w-xs mx-auto leading-relaxed",children:"Đây là Nhật ký của bạn - Hãy làm đầy Nhật ký với những dấu ấn cuộc đời và kỷ niệm đáng nhớ nhé!"}),(0,t.jsx)("button",{className:"cursor-pointer bg-blue-600 text-white font-semibold px-8 py-3 rounded-full shadow-lg shadow-blue-200 active:scale-95 transition-transform hover:bg-blue-700",children:"Đăng lên Nhật ký"})]}),(0,t.jsx)(T,{isOpen:O,onClose:()=>U(!1),title:"profile"===_?"Hồ sơ":"qr"===_?"Mã QR":"info"===_?"Thông tin":"edit_intro"===_?"Chỉnh sửa lời giới thiệu":"more_actions"===_?p:"general_settings"===_?"Cài đặt":"privacy"===_?"Quyền riêng tư":"account"===_?"Quản lý tài khoản":"Cài đặt",headerClassName:"more_actions"===_?"bg-blue-500 text-white border-blue-500":void 0,titleClassName:"more_actions"===_?"text-white":void 0,backButtonClassName:"more_actions"===_?"text-white hover:bg-blue-600 active:bg-blue-700":void 0,rightAction:"edit_intro"===_?(0,t.jsx)("button",{onClick:()=>{eu("bio",z),U(!1)},className:"text-blue-600 font-bold text-base",children:"Lưu"}):"general_settings"===_?(0,t.jsx)("button",{className:"text-gray-800",children:(0,t.jsx)(b.HiOutlineMagnifyingGlass,{className:"w-6 h-6"})}):void 0,children:"edit_intro"===_?(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("textarea",{className:"w-full h-32 text-lg text-gray-800 placeholder-gray-400 focus:outline-none resize-none bg-transparent",placeholder:"Thêm lời giới thiệu của bạn",maxLength:100,value:z,onChange:e=>J(e.target.value),autoFocus:!0}),(0,t.jsxs)("div",{className:"text-right text-gray-400 text-sm mt-2",children:[z.length,"/100"]}),(0,t.jsxs)("div",{className:"mt-6 flex items-center gap-3 cursor-pointer",onClick:()=>F(!K),children:[(0,t.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${K?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:K&&(0,t.jsx)(b.HiCheck,{className:"text-white w-4 h-4"})}),(0,t.jsx)("span",{className:"text-gray-600 font-medium",children:"Chia sẻ lên nhật ký"})]})]}):"more_actions"===_?(0,t.jsxs)("div",{className:"bg-gray-50 min-h-[50vh] pb-8",children:[(0,t.jsxs)("div",{className:"bg-white",children:[(0,t.jsx)("button",{onClick:()=>L("info"),className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100",children:"Thông tin"}),(0,t.jsx)("button",{onClick:()=>$.current?.click(),className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100",children:"Đổi ảnh đại diện"}),(0,t.jsx)("button",{onClick:()=>D.current?.click(),className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100",children:"Đổi ảnh bìa"}),(0,t.jsx)("button",{onClick:()=>{L("edit_intro"),J(C||"")},className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100",children:"Cập nhật giới thiệu bản thân"}),(0,t.jsx)("button",{onClick:()=>alert("Tính năng Ví của tôi đang được phát triển"),className:"w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 active:bg-gray-100",children:"Ví của tôi"})]}),(0,t.jsx)("div",{className:"h-2 bg-transparent"}),(0,t.jsxs)("div",{className:"bg-white",children:[(0,t.jsx)("div",{className:"px-4 py-3 text-blue-500 font-medium text-sm border-b border-gray-100",children:"Cài đặt"}),(0,t.jsx)("button",{onClick:()=>L("qr"),className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100",children:"Mã QR của tôi"}),(0,t.jsx)("button",{onClick:()=>L("privacy"),className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100",children:"Quyền riêng tư"}),(0,t.jsx)("button",{onClick:()=>L("settings"),className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 active:bg-gray-100",children:"Cài đặt chung"})]})]}):"privacy"===_?(0,t.jsx)("div",{className:"flex flex-col bg-gray-100 min-h-[80vh]",children:(0,t.jsxs)("div",{className:"bg-white mb-2 mt-2",children:[(0,t.jsxs)("button",{className:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0",children:[(0,t.jsx)("span",{className:"text-base text-gray-800",children:"Nhật ký"}),(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"Công khai"})]}),(0,t.jsxs)("button",{className:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0",children:[(0,t.jsx)("span",{className:"text-base text-gray-800",children:"Tin nhắn"}),(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"Mọi người"})]}),(0,t.jsxs)("button",{className:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0",children:[(0,t.jsx)("span",{className:"text-base text-gray-800",children:"Sinh nhật"}),(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"Bạn bè"})]})]})}):"account"===_?(0,t.jsx)("div",{className:"flex flex-col bg-gray-100 min-h-[80vh]",children:(0,t.jsxs)("div",{className:"bg-white mb-2 mt-2",children:[(0,t.jsxs)("button",{className:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0",children:[(0,t.jsx)("span",{className:"text-base text-gray-800",children:"Thông tin tài khoản"}),(0,t.jsx)(x.HiChevronRight,{className:"w-5 h-5 text-gray-400"})]}),(0,t.jsxs)("button",{className:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0",children:[(0,t.jsx)("span",{className:"text-base text-gray-800",children:"Đổi mật khẩu"}),(0,t.jsx)(x.HiChevronRight,{className:"w-5 h-5 text-gray-400"})]}),(0,t.jsxs)("button",{className:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0",children:[(0,t.jsx)("span",{className:"text-base text-red-500",children:"Xóa tài khoản"}),(0,t.jsx)(x.HiChevronRight,{className:"w-5 h-5 text-gray-400"})]})]})}):(0,t.jsx)(S,{tab:_,isOwner:!!h,overviewData:m,handleOverviewData:e=>{f(t=>({...t,...e})),void 0!==e.title&&v(String(e.title)),void 0!==e.bio&&k(String(e.bio)),void 0!==e.department&&w(String(e.department)),void 0!==e.name&&y(String(e.name))},profileIdForQr:A})})]}),(0,t.jsx)(l.default,{open:ee,src:er,onClose:()=>et(!1),onConfirm:ed,aspectRatio:"background"===ea?16/9:1,circle:"avatar"===ea,fileName:ei,outputType:"image/jpeg",quality:.92})]})}e.s(["default",()=>E],87735)}]);