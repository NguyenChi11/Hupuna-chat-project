{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/hooks/%28profile%29/useViewingUser.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, useCallback } from 'react';\r\n\r\nexport function useViewingUser(viewingId: string, isOwner: boolean, currentUser: Record<string, unknown> | null) {\r\n  const [viewingUserId, setViewingUserId] = useState('');\r\n  const [overviewData, setOverviewData] = useState({\r\n    phone: '',\r\n    gender: '',\r\n    birthday: '',\r\n    email: '',\r\n    address: '',\r\n    department: '',\r\n    title: '',\r\n    bio: '',\r\n  });\r\n\r\n  const [displayName, setDisplayName] = useState('');\r\n  const [displayDept, setDisplayDept] = useState('');\r\n  const [displayTitle, setDisplayTitle] = useState('');\r\n  const [displayBio, setDisplayBio] = useState('');\r\n  const [avatar, setAvatar] = useState<string | undefined>(undefined);\r\n  const [background, setBackground] = useState<string | undefined>(undefined);\r\n\r\n  const fillFrom = useCallback(\r\n    (u: Record<string, unknown> | null) => {\r\n      if (!u) return;\r\n      setViewingUserId(String(u['_id'] || ''));\r\n      const myId = String((currentUser as Record<string, unknown> | null)?.['_id'] || '');\r\n      const nickMap = (u['nicknames'] as Record<string, unknown> | undefined) || undefined;\r\n      const nick = !isOwner && myId && nickMap ? String((nickMap[myId] as unknown) || '').trim() : '';\r\n      const baseName = String(u['name'] || u['username'] || '');\r\n      setDisplayName(nick || baseName);\r\n      setDisplayDept(String(u['department'] || ''));\r\n      setDisplayTitle(String(u['title'] || ''));\r\n      setDisplayBio(String(u['bio'] || ''));\r\n      setAvatar(typeof u['avatar'] === 'string' ? (u['avatar'] as string) : undefined);\r\n      setBackground(typeof u['background'] === 'string' ? (u['background'] as string) : undefined);\r\n\r\n      setOverviewData({\r\n        phone: String(u['phone'] || ''),\r\n        gender: String(u['gender'] || ''),\r\n        birthday: String(u['birthday'] || ''),\r\n        email: String(u['email'] || ''),\r\n        address: String(u['address'] || ''),\r\n        department: String(u['department'] || ''),\r\n        title: String(u['title'] || ''),\r\n        bio: String(u['bio'] || ''),\r\n      });\r\n    },\r\n    [isOwner, currentUser],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (isOwner) {\r\n      fillFrom(currentUser);\r\n      return;\r\n    }\r\n\r\n    const fetchViewingUser = async () => {\r\n      try {\r\n        const res = await fetch('/api/users', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ action: 'getById', _id: viewingId }),\r\n        });\r\n\r\n        const json = await res.json();\r\n        const dataArr = Array.isArray(json?.data) ? (json.data as Record<string, unknown>[]) : undefined;\r\n\r\n        const userRow = json?.row || dataArr?.[0] || json?.user || json;\r\n\r\n        fillFrom(userRow || null);\r\n      } catch {}\r\n    };\r\n\r\n    if (viewingId) void fetchViewingUser();\r\n  }, [isOwner, viewingId, currentUser, fillFrom]);\r\n\r\n  return {\r\n    viewingUserId,\r\n    overviewData,\r\n    displayName,\r\n    setDisplayName,\r\n    displayDept,\r\n    setDisplayDept,\r\n    displayTitle,\r\n    setDisplayTitle,\r\n    displayBio,\r\n    setDisplayBio,\r\n    avatar,\r\n    background,\r\n    setAvatar,\r\n    setBackground,\r\n    setOverviewData,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAIO,SAAS,eAAe,SAAiB,EAAE,OAAgB,EAAE,WAA2C;;IAC7G,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;QAC/C,OAAO;QACP,QAAQ;QACR,UAAU;QACV,OAAO;QACP,SAAS;QACT,YAAY;QACZ,OAAO;QACP,KAAK;IACP;IAEA,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAqB;IACzD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAqB;IAEjE,MAAM,WAAW,IAAA,4KAAW;gDAC1B,CAAC;YACC,IAAI,CAAC,GAAG;YACR,iBAAiB,OAAO,CAAC,CAAC,MAAM,IAAI;YACpC,MAAM,OAAO,OAAO,AAAC,aAAgD,CAAC,MAAM,IAAI;YAChF,MAAM,UAAU,AAAC,CAAC,CAAC,YAAY,IAA4C;YAC3E,MAAM,OAAO,CAAC,WAAW,QAAQ,UAAU,OAAO,AAAC,OAAO,CAAC,KAAK,IAAgB,IAAI,IAAI,KAAK;YAC7F,MAAM,WAAW,OAAO,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW,IAAI;YACtD,eAAe,QAAQ;YACvB,eAAe,OAAO,CAAC,CAAC,aAAa,IAAI;YACzC,gBAAgB,OAAO,CAAC,CAAC,QAAQ,IAAI;YACrC,cAAc,OAAO,CAAC,CAAC,MAAM,IAAI;YACjC,UAAU,OAAO,CAAC,CAAC,SAAS,KAAK,WAAY,CAAC,CAAC,SAAS,GAAc;YACtE,cAAc,OAAO,CAAC,CAAC,aAAa,KAAK,WAAY,CAAC,CAAC,aAAa,GAAc;YAElF,gBAAgB;gBACd,OAAO,OAAO,CAAC,CAAC,QAAQ,IAAI;gBAC5B,QAAQ,OAAO,CAAC,CAAC,SAAS,IAAI;gBAC9B,UAAU,OAAO,CAAC,CAAC,WAAW,IAAI;gBAClC,OAAO,OAAO,CAAC,CAAC,QAAQ,IAAI;gBAC5B,SAAS,OAAO,CAAC,CAAC,UAAU,IAAI;gBAChC,YAAY,OAAO,CAAC,CAAC,aAAa,IAAI;gBACtC,OAAO,OAAO,CAAC,CAAC,QAAQ,IAAI;gBAC5B,KAAK,OAAO,CAAC,CAAC,MAAM,IAAI;YAC1B;QACF;+CACA;QAAC;QAAS;KAAY;IAGxB,IAAA,0KAAS;oCAAC;YACR,IAAI,SAAS;gBACX,SAAS;gBACT;YACF;YAEA,MAAM;6DAAmB;oBACvB,IAAI;wBACF,MAAM,MAAM,MAAM,MAAM,cAAc;4BACpC,QAAQ;4BACR,SAAS;gCAAE,gBAAgB;4BAAmB;4BAC9C,MAAM,KAAK,SAAS,CAAC;gCAAE,QAAQ;gCAAW,KAAK;4BAAU;wBAC3D;wBAEA,MAAM,OAAO,MAAM,IAAI,IAAI;wBAC3B,MAAM,UAAU,MAAM,OAAO,CAAC,MAAM,QAAS,KAAK,IAAI,GAAiC;wBAEvF,MAAM,UAAU,MAAM,OAAO,SAAS,CAAC,EAAE,IAAI,MAAM,QAAQ;wBAE3D,SAAS,WAAW;oBACtB,EAAE,OAAM,CAAC;gBACX;;YAEA,IAAI,WAAW,KAAK;QACtB;mCAAG;QAAC;QAAS;QAAW;QAAa;KAAS;IAE9C,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF;GA5FgB"}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/hooks/%28profile%29/useUploadImage.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\n\r\nexport function useUploadImage(\r\n  currentId: string,\r\n  isOwner: boolean,\r\n  setAvatar: (url: string) => void,\r\n  setBackground: (url: string) => void,\r\n) {\r\n  const [isUploadingAvatar, setIsUploadingAvatar] = useState(false);\r\n  const [isUploadingBackground, setIsUploadingBackground] = useState(false);\r\n\r\n  const handleUpload = async (file: File, kind: 'avatar' | 'background') => {\r\n    if (!isOwner || !currentId) return;\r\n    if (!file.type.startsWith('image/')) return;\r\n\r\n    // Tăng giới hạn lên 1GB hoặc bỏ qua check\r\n    const MAX = 1024 * 1024 * 1024; // 1GB\r\n    if (file.size > MAX) return;\r\n\r\n    if (kind === 'avatar') setIsUploadingAvatar(true);\r\n    else setIsUploadingBackground(true);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      formData.append('roomId', kind);\r\n      formData.append('sender', currentId);\r\n      formData.append('receiver', '');\r\n      formData.append('type', 'image');\r\n      formData.append('folderName', kind === 'avatar' ? 'Avatars' : 'Backgrounds');\r\n\r\n      const uploadRes = await fetch(`/api/upload?uploadId=${kind}_${currentId}`, {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n\r\n      const uploadJson = await uploadRes.json();\r\n      if (!uploadJson.success || !uploadJson.link) return;\r\n\r\n      const newUrl = uploadJson.link as string;\r\n\r\n      const updateRes = await fetch('/api/users', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          action: 'update',\r\n          field: '_id',\r\n          value: currentId,\r\n          data: { [kind]: newUrl },\r\n        }),\r\n      });\r\n\r\n      const json = await updateRes.json();\r\n      if (json.error) return;\r\n\r\n      if (kind === 'avatar') setAvatar(newUrl);\r\n      else setBackground(newUrl);\r\n\r\n      // update localStorage\r\n      try {\r\n        const raw = localStorage.getItem('info_user');\r\n        if (raw) {\r\n          const parsed = JSON.parse(raw);\r\n          localStorage.setItem('info_user', JSON.stringify({ ...parsed, [kind]: newUrl }));\r\n        }\r\n      } catch {}\r\n    } finally {\r\n      if (kind === 'avatar') setIsUploadingAvatar(false);\r\n      else setIsUploadingBackground(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    handleUpload,\r\n    isUploadingAvatar,\r\n    isUploadingBackground,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAIO,SAAS,eACd,SAAiB,EACjB,OAAgB,EAChB,SAAgC,EAChC,aAAoC;;IAEpC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAC3D,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,yKAAQ,EAAC;IAEnE,MAAM,eAAe,OAAO,MAAY;QACtC,IAAI,CAAC,WAAW,CAAC,WAAW;QAC5B,IAAI,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,WAAW;QAErC,0CAA0C;QAC1C,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM;QACtC,IAAI,KAAK,IAAI,GAAG,KAAK;QAErB,IAAI,SAAS,UAAU,qBAAqB;aACvC,yBAAyB;QAE9B,IAAI;YACF,MAAM,WAAW,IAAI;YACrB,SAAS,MAAM,CAAC,QAAQ;YACxB,SAAS,MAAM,CAAC,UAAU;YAC1B,SAAS,MAAM,CAAC,UAAU;YAC1B,SAAS,MAAM,CAAC,YAAY;YAC5B,SAAS,MAAM,CAAC,QAAQ;YACxB,SAAS,MAAM,CAAC,cAAc,SAAS,WAAW,YAAY;YAE9D,MAAM,YAAY,MAAM,MAAM,CAAC,qBAAqB,EAAE,KAAK,CAAC,EAAE,WAAW,EAAE;gBACzE,QAAQ;gBACR,MAAM;YACR;YAEA,MAAM,aAAa,MAAM,UAAU,IAAI;YACvC,IAAI,CAAC,WAAW,OAAO,IAAI,CAAC,WAAW,IAAI,EAAE;YAE7C,MAAM,SAAS,WAAW,IAAI;YAE9B,MAAM,YAAY,MAAM,MAAM,cAAc;gBAC1C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,QAAQ;oBACR,OAAO;oBACP,OAAO;oBACP,MAAM;wBAAE,CAAC,KAAK,EAAE;oBAAO;gBACzB;YACF;YAEA,MAAM,OAAO,MAAM,UAAU,IAAI;YACjC,IAAI,KAAK,KAAK,EAAE;YAEhB,IAAI,SAAS,UAAU,UAAU;iBAC5B,cAAc;YAEnB,sBAAsB;YACtB,IAAI;gBACF,MAAM,MAAM,aAAa,OAAO,CAAC;gBACjC,IAAI,KAAK;oBACP,MAAM,SAAS,KAAK,KAAK,CAAC;oBAC1B,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;wBAAE,GAAG,MAAM;wBAAE,CAAC,KAAK,EAAE;oBAAO;gBAC/E;YACF,EAAE,OAAM,CAAC;QACX,SAAU;YACR,IAAI,SAAS,UAAU,qBAAqB;iBACvC,yBAAyB;QAChC;IACF;IAEA,OAAO;QACL;QACA;QACA;IACF;AACF;GA3EgB"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/hooks/%28profile%29/useCurrentUser.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useMemo } from 'react';\r\n\r\nexport function useCurrentUser() {\r\n  const currentUser = useMemo(() => {\r\n    try {\r\n      const raw = typeof window !== 'undefined' ? localStorage.getItem('info_user') : null;\r\n      return raw ? (JSON.parse(raw) as Record<string, unknown>) : null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  }, []);\r\n\r\n  const currentId = useMemo(() => {\r\n    return String(currentUser?.['_id'] || (currentUser?.['username'] as string) || '');\r\n  }, [currentUser]);\r\n\r\n  return { currentUser, currentId };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAIO,SAAS;;IACd,MAAM,cAAc,IAAA,wKAAO;+CAAC;YAC1B,IAAI;gBACF,MAAM,MAAM,uCAAgC,aAAa,OAAO,CAAC,eAAe;gBAChF,OAAO,MAAO,KAAK,KAAK,CAAC,OAAmC;YAC9D,EAAE,OAAM;gBACN,OAAO;YACT;QACF;8CAAG,EAAE;IAEL,MAAM,YAAY,IAAA,wKAAO;6CAAC;YACxB,OAAO,OAAO,aAAa,CAAC,MAAM,IAAK,aAAa,CAAC,WAAW,IAAe;QACjF;4CAAG;QAAC;KAAY;IAEhB,OAAO;QAAE;QAAa;IAAU;AAClC;GAfgB"}},
    {"offset": {"line": 243, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28profile%29/PorfileQR.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useMemo, useState } from 'react';\nimport QRCode from 'qrcode';\nimport Image from 'next/image';\n\nfunction ProfileQR({ profilePath }: { profilePath: string }) {\n  const [dataUrl, setDataUrl] = useState<string>('');\n\n  const qrValue = useMemo(() => {\n    if (!profilePath) return '';\n    if (typeof window === 'undefined') return '';\n    const origin = window.location.origin;\n    const path = profilePath.startsWith('/') ? profilePath : `/${profilePath}`;\n    return `${origin}${path}`;\n  }, [profilePath]);\n\n  useEffect(() => {\n    let cancelled = false;\n    if (!qrValue) {\n      setDataUrl('');\n      return;\n    }\n    QRCode.toDataURL(qrValue, { errorCorrectionLevel: 'M', margin: 1, width: 320 })\n      .then((url: string) => {\n        if (!cancelled) setDataUrl(url);\n      })\n      .catch(() => {\n        if (!cancelled) setDataUrl('');\n      });\n    return () => {\n      cancelled = true;\n    };\n  }, [qrValue]);\n\n  return (\n    <div className=\"flex flex-col items-center space-y-3\">\n      <div className=\"w-40 h-40 bg-white rounded-lg flex items-center justify-center border border-gray-200\">\n        {dataUrl ? (\n          <Image width={320} height={320} src={dataUrl} alt=\"Mã QR hồ sơ\" className=\"w-full h-full rounded-lg\" />\n        ) : (\n          <span className=\"text-gray-400 text-sm\">Đang tạo QR…</span>\n        )}\n      </div>\n      <p className=\"text-sm text-gray-500 text-center md:text-base\">\n        Mã QR để người khác kết bạn hoặc xem hồ sơ của bạn.\n      </p>\n    </div>\n  );\n}\nexport default ProfileQR;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMA,SAAS,UAAU,EAAE,WAAW,EAA2B;;IACzD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAS;IAE/C,MAAM,UAAU,IAAA,wKAAO;sCAAC;YACtB,IAAI,CAAC,aAAa,OAAO;YACzB;;YACA,MAAM,SAAS,OAAO,QAAQ,CAAC,MAAM;YACrC,MAAM,OAAO,YAAY,UAAU,CAAC,OAAO,cAAc,CAAC,CAAC,EAAE,aAAa;YAC1E,OAAO,GAAG,SAAS,MAAM;QAC3B;qCAAG;QAAC;KAAY;IAEhB,IAAA,0KAAS;+BAAC;YACR,IAAI,YAAY;YAChB,IAAI,CAAC,SAAS;gBACZ,WAAW;gBACX;YACF;YACA,sJAAM,CAAC,SAAS,CAAC,SAAS;gBAAE,sBAAsB;gBAAK,QAAQ;gBAAG,OAAO;YAAI,GAC1E,IAAI;uCAAC,CAAC;oBACL,IAAI,CAAC,WAAW,WAAW;gBAC7B;sCACC,KAAK;uCAAC;oBACL,IAAI,CAAC,WAAW,WAAW;gBAC7B;;YACF;uCAAO;oBACL,YAAY;gBACd;;QACF;8BAAG;QAAC;KAAQ;IAEZ,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACZ,wBACC,6LAAC,2IAAK;oBAAC,OAAO;oBAAK,QAAQ;oBAAK,KAAK;oBAAS,KAAI;oBAAc,WAAU;;;;;yCAE1E,6LAAC;oBAAK,WAAU;8BAAwB;;;;;;;;;;;0BAG5C,6LAAC;gBAAE,WAAU;0BAAiD;;;;;;;;;;;;AAKpE;GA3CS;KAAA;uCA4CM"}},
    {"offset": {"line": 356, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28profile%29/profile-setting/PasswordChange.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { useToast } from \"@/components/base/toast\";\r\n\r\nexport default function PasswordChange() {\r\n  const toast = useToast();\r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async () => {\r\n    if (!newPassword || newPassword !== confirmPassword) {\r\n      toast({ type: \"error\", message: \"Mật khẩu xác nhận không khớp\" });\r\n      return;\r\n    }\r\n    try {\r\n      setLoading(true);\r\n      const raw = typeof window !== \"undefined\" ? localStorage.getItem(\"info_user\") : null;\r\n      const u = raw ? JSON.parse(raw) : null;\r\n      const userId = String(u?.[\"_id\"] || \"\");\r\n      const res = await fetch(\"/api/users\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ action: \"changePassword\", data: { userId, currentPassword, newPassword } }),\r\n      });\r\n      const json = await res.json();\r\n      if (!res.ok || !json.success) {\r\n        toast({ type: \"error\", message: json.message || \"Đổi mật khẩu thất bại\" });\r\n        return;\r\n      }\r\n      toast({ type: \"success\", message: \"Đổi mật khẩu thành công\" });\r\n      setCurrentPassword(\"\");\r\n      setNewPassword(\"\");\r\n      setConfirmPassword(\"\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <input\r\n        type=\"password\"\r\n        placeholder=\"Mật khẩu hiện tại\"\r\n        value={currentPassword}\r\n        onChange={(e) => setCurrentPassword(e.target.value)}\r\n        className=\"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800\"\r\n      />\r\n      <input\r\n        type=\"password\"\r\n        placeholder=\"Mật khẩu mới\"\r\n        value={newPassword}\r\n        onChange={(e) => setNewPassword(e.target.value)}\r\n        className=\"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800\"\r\n      />\r\n      <input\r\n        type=\"password\"\r\n        placeholder=\"Xác nhận mật khẩu mới\"\r\n        value={confirmPassword}\r\n        onChange={(e) => setConfirmPassword(e.target.value)}\r\n        className=\"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800\"\r\n      />\r\n      <button\r\n        onClick={handleSubmit}\r\n        disabled={loading}\r\n        className=\"cursor-pointer w-full px-4 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 disabled:opacity-70\"\r\n      >\r\n        {loading ? \"Đang đổi...\" : \"Đổi mật khẩu\"}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,QAAQ,IAAA,kJAAQ;IACtB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,MAAM,eAAe;QACnB,IAAI,CAAC,eAAe,gBAAgB,iBAAiB;YACnD,MAAM;gBAAE,MAAM;gBAAS,SAAS;YAA+B;YAC/D;QACF;QACA,IAAI;YACF,WAAW;YACX,MAAM,MAAM,uCAAgC,aAAa,OAAO,CAAC,eAAe;YAChF,MAAM,IAAI,MAAM,KAAK,KAAK,CAAC,OAAO;YAClC,MAAM,SAAS,OAAO,GAAG,CAAC,MAAM,IAAI;YACpC,MAAM,MAAM,MAAM,MAAM,cAAc;gBACpC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,QAAQ;oBAAkB,MAAM;wBAAE;wBAAQ;wBAAiB;oBAAY;gBAAE;YAClG;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,OAAO,EAAE;gBAC5B,MAAM;oBAAE,MAAM;oBAAS,SAAS,KAAK,OAAO,IAAI;gBAAwB;gBACxE;YACF;YACA,MAAM;gBAAE,MAAM;gBAAW,SAAS;YAA0B;YAC5D,mBAAmB;YACnB,eAAe;YACf,mBAAmB;QACrB,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;gBAClD,WAAU;;;;;;0BAEZ,6LAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gBAC9C,WAAU;;;;;;0BAEZ,6LAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;gBAClD,WAAU;;;;;;0BAEZ,6LAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAU;0BAET,UAAU,gBAAgB;;;;;;;;;;;;AAInC;GApEwB;;QACR,kJAAQ;;;KADA"}},
    {"offset": {"line": 489, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28profile%29/profile-setting/PrivacySettings.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useToast } from \"@/components/base/toast\";\r\n\r\ninterface PrivacyState {\r\n  showOnline: boolean;\r\n  allowFriendRequests: boolean;\r\n  allowTagging: boolean;\r\n}\r\n\r\nexport default function PrivacySettings() {\r\n  const toast = useToast();\r\n  const [state, setState] = useState<PrivacyState>({ showOnline: true, allowFriendRequests: true, allowTagging: true });\r\n  const [loadingKey, setLoadingKey] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const raw = typeof window !== \"undefined\" ? localStorage.getItem(\"info_user\") : null;\r\n      const u = raw ? JSON.parse(raw) : null;\r\n      const prev = (u?.[\"privacy\"] as PrivacyState) || null;\r\n      if (prev) setState(prev);\r\n    } catch {}\r\n  }, []);\r\n\r\n  const update = async (next: PrivacyState, key: keyof PrivacyState) => {\r\n    try {\r\n      setLoadingKey(String(key));\r\n      const raw = typeof window !== \"undefined\" ? localStorage.getItem(\"info_user\") : null;\r\n      const u = raw ? JSON.parse(raw) : null;\r\n      const userId = String(u?.[\"_id\"] || \"\");\r\n      const res = await fetch(\"/api/users\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ action: \"update\", field: \"_id\", value: userId, data: { privacy: next } }),\r\n      });\r\n      const json = await res.json();\r\n      if (!res.ok || json.error) {\r\n        toast({ type: \"error\", message: \"Cập nhật thất bại\" });\r\n        return;\r\n      }\r\n      try {\r\n        const raw2 = localStorage.getItem(\"info_user\");\r\n        const u2 = raw2 ? JSON.parse(raw2) : null;\r\n        if (u2) localStorage.setItem(\"info_user\", JSON.stringify({ ...u2, privacy: next }));\r\n      } catch {}\r\n      setState(next);\r\n      toast({ type: \"success\", message: \"Đã lưu\" });\r\n    } finally {\r\n      setLoadingKey(null);\r\n    }\r\n  };\r\n\r\n  const toggle = (key: keyof PrivacyState) => {\r\n    const next = { ...state, [key]: !state[key] } as PrivacyState;\r\n    void update(next, key);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl\">\r\n        <span className=\"text-gray-800 font-medium\">Hiển thị trạng thái online</span>\r\n        <button\r\n          onClick={() => toggle(\"showOnline\")}\r\n          className={`px-3 py-1 rounded-lg text-sm ${state.showOnline ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`}\r\n        >\r\n          {loadingKey === \"showOnline\" ? \"...\" : state.showOnline ? \"Bật\" : \"Tắt\"}\r\n        </button>\r\n      </div>\r\n      <div className=\"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl\">\r\n        <span className=\"text-gray-800 font-medium\">Cho phép lời mời kết bạn</span>\r\n        <button\r\n          onClick={() => toggle(\"allowFriendRequests\")}\r\n          className={`px-3 py-1 rounded-lg text-sm ${state.allowFriendRequests ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`}\r\n        >\r\n          {loadingKey === \"allowFriendRequests\" ? \"...\" : state.allowFriendRequests ? \"Bật\" : \"Tắt\"}\r\n        </button>\r\n      </div>\r\n      <div className=\"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl\">\r\n        <span className=\"text-gray-800 font-medium\">Cho phép gắn thẻ @</span>\r\n        <button\r\n          onClick={() => toggle(\"allowTagging\")}\r\n          className={`px-3 py-1 rounded-lg text-sm ${state.allowTagging ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`}\r\n        >\r\n          {loadingKey === \"allowTagging\" ? \"...\" : state.allowTagging ? \"Bật\" : \"Tắt\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAWe,SAAS;;IACtB,MAAM,QAAQ,IAAA,kJAAQ;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAe;QAAE,YAAY;QAAM,qBAAqB;QAAM,cAAc;IAAK;IACnH,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAgB;IAE5D,IAAA,0KAAS;qCAAC;YACR,IAAI;gBACF,MAAM,MAAM,uCAAgC,aAAa,OAAO,CAAC,eAAe;gBAChF,MAAM,IAAI,MAAM,KAAK,KAAK,CAAC,OAAO;gBAClC,MAAM,OAAO,AAAC,GAAG,CAAC,UAAU,IAAqB;gBACjD,IAAI,MAAM,SAAS;YACrB,EAAE,OAAM,CAAC;QACX;oCAAG,EAAE;IAEL,MAAM,SAAS,OAAO,MAAoB;QACxC,IAAI;YACF,cAAc,OAAO;YACrB,MAAM,MAAM,uCAAgC,aAAa,OAAO,CAAC,eAAe;YAChF,MAAM,IAAI,MAAM,KAAK,KAAK,CAAC,OAAO;YAClC,MAAM,SAAS,OAAO,GAAG,CAAC,MAAM,IAAI;YACpC,MAAM,MAAM,MAAM,MAAM,cAAc;gBACpC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,QAAQ;oBAAU,OAAO;oBAAO,OAAO;oBAAQ,MAAM;wBAAE,SAAS;oBAAK;gBAAE;YAChG;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,IAAI,KAAK,KAAK,EAAE;gBACzB,MAAM;oBAAE,MAAM;oBAAS,SAAS;gBAAoB;gBACpD;YACF;YACA,IAAI;gBACF,MAAM,OAAO,aAAa,OAAO,CAAC;gBAClC,MAAM,KAAK,OAAO,KAAK,KAAK,CAAC,QAAQ;gBACrC,IAAI,IAAI,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;oBAAE,GAAG,EAAE;oBAAE,SAAS;gBAAK;YAClF,EAAE,OAAM,CAAC;YACT,SAAS;YACT,MAAM;gBAAE,MAAM;gBAAW,SAAS;YAAS;QAC7C,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,SAAS,CAAC;QACd,MAAM,OAAO;YAAE,GAAG,KAAK;YAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,IAAI;QAAC;QAC5C,KAAK,OAAO,MAAM;IACpB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAK,WAAU;kCAA4B;;;;;;kCAC5C,6LAAC;wBACC,SAAS,IAAM,OAAO;wBACtB,WAAW,CAAC,6BAA6B,EAAE,MAAM,UAAU,GAAG,6BAA6B,6BAA6B;kCAEvH,eAAe,eAAe,QAAQ,MAAM,UAAU,GAAG,QAAQ;;;;;;;;;;;;0BAGtE,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAK,WAAU;kCAA4B;;;;;;kCAC5C,6LAAC;wBACC,SAAS,IAAM,OAAO;wBACtB,WAAW,CAAC,6BAA6B,EAAE,MAAM,mBAAmB,GAAG,6BAA6B,6BAA6B;kCAEhI,eAAe,wBAAwB,QAAQ,MAAM,mBAAmB,GAAG,QAAQ;;;;;;;;;;;;0BAGxF,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAK,WAAU;kCAA4B;;;;;;kCAC5C,6LAAC;wBACC,SAAS,IAAM,OAAO;wBACtB,WAAW,CAAC,6BAA6B,EAAE,MAAM,YAAY,GAAG,6BAA6B,6BAA6B;kCAEzH,eAAe,iBAAiB,QAAQ,MAAM,YAAY,GAAG,QAAQ;;;;;;;;;;;;;;;;;;AAKhF;GA9EwB;;QACR,kJAAQ;;;KADA"}},
    {"offset": {"line": 675, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28profile%29/profile-setting/NotificationSettings.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useToast } from \"@/components/base/toast\";\r\nimport { useChatNotifications } from \"@/hooks/useChatNotifications\";\r\n\r\ninterface NotiState {\r\n  soundEnabled: boolean;\r\n  desktopAlerts: boolean;\r\n  showPreview: boolean;\r\n}\r\n\r\nexport default function NotificationSettings() {\r\n  const toast = useToast();\r\n  const [state, setState] = useState<NotiState>({ soundEnabled: true, desktopAlerts: true, showPreview: true });\r\n  const [loadingKey, setLoadingKey] = useState<string | null>(null);\r\n  const { playMessageSound } = useChatNotifications({});\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const raw = typeof window !== \"undefined\" ? localStorage.getItem(\"info_user\") : null;\r\n      const u = raw ? JSON.parse(raw) : null;\r\n      const prev = (u?.[\"notifications\"] as NotiState) || null;\r\n      if (prev) setState(prev);\r\n    } catch {}\r\n  }, []);\r\n\r\n  const update = async (next: NotiState, key: keyof NotiState) => {\r\n    try {\r\n      setLoadingKey(String(key));\r\n      const raw = typeof window !== \"undefined\" ? localStorage.getItem(\"info_user\") : null;\r\n      const u = raw ? JSON.parse(raw) : null;\r\n      const userId = String(u?.[\"_id\"] || \"\");\r\n      const res = await fetch(\"/api/users\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ action: \"update\", field: \"_id\", value: userId, data: { notifications: next } }),\r\n      });\r\n      const json = await res.json();\r\n      if (!res.ok || json.error) {\r\n        toast({ type: \"error\", message: \"Cập nhật thất bại\" });\r\n        return;\r\n      }\r\n      try {\r\n        const raw2 = localStorage.getItem(\"info_user\");\r\n        const u2 = raw2 ? JSON.parse(raw2) : null;\r\n        if (u2) localStorage.setItem(\"info_user\", JSON.stringify({ ...u2, notifications: next }));\r\n      } catch {}\r\n      setState(next);\r\n      toast({ type: \"success\", message: \"Đã lưu\" });\r\n    } finally {\r\n      setLoadingKey(null);\r\n    }\r\n  };\r\n\r\n  const toggle = (key: keyof NotiState) => {\r\n    const next = { ...state, [key]: !state[key] } as NotiState;\r\n    void update(next, key);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl\">\r\n        <span className=\"text-gray-800 font-medium\">Âm thanh thông báo</span>\r\n        <button\r\n          onClick={() => toggle(\"soundEnabled\")}\r\n          className={`px-3 py-1 rounded-lg text-sm ${state.soundEnabled ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`}\r\n        >\r\n          {loadingKey === \"soundEnabled\" ? \"...\" : state.soundEnabled ? \"Bật\" : \"Tắt\"}\r\n        </button>\r\n      </div>\r\n      <div className=\"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl\">\r\n        <span className=\"text-gray-800 font-medium\">Thử âm thanh</span>\r\n        <button\r\n          onClick={() => {\r\n            if (!state.soundEnabled) {\r\n              toast({ type: \"info\", message: \"Âm thanh đang tắt\" });\r\n              return;\r\n            }\r\n            playMessageSound();\r\n          }}\r\n          className=\"px-3 py-1 rounded-lg text-sm bg-indigo-600 text-white\"\r\n        >\r\n          Phát “ting”\r\n        </button>\r\n      </div>\r\n      <div className=\"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl\">\r\n        <span className=\"text-gray-800 font-medium\">Hiện banner desktop</span>\r\n        <button\r\n          onClick={() => toggle(\"desktopAlerts\")}\r\n          className={`px-3 py-1 rounded-lg text-sm ${state.desktopAlerts ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`}\r\n        >\r\n          {loadingKey === \"desktopAlerts\" ? \"...\" : state.desktopAlerts ? \"Bật\" : \"Tắt\"}\r\n        </button>\r\n      </div>\r\n      <div className=\"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl\">\r\n        <span className=\"text-gray-800 font-medium\">Hiển thị preview nội dung</span>\r\n        <button\r\n          onClick={() => toggle(\"showPreview\")}\r\n          className={`px-3 py-1 rounded-lg text-sm ${state.showPreview ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`}\r\n        >\r\n          {loadingKey === \"showPreview\" ? \"...\" : state.showPreview ? \"Bật\" : \"Tắt\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 900, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28profile%29/ProfileSettings.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport PasswordChange from '@/components/(profile)/profile-setting/PasswordChange';\r\nimport PrivacySettings from '@/components/(profile)/profile-setting/PrivacySettings';\r\nimport NotificationSettings from '@/components/(profile)/profile-setting/NotificationSettings';\r\nimport { HiOutlineLogout } from 'react-icons/hi';\r\n\r\nfunction ProfileSettings() {\r\n  const [open, setOpen] = useState<null | 'password' | 'privacy' | 'notifications'>(null);\r\n  const router = useRouter();\r\n\r\n  const items: Array<{ key: 'password' | 'privacy' | 'notifications'; label: string }> = [\r\n    { key: 'password', label: 'Đổi mật khẩu' },\r\n    { key: 'privacy', label: 'Quyền riêng tư' },\r\n    { key: 'notifications', label: 'Cài đặt thông báo' },\r\n  ];\r\n\r\n  const titleMap: Record<NonNullable<typeof open>, string> = {\r\n    password: 'Đổi mật khẩu',\r\n    privacy: 'Quyền riêng tư',\r\n    notifications: 'Cài đặt thông báo',\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await fetch('/api/users', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ action: 'logout' }),\r\n      });\r\n    } catch {}\r\n    try {\r\n      localStorage.removeItem('info_user');\r\n      localStorage.removeItem('remember_login');\r\n    } catch {}\r\n    router.push('/login');\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {items.map((item) => (\r\n        <button\r\n          key={item.key}\r\n          onClick={() => setOpen(item.key)}\r\n          className=\"cursor-pointer w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 rounded-lg md:text-lg\"\r\n        >\r\n          {item.label}\r\n        </button>\r\n      ))}\r\n      <button\r\n        onClick={handleLogout}\r\n        className=\"cursor-pointer w-full px-4 py-3 text-left bg-red-50 hover:bg-red-100 rounded-lg md:text-lg text-red-600 inline-flex items-center gap-2\"\r\n      >\r\n        <HiOutlineLogout className=\"w-5 h-5\" /> Đăng xuất\r\n      </button>\r\n\r\n      {open && (\r\n        <div className=\"fixed inset-0 z-[9999]\">\r\n          <div className=\"absolute inset-0 bg-black/40 h-[110%]\" onClick={() => setOpen(null)} />\r\n\r\n          <div className=\"hidden md:flex absolute inset-0 items-center justify-center p-4\">\r\n            <div className=\"w-full max-w-md bg-white rounded-2xl shadow-2xl overflow-hidden\">\r\n              <div className=\"flex items-center justify-between px-4 py-3 border-b-gray-300\">\r\n                <span className=\"font-semibold text-gray-800\">{titleMap[open]}</span>\r\n                <button\r\n                  onClick={() => setOpen(null)}\r\n                  className=\"cursor-pointer px-3 py-1 text-sm font-medium rounded-lg bg-gray-100 hover:bg-gray-200\"\r\n                >\r\n                  Đóng\r\n                </button>\r\n              </div>\r\n              <div className=\"p-4\">\r\n                {open === 'password' && <PasswordChange />}\r\n                {open === 'privacy' && <PrivacySettings />}\r\n                {open === 'notifications' && <NotificationSettings />}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"md:hidden absolute inset-x-0 bottom-0 p-5\">\r\n            <div className=\"bg-white rounded-t-2xl shadow-2xl overflow-hidden\">\r\n              <div className=\"flex items-center justify-between px-4 py-3 border-b-gray-300 border-b\">\r\n                <span className=\"font-semibold text-gray-800\">{titleMap[open]}</span>\r\n                <button\r\n                  onClick={() => setOpen(null)}\r\n                  className=\"cursor-pointer px-3 py-1 text-sm font-medium rounded-lg bg-gray-100 hover:bg-gray-200\"\r\n                >\r\n                  Đóng\r\n                </button>\r\n              </div>\r\n              <div className=\"p-4 max-h-[70vh] overflow-y-auto\">\r\n                {open === 'password' && <PasswordChange />}\r\n                {open === 'privacy' && <PrivacySettings />}\r\n                {open === 'notifications' && <NotificationSettings />}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfileSettings;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASA,SAAS;;IACP,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAkD;IAClF,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,QAAiF;QACrF;YAAE,KAAK;YAAY,OAAO;QAAe;QACzC;YAAE,KAAK;YAAW,OAAO;QAAiB;QAC1C;YAAE,KAAK;YAAiB,OAAO;QAAoB;KACpD;IAED,MAAM,WAAqD;QACzD,UAAU;QACV,SAAS;QACT,eAAe;IACjB;IAEA,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,MAAM,cAAc;gBACxB,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,QAAQ;gBAAS;YAC1C;QACF,EAAE,OAAM,CAAC;QACT,IAAI;YACF,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;QAC1B,EAAE,OAAM,CAAC;QACT,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,6LAAC;QAAI,WAAU;;YACZ,MAAM,GAAG,CAAC,CAAC,qBACV,6LAAC;oBAEC,SAAS,IAAM,QAAQ,KAAK,GAAG;oBAC/B,WAAU;8BAET,KAAK,KAAK;mBAJN,KAAK,GAAG;;;;;0BAOjB,6LAAC;gBACC,SAAS;gBACT,WAAU;;kCAEV,6LAAC,oKAAe;wBAAC,WAAU;;;;;;oBAAY;;;;;;;YAGxC,sBACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;wBAAwC,SAAS,IAAM,QAAQ;;;;;;kCAE9E,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAK,WAAU;sDAA+B,QAAQ,CAAC,KAAK;;;;;;sDAC7D,6LAAC;4CACC,SAAS,IAAM,QAAQ;4CACvB,WAAU;sDACX;;;;;;;;;;;;8CAIH,6LAAC;oCAAI,WAAU;;wCACZ,SAAS,4BAAc,6LAAC,uLAAc;;;;;wCACtC,SAAS,2BAAa,6LAAC,wLAAe;;;;;wCACtC,SAAS,iCAAmB,6LAAC,6LAAoB;;;;;;;;;;;;;;;;;;;;;;kCAKxD,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAK,WAAU;sDAA+B,QAAQ,CAAC,KAAK;;;;;;sDAC7D,6LAAC;4CACC,SAAS,IAAM,QAAQ;4CACvB,WAAU;sDACX;;;;;;;;;;;;8CAIH,6LAAC;oCAAI,WAAU;;wCACZ,SAAS,4BAAc,6LAAC,uLAAc;;;;;wCACtC,SAAS,2BAAa,6LAAC,wLAAe;;;;;wCACtC,SAAS,iCAAmB,6LAAC,6LAAoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQlE;GA9FS;;QAEQ,kJAAS;;;KAFjB;uCAgGM"}},
    {"offset": {"line": 1163, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28profile%29/ProfileOverview.tsx"],"sourcesContent":["'use client';\r\n\r\nexport default function ProfileOverview({\r\n  data,\r\n}: {\r\n  data: {\r\n    phone: string;\r\n    gender: string;\r\n    birthday: string;\r\n    email: string;\r\n    address: string;\r\n    department: string;\r\n    title: string;\r\n  };\r\n}) {\r\n  const departmentOptions = [\r\n    {\r\n      id: 1,\r\n      name: 'Ban lãnh đạo',\r\n    },\r\n    {\r\n      id: 2,\r\n      name: 'Quản lý',\r\n    },\r\n    {\r\n      id: 3,\r\n      name: 'Kinh doanh',\r\n    },\r\n    {\r\n      id: 4,\r\n      name: 'Thiết kế',\r\n    },\r\n    {\r\n      id: 5,\r\n      name: 'Sản xuất',\r\n    },\r\n    {\r\n      id: 6,\r\n      name: 'Sàn TMĐT',\r\n    },\r\n    {\r\n      id: 7,\r\n      name: 'Kế toán',\r\n    },\r\n    {\r\n      id: 8,\r\n      name: 'Kho TM',\r\n    },\r\n    {\r\n      id: 9,\r\n      name: 'HCNS',\r\n    },\r\n    {\r\n      id: 10,\r\n      name: 'Maketing',\r\n    },\r\n  ];\r\n  const deptLabel =\r\n    departmentOptions.find((o) => o.id === Number(data.department))?.name || data.department || 'Chưa cập nhật';\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg p-4\">\r\n      <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Thông tin cá nhân</h3>\r\n\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Giới tính</span>\r\n          <span className=\"text-gray-900 font-medium flex-1 text-right\">{data.gender || 'Chưa cập nhật'}</span>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Ngày sinh</span>\r\n          <span className=\"text-gray-900 font-medium flex-1 text-right\">{data.birthday || 'Chưa cập nhật'}</span>\r\n        </div>\r\n\r\n        <div className=\"py-2 border-b border-gray-100\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <span className=\"text-gray-500 w-32\">Điện thoại</span>\r\n            <span className=\"text-gray-900 font-medium flex-1 text-right\">{data.phone || 'Chưa cập nhật'}</span>\r\n          </div>\r\n          <p className=\"text-xs text-gray-500 mt-2 pl-32\">\r\n            Số điện thoại chỉ hiển thị với người có lưu số bạn trong danh bạ máy\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Email</span>\r\n          <span className=\"text-gray-900 font-medium flex-1 text-right\">{data.email || 'Chưa cập nhật'}</span>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Địa chỉ</span>\r\n          <span className=\"text-gray-900 font-medium flex-1 text-right\">{data.address || 'Chưa cập nhật'}</span>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Phòng ban</span>\r\n          <span className=\"text-gray-900 font-medium flex-1 text-right\">{deptLabel}</span>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Chức vụ</span>\r\n          <span className=\"text-gray-900 font-medium flex-1 text-right\">{data.title || 'Chưa cập nhật'}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAEe,SAAS,gBAAgB,EACtC,IAAI,EAWL;IACC,MAAM,oBAAoB;QACxB;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;KACD;IACD,MAAM,YACJ,kBAAkB,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,OAAO,KAAK,UAAU,IAAI,QAAQ,KAAK,UAAU,IAAI;IAE9F,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAuC;;;;;;0BAErD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAqB;;;;;;0CACrC,6LAAC;gCAAK,WAAU;0CAA+C,KAAK,MAAM,IAAI;;;;;;;;;;;;kCAGhF,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAqB;;;;;;0CACrC,6LAAC;gCAAK,WAAU;0CAA+C,KAAK,QAAQ,IAAI;;;;;;;;;;;;kCAGlF,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAqB;;;;;;kDACrC,6LAAC;wCAAK,WAAU;kDAA+C,KAAK,KAAK,IAAI;;;;;;;;;;;;0CAE/E,6LAAC;gCAAE,WAAU;0CAAmC;;;;;;;;;;;;kCAKlD,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAqB;;;;;;0CACrC,6LAAC;gCAAK,WAAU;0CAA+C,KAAK,KAAK,IAAI;;;;;;;;;;;;kCAG/E,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAqB;;;;;;0CACrC,6LAAC;gCAAK,WAAU;0CAA+C,KAAK,OAAO,IAAI;;;;;;;;;;;;kCAGjF,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAqB;;;;;;0CACrC,6LAAC;gCAAK,WAAU;0CAA+C;;;;;;;;;;;;kCAGjE,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAqB;;;;;;0CACrC,6LAAC;gCAAK,WAAU;0CAA+C,KAAK,KAAK,IAAI;;;;;;;;;;;;;;;;;;;;;;;;AAKvF;KAzGwB"}},
    {"offset": {"line": 1443, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28profile%29/InforRow.tsx"],"sourcesContent":["// components/(profile)/InfoRow.tsx\r\nimport React from 'react';\r\nimport { HiUser, HiPhone, HiCalendar, HiEnvelope, HiMapPin, HiBuildingOffice2, HiBriefcase } from 'react-icons/hi2';\r\n\r\nconst iconMap: Record<string, React.ReactNode> = {\r\n  user: <HiUser className=\"w-6 h-6 text-gray-500\" />,\r\n  phone: <HiPhone className=\"w-6 h-6 text-gray-500\" />,\r\n  calendar: <HiCalendar className=\"w-6 h-6 text-gray-500\" />,\r\n  email: <HiEnvelope className=\"w-6 h-6 text-gray-500\" />,\r\n  location: <HiMapPin className=\"w-6 h-6 text-gray-500\" />,\r\n  building: <HiBuildingOffice2 className=\"w-6 h-6 text-gray-500\" />,\r\n  briefcase: <HiBriefcase className=\"w-6 h-6 text-gray-500\" />,\r\n};\r\n\r\ninterface InfoRowProps {\r\n  icon?: keyof typeof iconMap;\r\n  label: string;\r\n  value: string;\r\n  badge?: React.ReactNode;\r\n}\r\n\r\nexport default function InfoRow({ icon, label, value, badge }: InfoRowProps) {\r\n  return (\r\n    <div className=\"flex items-center justify-between bg-white rounded-2xl px-6 py-3 shadow-sm border border-gray-100 hover:shadow-md transition-shadow\">\r\n      <div className=\"flex items-center gap-4\">\r\n        {icon ? iconMap[icon] : null}\r\n        <span className=\"text-gray-600 font-medium text-base\">{label}</span>\r\n      </div>\r\n      <div className=\"text-right\">\r\n        <p className=\"font-semibold text-gray-900 text-base\">{value}</p>\r\n        {badge && <div className=\"mt-1.5\">{badge}</div>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,mCAAmC;;;;;;AAEnC;;;AAEA,MAAM,UAA2C;IAC/C,oBAAM,6LAAC,4JAAM;QAAC,WAAU;;;;;;IACxB,qBAAO,6LAAC,6JAAO;QAAC,WAAU;;;;;;IAC1B,wBAAU,6LAAC,gKAAU;QAAC,WAAU;;;;;;IAChC,qBAAO,6LAAC,gKAAU;QAAC,WAAU;;;;;;IAC7B,wBAAU,6LAAC,8JAAQ;QAAC,WAAU;;;;;;IAC9B,wBAAU,6LAAC,uKAAiB;QAAC,WAAU;;;;;;IACvC,yBAAW,6LAAC,iKAAW;QAAC,WAAU;;;;;;AACpC;AASe,SAAS,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAgB;IACzE,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;oBACZ,OAAO,OAAO,CAAC,KAAK,GAAG;kCACxB,6LAAC;wBAAK,WAAU;kCAAuC;;;;;;;;;;;;0BAEzD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCAAyC;;;;;;oBACrD,uBAAS,6LAAC;wBAAI,WAAU;kCAAU;;;;;;;;;;;;;;;;;;AAI3C;KAbwB"}},
    {"offset": {"line": 1567, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28profile%29/ProfileInfoView.tsx"],"sourcesContent":["// components/(profile)/ProfileInfoView.tsx\r\n\r\nimport InfoRow from '@/components/(profile)/InforRow';\r\n\r\nconst departments: Record<string, { label: string; color: string }> = {\r\n  '1': { label: 'Ban lãnh đạo', color: 'bg-pink-100 text-pink-700' },\r\n  '2': { label: 'Quản lý', color: 'bg-purple-100 text-purple-700' },\r\n  '3': { label: 'Kinh doanh', color: 'bg-blue-100 text-blue-700' },\r\n  '4': { label: 'Thiết kế', color: 'bg-green-100 text-green-700' },\r\n  '5': { label: 'Sản xuất', color: 'bg-yellow-100 text-yellow-700' },\r\n  '6': { label: 'Sàn TMĐT', color: 'bg-orange-100 text-orange-700' },\r\n  '7': { label: 'Kế toán', color: 'bg-red-100 text-red-700' },\r\n  '8': { label: 'Kho TM', color: 'bg-gray-100 text-gray-700' },\r\n  '9': { label: 'HCNS', color: 'bg-teal-100 text-teal-700' },\r\n  '10': { label: 'Maketing', color: 'bg-pink-100 text-pink-700' },\r\n};\r\n\r\nexport default function ProfileInfoView({\r\n  form,\r\n}: {\r\n  form: {\r\n    name?: string;\r\n    phone?: string;\r\n    gender?: string;\r\n    birthday?: string;\r\n    email?: string;\r\n    address?: string;\r\n    department?: string;\r\n    title?: string;\r\n  };\r\n}) {\r\n  const dept = form.department ? departments[form.department] : undefined;\r\n\r\n  return (\r\n    <div className=\"space-y-4 max-w-2xl mx-auto\">\r\n      <InfoRow icon=\"user\" label=\"Tên hiển thị\" value={form.name || 'Chưa đặt'} />\r\n      <InfoRow icon=\"phone\" label=\"Số điện thoại\" value={form.phone || 'Chưa đặt'} />\r\n      <InfoRow icon=\"user\" label=\"Giới tính\" value={form.gender || 'Chưa chọn'} />\r\n      <InfoRow icon=\"calendar\" label=\"Ngày sinh\" value={form.birthday || 'Chưa chọn'} />\r\n      <InfoRow icon=\"email\" label=\"Email\" value={form.email || 'Chưa đặt'} />\r\n      <InfoRow icon=\"location\" label=\"Địa chỉ\" value={form.address || 'Chưa đặt'} />\r\n      <InfoRow\r\n        icon=\"building\"\r\n        label=\"Phòng ban\"\r\n        value={dept?.label || 'Chưa xác định'}\r\n        badge={dept && <span className={`px-3 py-1 rounded-full text-xs font-medium ${dept.color}`}>{dept.label}</span>}\r\n      />\r\n      <InfoRow icon=\"briefcase\" label=\"Chức vụ\" value={form.title || 'Chưa đặt'} />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,2CAA2C;;;;;;AAE3C;;;AAEA,MAAM,cAAgE;IACpE,KAAK;QAAE,OAAO;QAAgB,OAAO;IAA4B;IACjE,KAAK;QAAE,OAAO;QAAW,OAAO;IAAgC;IAChE,KAAK;QAAE,OAAO;QAAc,OAAO;IAA4B;IAC/D,KAAK;QAAE,OAAO;QAAY,OAAO;IAA8B;IAC/D,KAAK;QAAE,OAAO;QAAY,OAAO;IAAgC;IACjE,KAAK;QAAE,OAAO;QAAY,OAAO;IAAgC;IACjE,KAAK;QAAE,OAAO;QAAW,OAAO;IAA0B;IAC1D,KAAK;QAAE,OAAO;QAAU,OAAO;IAA4B;IAC3D,KAAK;QAAE,OAAO;QAAQ,OAAO;IAA4B;IACzD,MAAM;QAAE,OAAO;QAAY,OAAO;IAA4B;AAChE;AAEe,SAAS,gBAAgB,EACtC,IAAI,EAYL;IACC,MAAM,OAAO,KAAK,UAAU,GAAG,WAAW,CAAC,KAAK,UAAU,CAAC,GAAG;IAE9D,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,2JAAO;gBAAC,MAAK;gBAAO,OAAM;gBAAe,OAAO,KAAK,IAAI,IAAI;;;;;;0BAC9D,6LAAC,2JAAO;gBAAC,MAAK;gBAAQ,OAAM;gBAAgB,OAAO,KAAK,KAAK,IAAI;;;;;;0BACjE,6LAAC,2JAAO;gBAAC,MAAK;gBAAO,OAAM;gBAAY,OAAO,KAAK,MAAM,IAAI;;;;;;0BAC7D,6LAAC,2JAAO;gBAAC,MAAK;gBAAW,OAAM;gBAAY,OAAO,KAAK,QAAQ,IAAI;;;;;;0BACnE,6LAAC,2JAAO;gBAAC,MAAK;gBAAQ,OAAM;gBAAQ,OAAO,KAAK,KAAK,IAAI;;;;;;0BACzD,6LAAC,2JAAO;gBAAC,MAAK;gBAAW,OAAM;gBAAU,OAAO,KAAK,OAAO,IAAI;;;;;;0BAChE,6LAAC,2JAAO;gBACN,MAAK;gBACL,OAAM;gBACN,OAAO,MAAM,SAAS;gBACtB,OAAO,sBAAQ,6LAAC;oBAAK,WAAW,CAAC,2CAA2C,EAAE,KAAK,KAAK,EAAE;8BAAG,KAAK,KAAK;;;;;;;;;;;0BAEzG,6LAAC,2JAAO;gBAAC,MAAK;gBAAY,OAAM;gBAAU,OAAO,KAAK,KAAK,IAAI;;;;;;;;;;;;AAGrE;KAjCwB"}},
    {"offset": {"line": 1720, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28profile%29/ProfileInfoEdit.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport DepartmentDropdown from '@/components/(profile)/DepartmentDropdown';\r\nimport GenderSelector from '@/components/(profile)/GenderSelector';\r\nimport InputField from '@/components/(profile)/InputField';\r\nimport { useState } from 'react';\r\nimport { HiChevronDown } from 'react-icons/hi';\r\nimport { HiCheck } from 'react-icons/hi2';\r\n\r\ninterface Props {\r\n  form: {\r\n    name: string;\r\n    phone: string;\r\n    gender: string;\r\n    birthday: string;\r\n    email: string;\r\n    address: string;\r\n    department: string;\r\n    title: string;\r\n  };\r\n  setForm: (form: Props['form']) => void;\r\n  isSaving: boolean;\r\n  onSave: () => void;\r\n}\r\n\r\nexport default function ProfileInfoEdit({ form, setForm, isSaving, onSave }: Props) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [isOpenDepartment, setIsOpenDepartment] = useState(false);\r\n  const departmentOptions = [\r\n    {\r\n      id: 1,\r\n      name: 'Ban lãnh đạo',\r\n    },\r\n    {\r\n      id: 2,\r\n      name: 'Quản lý',\r\n    },\r\n    {\r\n      id: 3,\r\n      name: 'Kinh doanh',\r\n    },\r\n    {\r\n      id: 4,\r\n      name: 'Thiết kế',\r\n    },\r\n    {\r\n      id: 5,\r\n      name: 'Sản xuất',\r\n    },\r\n    {\r\n      id: 6,\r\n      name: 'Sàn TMĐT',\r\n    },\r\n    {\r\n      id: 7,\r\n      name: 'Kế toán',\r\n    },\r\n    {\r\n      id: 8,\r\n      name: 'Kho TM',\r\n    },\r\n    {\r\n      id: 9,\r\n      name: 'HCNS',\r\n    },\r\n    {\r\n      id: 10,\r\n      name: 'Maketing',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg p-4\">\r\n      <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Chỉnh sửa thông tin</h3>\r\n\r\n      <div className=\"space-y-4\">\r\n        {/* Tên hiển thị */}\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Tên hiển thị</span>\r\n          <input\r\n            className=\"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400\"\r\n            value={form.name}\r\n            onChange={(e) => setForm({ ...form, name: e.target.value })}\r\n            placeholder=\"Chưa cập nhật\"\r\n          />\r\n        </div>\r\n\r\n        {/* Giới tính */}\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Giới tính</span>\r\n          <div className=\"relative\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setIsOpen(!isOpen)}\r\n              className={`\r\n      w-full px-5 p-2 rounded-2xl  text-base font-medium text-left cursor-pointer\r\n      flex items-center justify-between transition-all duration-200\r\n      focus:outline-none\r\n      ${isOpen ? 'bg-white ring-4 ring-[#0068ff]/20 border-2 border-[#0068ff]' : 'border-2 border-transparent '}\r\n      ${form.gender ? 'text-gray-900' : 'text-gray-500'}\r\n    `}\r\n            >\r\n              <span>{form.gender || 'Chưa cập nhật'}</span>\r\n              <HiChevronDown\r\n                className={`w-5 h-5 text-gray-500 transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}`}\r\n              />\r\n            </button>\r\n\r\n            {/* Dropdown menu */}\r\n            {isOpen && (\r\n              <>\r\n                {/* Backdrop để đóng khi click ngoài */}\r\n                <div className=\"fixed inset-0 z-40\" onClick={() => setIsOpen(false)} />\r\n\r\n                {/* Danh sách lựa chọn */}\r\n                <div className=\"absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden z-50\">\r\n                  {['Nam', 'Nữ', 'Khác'].map((option) => (\r\n                    <button\r\n                      key={option}\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        setForm({ ...form, gender: option });\r\n                        setIsOpen(false);\r\n                      }}\r\n                      className={`\r\n              w-full px-5 py-4 text-left font-medium transition-all duration-150 cursor-pointer\r\n              ${form.gender === option ? 'bg-[#0068ff]/5 text-[#0068ff]' : 'text-gray-800 hover:bg-gray-100'}\r\n              active:bg-gray-200 flex items-center justify-between\r\n            `}\r\n                    >\r\n                      <span>{option}</span>\r\n                      {form.gender === option && <HiCheck className=\"w-5 h-5 text-[#0068ff]\" />}\r\n                    </button>\r\n                  ))}\r\n\r\n                  {/* Option \"Chưa cập nhật\" */}\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Ngày sinh */}\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100 \">\r\n          <span className=\"text-gray-500 w-32\">Ngày sinh</span>\r\n          <input\r\n            type=\"date\"\r\n            className=\"flex-1 text-right cursor-pointer text-gray-900 font-medium focus:outline-none bg-transparent\"\r\n            value={form.birthday}\r\n            onChange={(e) => setForm({ ...form, birthday: e.target.value })}\r\n          />\r\n        </div>\r\n\r\n        {/* Điện thoại */}\r\n        <div className=\"py-2 border-b border-gray-100\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <span className=\"text-gray-500 w-32\">Điện thoại</span>\r\n            <input\r\n              type=\"tel\"\r\n              className=\"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400\"\r\n              value={form.phone}\r\n              onChange={(e) => setForm({ ...form, phone: e.target.value })}\r\n              placeholder=\"Chưa cập nhật\"\r\n            />\r\n          </div>\r\n          <p className=\"text-xs text-gray-500 mt-2 pl-32\">\r\n            Số điện thoại chỉ hiển thị với người có lưu số bạn trong danh bạ máy\r\n          </p>\r\n        </div>\r\n\r\n        {/* Email */}\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Email</span>\r\n          <input\r\n            type=\"email\"\r\n            className=\"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400\"\r\n            value={form.email}\r\n            onChange={(e) => setForm({ ...form, email: e.target.value })}\r\n            placeholder=\"Chưa cập nhật\"\r\n          />\r\n        </div>\r\n\r\n        {/* Địa chỉ */}\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Địa chỉ</span>\r\n          <input\r\n            className=\"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400\"\r\n            value={form.address}\r\n            onChange={(e) => setForm({ ...form, address: e.target.value })}\r\n            placeholder=\"Chưa cập nhật\"\r\n          />\r\n        </div>\r\n\r\n        {/* Phòng ban */}\r\n        <div className=\"flex justify-between items-center py-4 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 text-base w-32\">Phòng ban</span>\r\n\r\n          {/* Custom Dropdown thay thế <select> */}\r\n          <div className=\"flex-1 relative\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setIsOpenDepartment(!isOpenDepartment)}\r\n              className={`\r\n        w-full px-4 py-1 text-right font-medium text-base transition-all duration-200 cursor-pointer\r\n        flex items-center justify-end gap-3\r\n        ${form.department ? 'text-gray-900' : 'text-gray-500'}\r\n        focus:outline-none\r\n      `}\r\n            >\r\n              <span className=\"truncate max-w-[180px]\">\r\n                {departmentOptions.find((opt) => String(opt.id) === form.department)?.name || 'Chưa cập nhật'}\r\n              </span>\r\n              <HiChevronDown\r\n                className={`w-5 h-5 text-gray-500 transition-transform duration-300 flex-shrink-0 ${isOpenDepartment ? 'rotate-180' : ''}`}\r\n              />\r\n            </button>\r\n\r\n            {/* Dropdown menu */}\r\n            {isOpenDepartment && (\r\n              <>\r\n                {/* Backdrop đóng khi click ngoài */}\r\n                <div className=\"fixed inset-0 z-40\" onClick={() => setIsOpenDepartment(false)} />\r\n\r\n                {/* Danh sách lựa chọn */}\r\n                <div className=\"absolute h-[24rem] overflow-y-auto right-0 custom-scrollbar bottom-full mt-2 w-64 bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden z-50\">\r\n                  {/* Option \"Chưa cập nhật\" */}\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setForm({ ...form, department: '' });\r\n                      setIsOpenDepartment(false);\r\n                    }}\r\n                    className={`\r\n              w-full px-5 py-4 text-left font-medium transition-all duration-150 cursor-pointer\r\n              ${!form.department ? 'bg-[#0068ff]/5 text-[#0068ff]' : 'text-gray-800 hover:bg-gray-100'}\r\n              active:bg-gray-200 flex items-center justify-between\r\n            `}\r\n                  >\r\n                    <span>Chưa cập nhật</span>\r\n                    {!form.department && <HiCheck className=\"w-5 h-5 text-[#0068ff]\" />}\r\n                  </button>\r\n\r\n                  {/* Các phòng ban */}\r\n                  {departmentOptions.map((opt) => (\r\n                    <button\r\n                      key={opt.id}\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        setForm({ ...form, department: String(opt.id) });\r\n                        setIsOpenDepartment(false);\r\n                      }}\r\n                      className={`\r\n                w-full px-5 py-4 text-left font-medium transition-all duration-150 cursor-pointer border-t border-gray-100\r\n                ${form.department === String(opt.id) ? 'bg-[#0068ff]/5 text-[#0068ff]' : 'text-gray-800 hover:bg-gray-100'}\r\n                active:bg-gray-200 flex items-center justify-between\r\n              `}\r\n                    >\r\n                      <span>{opt.name}</span>\r\n                      {form.department === String(opt.id) && <HiCheck className=\"w-5 h-5 text-[#0068ff]\" />}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n        {/* Chức vụ */}\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Chức vụ</span>\r\n          <input\r\n            className=\"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400\"\r\n            value={form.title}\r\n            onChange={(e) => setForm({ ...form, title: e.target.value })}\r\n            placeholder=\"Chưa cập nhật\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <button\r\n        onClick={onSave}\r\n        disabled={isSaving}\r\n        className=\"w-full mt-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold rounded-full shadow-sm transition-all duration-200 active:scale-95 flex items-center justify-center gap-2 cursor-pointer\"\r\n      >\r\n        {isSaving ? (\r\n          'Đang lưu...'\r\n        ) : (\r\n          <>\r\n            <HiCheck className=\"w-5 h-5\" />\r\n            Lưu thông tin\r\n          </>\r\n        )}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,oDAAoD;;;;;AAIpD;AACA;AACA;;;;;;AAkBe,SAAS,gBAAgB,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAS;;IAChF,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IACzD,MAAM,oBAAoB;QACxB;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;QACA;YACE,IAAI;YACJ,MAAM;QACR;KACD;IAED,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAuC;;;;;;0BAErD,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAqB;;;;;;0CACrC,6LAAC;gCACC,WAAU;gCACV,OAAO,KAAK,IAAI;gCAChB,UAAU,CAAC,IAAM,QAAQ;wCAAE,GAAG,IAAI;wCAAE,MAAM,EAAE,MAAM,CAAC,KAAK;oCAAC;gCACzD,aAAY;;;;;;;;;;;;kCAKhB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAqB;;;;;;0CACrC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,MAAK;wCACL,SAAS,IAAM,UAAU,CAAC;wCAC1B,WAAW,CAAC;;;;MAIpB,EAAE,SAAS,gEAAgE,+BAA+B;MAC1G,EAAE,KAAK,MAAM,GAAG,kBAAkB,gBAAgB;IACpD,CAAC;;0DAES,6LAAC;0DAAM,KAAK,MAAM,IAAI;;;;;;0DACtB,6LAAC,kKAAa;gDACZ,WAAW,CAAC,wDAAwD,EAAE,SAAS,eAAe,IAAI;;;;;;;;;;;;oCAKrG,wBACC;;0DAEE,6LAAC;gDAAI,WAAU;gDAAqB,SAAS,IAAM,UAAU;;;;;;0DAG7D,6LAAC;gDAAI,WAAU;0DACZ;oDAAC;oDAAO;oDAAM;iDAAO,CAAC,GAAG,CAAC,CAAC,uBAC1B,6LAAC;wDAEC,MAAK;wDACL,SAAS;4DACP,QAAQ;gEAAE,GAAG,IAAI;gEAAE,QAAQ;4DAAO;4DAClC,UAAU;wDACZ;wDACA,WAAW,CAAC;;cAEpB,EAAE,KAAK,MAAM,KAAK,SAAS,kCAAkC,kCAAkC;;YAEjG,CAAC;;0EAES,6LAAC;0EAAM;;;;;;4DACN,KAAK,MAAM,KAAK,wBAAU,6LAAC,6JAAO;gEAAC,WAAU;;;;;;;uDAbzC;;;;;;;;;;;;;;;;;;;;;;;;kCAyBnB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAqB;;;;;;0CACrC,6LAAC;gCACC,MAAK;gCACL,WAAU;gCACV,OAAO,KAAK,QAAQ;gCACpB,UAAU,CAAC,IAAM,QAAQ;wCAAE,GAAG,IAAI;wCAAE,UAAU,EAAE,MAAM,CAAC,KAAK;oCAAC;;;;;;;;;;;;kCAKjE,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAqB;;;;;;kDACrC,6LAAC;wCACC,MAAK;wCACL,WAAU;wCACV,OAAO,KAAK,KAAK;wCACjB,UAAU,CAAC,IAAM,QAAQ;gDAAE,GAAG,IAAI;gDAAE,OAAO,EAAE,MAAM,CAAC,KAAK;4CAAC;wCAC1D,aAAY;;;;;;;;;;;;0CAGhB,6LAAC;gCAAE,WAAU;0CAAmC;;;;;;;;;;;;kCAMlD,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAqB;;;;;;0CACrC,6LAAC;gCACC,MAAK;gCACL,WAAU;gCACV,OAAO,KAAK,KAAK;gCACjB,UAAU,CAAC,IAAM,QAAQ;wCAAE,GAAG,IAAI;wCAAE,OAAO,EAAE,MAAM,CAAC,KAAK;oCAAC;gCAC1D,aAAY;;;;;;;;;;;;kCAKhB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAqB;;;;;;0CACrC,6LAAC;gCACC,WAAU;gCACV,OAAO,KAAK,OAAO;gCACnB,UAAU,CAAC,IAAM,QAAQ;wCAAE,GAAG,IAAI;wCAAE,SAAS,EAAE,MAAM,CAAC,KAAK;oCAAC;gCAC5D,aAAY;;;;;;;;;;;;kCAKhB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAA+B;;;;;;0CAG/C,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,MAAK;wCACL,SAAS,IAAM,oBAAoB,CAAC;wCACpC,WAAW,CAAC;;;QAGlB,EAAE,KAAK,UAAU,GAAG,kBAAkB,gBAAgB;;MAExD,CAAC;;0DAEO,6LAAC;gDAAK,WAAU;0DACb,kBAAkB,IAAI,CAAC,CAAC,MAAQ,OAAO,IAAI,EAAE,MAAM,KAAK,UAAU,GAAG,QAAQ;;;;;;0DAEhF,6LAAC,kKAAa;gDACZ,WAAW,CAAC,sEAAsE,EAAE,mBAAmB,eAAe,IAAI;;;;;;;;;;;;oCAK7H,kCACC;;0DAEE,6LAAC;gDAAI,WAAU;gDAAqB,SAAS,IAAM,oBAAoB;;;;;;0DAGvE,6LAAC;gDAAI,WAAU;;kEAEb,6LAAC;wDACC,MAAK;wDACL,SAAS;4DACP,QAAQ;gEAAE,GAAG,IAAI;gEAAE,YAAY;4DAAG;4DAClC,oBAAoB;wDACtB;wDACA,WAAW,CAAC;;cAElB,EAAE,CAAC,KAAK,UAAU,GAAG,kCAAkC,kCAAkC;;YAE3F,CAAC;;0EAEO,6LAAC;0EAAK;;;;;;4DACL,CAAC,KAAK,UAAU,kBAAI,6LAAC,6JAAO;gEAAC,WAAU;;;;;;;;;;;;oDAIzC,kBAAkB,GAAG,CAAC,CAAC,oBACtB,6LAAC;4DAEC,MAAK;4DACL,SAAS;gEACP,QAAQ;oEAAE,GAAG,IAAI;oEAAE,YAAY,OAAO,IAAI,EAAE;gEAAE;gEAC9C,oBAAoB;4DACtB;4DACA,WAAW,CAAC;;gBAElB,EAAE,KAAK,UAAU,KAAK,OAAO,IAAI,EAAE,IAAI,kCAAkC,kCAAkC;;cAE7G,CAAC;;8EAEO,6LAAC;8EAAM,IAAI,IAAI;;;;;;gEACd,KAAK,UAAU,KAAK,OAAO,IAAI,EAAE,mBAAK,6LAAC,6JAAO;oEAAC,WAAU;;;;;;;2DAbrD,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;kCAsBzB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAqB;;;;;;0CACrC,6LAAC;gCACC,WAAU;gCACV,OAAO,KAAK,KAAK;gCACjB,UAAU,CAAC,IAAM,QAAQ;wCAAE,GAAG,IAAI;wCAAE,OAAO,EAAE,MAAM,CAAC,KAAK;oCAAC;gCAC1D,aAAY;;;;;;;;;;;;;;;;;;0BAKlB,6LAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAU;0BAET,WACC,8BAEA;;sCACE,6LAAC,6JAAO;4BAAC,WAAU;;;;;;wBAAY;;;;;;;;;;;;;;AAO3C;GA7QwB;KAAA"}},
    {"offset": {"line": 2300, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28profile%29/ProfileInfo.tsx"],"sourcesContent":["// components/(profile)/ProfileInfo.tsx\r\n'use client';\r\n\r\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { useToast } from '@/components/base/toast';\r\n\r\nimport ProfileInfoView from './ProfileInfoView';\r\nimport ProfileInfoEdit from './ProfileInfoEdit';\r\n\r\nimport { HiPencil } from 'react-icons/hi2';\r\n\r\nexport function ProfileInfo({\r\n  onDataChange,\r\n  isOwner: isOwnerProp,\r\n}: {\r\n  onDataChange?: (data: Record<string, unknown>) => void;\r\n  isOwner?: boolean;\r\n}) {\r\n  const searchParams = useSearchParams();\r\n  const toast = useToast();\r\n  const [form, setForm] = useState({\r\n    name: '',\r\n    phone: '',\r\n    gender: '',\r\n    birthday: '',\r\n    email: '',\r\n    address: '',\r\n    department: '',\r\n    title: '',\r\n  });\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n\r\n  const [mounted, setMounted] = useState(false);\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  const currentUser = useMemo(() => {\r\n    try {\r\n      const raw = typeof window !== 'undefined' ? localStorage.getItem('info_user') : null;\r\n      return raw ? JSON.parse(raw) : null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  }, []);\r\n\r\n  const currentId = useMemo(() => String(currentUser?.['username'] || currentUser?.['_id'] || ''), [currentUser]);\r\n  const viewingId = searchParams.get('user') || '';\r\n  const isOwner = isOwnerProp ?? (currentId && viewingId && currentId === viewingId);\r\n\r\n  const initializedRef = useRef(false);\r\n  useEffect(() => {\r\n    if (initializedRef.current || !currentUser) return;\r\n    const newForm = {\r\n      name: String(currentUser['name'] || currentUser['username'] || ''),\r\n      phone: String(currentUser['phone'] || ''),\r\n      gender: String(currentUser['gender'] || ''),\r\n      birthday: String(currentUser['birthday'] || ''),\r\n      email: String(currentUser['email'] || ''),\r\n      address: String(currentUser['address'] || ''),\r\n      department: String(currentUser['department'] || ''),\r\n      title: String(currentUser['title'] || ''),\r\n    };\r\n    setForm(newForm);\r\n    initializedRef.current = true;\r\n    onDataChange?.(newForm);\r\n  }, [currentUser, onDataChange]);\r\n\r\n  const handleSave = async () => {\r\n    if (!isOwner) return;\r\n    setIsSaving(true);\r\n    try {\r\n      const res = await fetch('/api/users', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          action: 'update',\r\n          field: currentUser?.['username'] ? 'username' : '_id',\r\n          value: currentId,\r\n          data: form,\r\n        }),\r\n      });\r\n      const json = await res.json();\r\n      if (!res.ok || json.error) throw new Error(json.error || 'Lưu thất bại');\r\n\r\n      localStorage.setItem('info_user', JSON.stringify({ ...currentUser, ...form }));\r\n      onDataChange?.(form);\r\n      toast({ type: 'success', message: 'Đã lưu thông tin!' });\r\n      setIsEditing(false);\r\n    } catch (err: unknown) {\r\n      toast({ type: 'error', message: (err as Error).message || 'Lỗi hệ thống' });\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  if (!mounted) return null;\r\n\r\n  if (!isOwner) return <ProfileInfoView form={form} />;\r\n\r\n  if (isEditing) {\r\n    return <ProfileInfoEdit form={form} setForm={setForm} isSaving={isSaving} onSave={handleSave} />;\r\n  }\r\n\r\n  const departmentOptions = [\r\n    { id: 2, name: 'Quản lý' },\r\n    { id: 3, name: 'Kinh doanh' },\r\n    { id: 4, name: 'Thiết kế' },\r\n    { id: 5, name: 'Sản xuất' },\r\n    { id: 6, name: 'Sàn TMĐT' },\r\n    { id: 7, name: 'Kế toán' },\r\n    { id: 8, name: 'Kho TM' },\r\n    { id: 9, name: 'HCNS' },\r\n    { id: 10, name: 'Maketing' },\r\n  ];\r\n  const deptLabel =\r\n    departmentOptions.find((o) => o.id === Number(form.department))?.name || form.department || 'Chưa cập nhật';\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg p-4\">\r\n      <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Thông tin cá nhân</h3>\r\n\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Tên hiển thị</span>\r\n          <span className=\"text-gray-900 font-medium flex-1 text-right\">{form.name || 'Chưa cập nhật'}</span>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Giới tính</span>\r\n          <span className=\"text-gray-900 font-medium flex-1 text-right\">{form.gender || 'Chưa cập nhật'}</span>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Ngày sinh</span>\r\n          <span className=\"text-gray-900 font-medium flex-1 text-right\">{form.birthday || 'Chưa cập nhật'}</span>\r\n        </div>\r\n\r\n        <div className=\"py-2 border-b border-gray-100\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <span className=\"text-gray-500 w-32\">Điện thoại</span>\r\n            <span className=\"text-gray-900 font-medium flex-1 text-right\">{form.phone || 'Chưa cập nhật'}</span>\r\n          </div>\r\n          <p className=\"text-xs text-gray-500 mt-2 pl-32\">\r\n            Số điện thoại chỉ hiển thị với người có lưu số bạn trong danh bạ máy\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Email</span>\r\n          <span className=\"text-gray-900 font-medium flex-1 text-right\">{form.email || 'Chưa cập nhật'}</span>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Địa chỉ</span>\r\n          <span className=\"text-gray-900 font-medium flex-1 text-right\">{form.address || 'Chưa cập nhật'}</span>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Phòng ban</span>\r\n          <span className=\"text-gray-900 font-medium flex-1 text-right\">{deptLabel}</span>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n          <span className=\"text-gray-500 w-32\">Chức vụ</span>\r\n          <span className=\"text-gray-900 font-medium flex-1 text-right\">{form.title || 'Chưa cập nhật'}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <button\r\n        onClick={() => setIsEditing(true)}\r\n        className=\"w-full mt-6 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-3 rounded-full flex items-center justify-center gap-2 transition-colors cursor-pointer\"\r\n      >\r\n        <HiPencil className=\"w-4 h-4\" />\r\n        Chỉnh sửa\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfileInfo;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2759, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28profile%29/ProfileContent.tsx"],"sourcesContent":["'use client';\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\n\r\nimport ProfileQR from '@/components/(profile)/PorfileQR';\r\nimport ProfileSettings from '@/components/(profile)/ProfileSettings';\r\nimport ProfileOverview from '@/components/(profile)/ProfileOverview';\r\nimport { ProfileInfo } from '@/components/(profile)/ProfileInfo';\r\n\r\nimport { HiUser, HiQrCode, HiCog6Tooth, HiInformationCircle } from 'react-icons/hi2';\r\n\r\nexport default function ProfileContent({\n  tab,\n  isOwner,\n  overviewData,\n  handleOverviewData,\n  profileIdForQr,\n}: {\n  tab: string;\n  isOwner: boolean;\n  overviewData: Record<string, unknown>;\n  handleOverviewData: (data: Record<string, unknown>) => void;\n  profileIdForQr: string;\n}) {\n  return (\n    <div className=\"\">\n      <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500 delay-100\">\n        {/* Thông tin cá nhân (chỉ owner chỉnh sửa được) */}\r\n        {tab === 'info' && (\r\n          <>\r\n            {isOwner ? (\r\n              <ProfileInfo\r\n                isOwner={isOwner}\r\n                onDataChange={(data) => handleOverviewData(data as Record<string, unknown>)}\r\n              />\r\n            ) : (\r\n              <ProfileOverview\r\n                data={\r\n                  overviewData as {\r\n                    phone: string;\r\n                    gender: string;\r\n                    birthday: string;\r\n                    email: string;\r\n                    address: string;\r\n                    department: string;\r\n                    title: string;\r\n                  }\r\n                }\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {/* Mã QR */}\r\n        {tab === 'qr' && (\n          <div className=\"bg-white rounded-lg p-4\">\n            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Mã QR</h3>\n            <div className=\"flex justify-center py-6\">\n              <div className=\" p-2  \">\n                <ProfileQR profilePath={profileIdForQr ? `/profile/${encodeURIComponent(profileIdForQr)}` : ''} />\n              </div>\n            </div>\n          </div>\n        )}\n\r\n        {/* Cài đặt – chỉ owner */}\r\n        {tab === 'settings' && isOwner && (\r\n          <div className=\"bg-white rounded-lg p-4\">\r\n            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Cài đặt</h3>\r\n            <ProfileSettings />\r\n          </div>\r\n        )}\r\n\r\n        {/* Hồ sơ công khai (profile tab) */}\r\n        {tab === 'profile' && (\r\n          <ProfileOverview\r\n            data={\r\n              overviewData as {\r\n                phone: string;\r\n                gender: string;\r\n                birthday: string;\r\n                email: string;\r\n                address: string;\r\n                department: string;\r\n                title: string;\r\n              }\r\n            }\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Empty state nếu không có gì (hiếm khi xảy ra) */}\r\n      {!['info', 'qr', 'settings', 'profile'].includes(tab) && (\r\n        <div className=\"text-center py-20 text-gray-500\">\r\n          <p className=\"text-lg\">Chưa có nội dung</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA,oDAAoD,GAEpD;AACA;AACA;AACA;AANA;;;;;;AAUe,SAAS,eAAe,EACrC,GAAG,EACH,OAAO,EACP,YAAY,EACZ,kBAAkB,EAClB,cAAc,EAOf;IACC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;oBAEZ,QAAQ,wBACP;kCACG,wBACC,6LAAC,kKAAW;4BACV,SAAS;4BACT,cAAc,CAAC,OAAS,mBAAmB;;;;;iDAG7C,6LAAC,kKAAe;4BACd,MACE;;;;;;;oBAgBT,QAAQ,sBACP,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAuC;;;;;;0CACrD,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,4JAAS;wCAAC,aAAa,iBAAiB,CAAC,SAAS,EAAE,mBAAmB,iBAAiB,GAAG;;;;;;;;;;;;;;;;;;;;;;oBAOnG,QAAQ,cAAc,yBACrB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAuC;;;;;;0CACrD,6LAAC,kKAAe;;;;;;;;;;;oBAKnB,QAAQ,2BACP,6LAAC,kKAAe;wBACd,MACE;;;;;;;;;;;;YAeP,CAAC;gBAAC;gBAAQ;gBAAM;gBAAY;aAAU,CAAC,QAAQ,CAAC,sBAC/C,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAE,WAAU;8BAAU;;;;;;;;;;;;;;;;;AAKjC;KAxFwB"}},
    {"offset": {"line": 2907, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28profile%29/MobileProfileSheet.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { HiChevronLeft } from 'react-icons/hi2';\r\nimport { createPortal } from 'react-dom';\r\n\r\ninterface MobileProfileSheetProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  children: React.ReactNode;\r\n  rightAction?: React.ReactNode;\r\n  headerClassName?: string;\r\n  titleClassName?: string;\r\n  backButtonClassName?: string;\r\n}\r\n\r\nexport default function MobileProfileSheet({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  children,\r\n  rightAction,\r\n  headerClassName = '',\r\n  titleClassName = '',\r\n  backButtonClassName = '',\r\n}: MobileProfileSheetProps) {\r\n  const [mounted, setMounted] = useState(false);\r\n  const [shouldRender, setShouldRender] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setShouldRender(true);\r\n      // Prevent body scroll\r\n      document.body.style.overflow = 'hidden';\r\n    } else {\r\n      const timer = setTimeout(() => setShouldRender(false), 300); // Wait for animation\r\n      document.body.style.overflow = '';\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  if (!mounted) return null;\r\n\r\n  // Use portal if needed, but for now rendering inline is fine as long as it covers everything.\r\n  // Using portal is safer for z-index.\r\n  if (!shouldRender) return null;\r\n\r\n  return createPortal(\r\n    <div className=\"fixed inset-0 z-[9999] flex justify-center items-end md:items-center\">\r\n      {/* Backdrop */}\r\n      <div\r\n        className={`absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity duration-300 ${\r\n          isOpen ? 'opacity-100' : 'opacity-0'\r\n        }`}\r\n        onClick={onClose}\r\n      />\r\n\r\n      {/* Sheet Container */}\r\n      <div\r\n        className={`relative w-full h-full md:h-[90vh] md:max-w-[480px] md:rounded-3xl md:overflow-hidden bg-white shadow-2xl transition-all duration-300 ease-in-out transform flex flex-col ${\r\n          isOpen ? 'translate-x-0 opacity-100 scale-100' : 'translate-x-full md:translate-x-0 md:opacity-0 md:scale-95'\r\n        }`}\r\n      >\r\n        {/* Header */}\r\n        <div\r\n          className={`flex-none p-2 border-b border-gray-100 flex items-center justify-between sticky top-0 z-10 ${\r\n            headerClassName || 'bg-white/80 backdrop-blur-md'\r\n          }`}\r\n        >\r\n          <button\r\n            onClick={onClose}\r\n            className={`p-2 -ml-2 rounded-full transition-colors cursor-pointer ${\r\n              backButtonClassName || 'text-gray-600 hover:bg-gray-100 active:bg-gray-200'\r\n            }`}\r\n          >\r\n            <HiChevronLeft className=\"w-6 h-6\" />\r\n          </button>\r\n\r\n          <h2 className={`text-lg font-bold flex-1 text-center pr-8 ${titleClassName || 'text-gray-800'}`}>{title}</h2>\r\n          {rightAction && <div className=\"absolute right-4\">{rightAction}</div>}\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 overflow-y-auto bg-gray-50 custom-scrollbar\">{children}</div>\r\n      </div>\r\n    </div>,\r\n    document.body,\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAiBe,SAAS,mBAAmB,EACzC,MAAM,EACN,OAAO,EACP,KAAK,EACL,QAAQ,EACR,WAAW,EACX,kBAAkB,EAAE,EACpB,iBAAiB,EAAE,EACnB,sBAAsB,EAAE,EACA;;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,IAAA,0KAAS;wCAAC;YACR,WAAW;QACb;uCAAG,EAAE;IAEL,IAAA,0KAAS;wCAAC;YACR,IAAI,QAAQ;gBACV,gBAAgB;gBAChB,sBAAsB;gBACtB,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;YACjC,OAAO;gBACL,MAAM,QAAQ;0DAAW,IAAM,gBAAgB;yDAAQ,MAAM,qBAAqB;gBAClF,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;gBAC/B;oDAAO,IAAM,aAAa;;YAC5B;QACF;uCAAG;QAAC;KAAO;IAEX,IAAI,CAAC,SAAS,OAAO;IAErB,8FAA8F;IAC9F,qCAAqC;IACrC,IAAI,CAAC,cAAc,OAAO;IAE1B,qBAAO,IAAA,oLAAY,gBACjB,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBACC,WAAW,CAAC,8EAA8E,EACxF,SAAS,gBAAgB,aACzB;gBACF,SAAS;;;;;;0BAIX,6LAAC;gBACC,WAAW,CAAC,0KAA0K,EACpL,SAAS,wCAAwC,8DACjD;;kCAGF,6LAAC;wBACC,WAAW,CAAC,2FAA2F,EACrG,mBAAmB,gCACnB;;0CAEF,6LAAC;gCACC,SAAS;gCACT,WAAW,CAAC,wDAAwD,EAClE,uBAAuB,sDACvB;0CAEF,cAAA,6LAAC,mKAAa;oCAAC,WAAU;;;;;;;;;;;0CAG3B,6LAAC;gCAAG,WAAW,CAAC,0CAA0C,EAAE,kBAAkB,iBAAiB;0CAAG;;;;;;4BACjG,6BAAe,6LAAC;gCAAI,WAAU;0CAAoB;;;;;;;;;;;;kCAIrD,6LAAC;wBAAI,WAAU;kCAAsD;;;;;;;;;;;;;;;;;cAGzE,SAAS,IAAI;AAEjB;GA5EwB;KAAA"}},
    {"offset": {"line": 3039, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/app/%28zalo%29/profile/%5Buser%5D/page.tsx"],"sourcesContent":["// components/(profile)/ProfileInfo.tsx\r\n'use client';\r\n\r\nimport { useState, useMemo, useRef } from 'react';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport Image from 'next/image';\r\nimport { useViewingUser } from '@/hooks/(profile)/useViewingUser';\r\nimport { useUploadImage } from '@/hooks/(profile)/useUploadImage';\r\nimport { useCurrentUser } from '@/hooks/(profile)/useCurrentUser';\r\nimport { getProxyUrl } from '@/utils/utils';\r\nimport CropImageModal from '@/components/base/CropImageModal';\r\n\r\nimport ProfileContent from '@/components/(profile)/ProfileContent';\r\nimport MobileProfileSheet from '@/components/(profile)/MobileProfileSheet';\r\n\r\nimport {\r\n  HiUserCircle,\r\n  HiQrCode,\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  HiCog6Tooth,\r\n  HiInformationCircle,\r\n  HiPhone,\r\n  HiEnvelope,\r\n  HiCalendar,\r\n  HiMapPin,\r\n  HiChevronLeft,\r\n  HiEllipsisHorizontal,\r\n  HiClock,\r\n  HiPencilSquare,\r\n  HiCamera,\r\n  HiPhoto,\r\n  HiSparkles,\r\n  HiArchiveBox,\r\n  HiCheck,\r\n  HiBuildingOffice2,\r\n  HiBriefcase,\r\n  HiOutlineMagnifyingGlass,\r\n} from 'react-icons/hi2';\r\nimport { HiChevronRight, HiX } from 'react-icons/hi';\r\n\r\nexport default function ProfileByIdPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const viewingId = typeof params?.['user'] === 'string' ? params['user'] : '';\r\n\r\n  const { currentUser, currentId } = useCurrentUser();\r\n  const isOwner = Boolean(\r\n    viewingId &&\r\n      (viewingId === String(currentUser?.['_id'] || '') ||\r\n        viewingId === String((currentUser?.['username'] as string) || '')),\r\n  );\r\n\r\n  const {\r\n    viewingUserId,\r\n    overviewData,\r\n    setOverviewData,\r\n    displayName,\r\n    setDisplayName,\r\n    displayDept,\r\n    setDisplayDept,\r\n    displayTitle,\r\n    setDisplayTitle,\r\n    displayBio,\r\n    setDisplayBio,\r\n    avatar,\r\n    background,\r\n    setAvatar,\r\n    setBackground,\r\n  } = useViewingUser(viewingId, !!isOwner, currentUser);\r\n\r\n  const profileIdForQr = viewingUserId || (isOwner ? String(currentUser?._id || '') || viewingId : viewingId);\r\n\r\n  const { handleUpload, isUploadingAvatar, isUploadingBackground } = useUploadImage(\r\n    currentId,\r\n    !!isOwner,\r\n    setAvatar,\r\n    setBackground,\r\n  );\r\n\r\n  const [tabMobile, setTabMobile] = useState<\r\n    'profile' | 'qr' | 'info' | 'settings' | 'edit_intro' | 'more_actions' | 'general_settings' | 'privacy' | 'account'\r\n  >('profile');\r\n  const [isMobileSheetOpen, setIsMobileSheetOpen] = useState(false);\r\n  const [introText, setIntroText] = useState('');\r\n  const [shareToDiary, setShareToDiary] = useState(false);\r\n\r\n  const avatarInputRef = useRef<HTMLInputElement>(null);\r\n  const backgroundInputRef = useRef<HTMLInputElement>(null);\r\n  const [isEditingNickname, setIsEditingNickname] = useState(false);\r\n  const [editNickname, setEditNickname] = useState(displayName);\r\n  const [isSavingNickname, setIsSavingNickname] = useState(false);\r\n  const [avatarError, setAvatarError] = useState(false);\r\n\r\n  const [cropOpen, setCropOpen] = useState(false);\r\n  const [cropSrc, setCropSrc] = useState<string | null>(null);\r\n  const [cropKind, setCropKind] = useState<'avatar' | 'background' | null>(null);\r\n  const [cropFileName, setCropFileName] = useState<string>('image.jpg');\r\n\r\n  const openCropper = (file: File, kind: 'avatar' | 'background') => {\r\n    try {\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        setCropSrc(String(reader.result || ''));\r\n        setCropKind(kind);\r\n        setCropFileName(file.name || (kind === 'avatar' ? 'avatar.jpg' : 'background.jpg'));\r\n        setCropOpen(true);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    } catch {}\r\n  };\r\n\r\n  const handleConfirmCrop = async (file: File) => {\r\n    if (!cropKind) return;\r\n    await handleUpload(file, cropKind);\r\n    setCropOpen(false);\r\n    setCropSrc(null);\r\n    setCropKind(null);\r\n  };\r\n  const handleSaveNickname = async (value: string) => {\r\n    if (!currentUser || !currentUser['_id'] || !viewingId) return;\r\n    const v = String(value || '').trim();\r\n    try {\r\n      setIsSavingNickname(true);\r\n      const res = await fetch('/api/users', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          action: 'updateNickname',\r\n          roomId: viewingId,\r\n          currentUserId: String(currentUser['_id']),\r\n          data: { nickname: v },\r\n        }),\r\n      });\r\n      if (!res.ok) throw new Error();\r\n      if (v) {\r\n        setDisplayName(v);\r\n      } else {\r\n        try {\r\n          const r = await fetch('/api/users', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ action: 'getById', _id: viewingId }),\r\n          });\r\n          const j = await r.json();\r\n          const u = j?.row || j?.user || j;\r\n          const base = String(u?.name || u?.username || '');\r\n          setDisplayName(base);\r\n        } catch {}\r\n      }\r\n      setIsEditingNickname(false);\r\n    } finally {\r\n      setIsSavingNickname(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdateProfile = async (field: string, value: string) => {\r\n    if (!currentId || !isOwner) return;\r\n    try {\r\n      await fetch('/api/users', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          action: 'update',\r\n          field: '_id',\r\n          value: currentId,\r\n          data: { [field]: value },\r\n        }),\r\n      });\r\n\r\n      // Update local storage\r\n      try {\r\n        const raw = localStorage.getItem('info_user');\r\n        if (raw) {\r\n          const parsed = JSON.parse(raw);\r\n          localStorage.setItem('info_user', JSON.stringify({ ...parsed, [field]: value }));\r\n        }\r\n      } catch {}\r\n\r\n      // Update local state\r\n      if (field === 'title') {\r\n        setDisplayTitle(value);\r\n        setOverviewData((prev) => ({ ...prev, title: value }));\r\n      }\r\n      if (field === 'bio') {\r\n        setDisplayBio(value);\r\n        setOverviewData((prev) => ({ ...prev, bio: value }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to update profile', error);\r\n    }\r\n  };\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const tabsMobile = isOwner ? ['profile', 'qr', 'info', 'settings'] : ['profile', 'qr'];\r\n\r\n  const departmentLabel = useMemo(() => {\r\n    const opts = [\r\n      { id: 2, name: 'Quản lý' },\r\n      { id: 3, name: 'Kinh doanh' },\r\n      { id: 4, name: 'Thiết kế' },\r\n      { id: 5, name: 'Sản xuất' },\r\n      { id: 6, name: 'Sàn TMĐT' },\r\n      { id: 7, name: 'Kế toán' },\r\n      { id: 8, name: 'Kho TM' },\r\n      { id: 9, name: 'HCNS' },\r\n      { id: 10, name: 'Maketing' },\r\n    ];\r\n    const val = String(displayDept || overviewData.department || '');\r\n    return opts.find((o) => o.id === Number(val))?.name || val || 'Chưa xác định';\r\n  }, [displayDept, overviewData.department]);\r\n\r\n  const handleProfileUpdate = (data: Record<string, unknown>) => {\r\n    setOverviewData((prev) => ({ ...prev, ...data }));\r\n    if (data.title !== undefined) setDisplayTitle(String(data.title));\r\n    if (data.bio !== undefined) setDisplayBio(String(data.bio));\r\n    if (data.department !== undefined) setDisplayDept(String(data.department));\r\n    if (data.name !== undefined) setDisplayName(String(data.name));\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 \">\r\n      {/* ==================== UNIFIED MOBILE-LIKE VIEW ==================== */}\r\n      <div className=\"w-full bg-gray-50 h-screen overflow-y-auto custom-scrollbar pb-[5rem] md:pb-0 relative no-scrollbar\">\r\n        {/* Top Header Section */}\r\n        <div className=\"relative bg-white pb-4 mb-2\">\r\n          {/* Header Actions */}\r\n          <div className=\"absolute top-0 left-0 right-0 z-30 flex md:justify-end justify-end items-center p-4 text-white\">\r\n            <button\r\n              onClick={() => router.back()}\r\n              className=\"cursor-pointer hidden p-1.5 rounded-full bg-black/20 backdrop-blur-md hover:bg-black/30 transition-colors\"\r\n            >\r\n              <HiChevronLeft className=\"w-6 h-6\" />\r\n            </button>\r\n            <div className=\"flex gap-3\">\r\n              <button className=\"cursor-pointer p-1.5 rounded-full bg-black/20 backdrop-blur-md hover:bg-black/30 transition-colors\">\r\n                <HiClock className=\"w-6 h-6\" />\r\n              </button>\r\n              {isOwner && (\r\n                <button\r\n                  onClick={() => {\r\n                    setTabMobile('more_actions');\r\n                    setIsMobileSheetOpen(true);\r\n                  }}\r\n                  className=\"cursor-pointer p-1.5 rounded-full bg-black/20 backdrop-blur-md hover:bg-black/30 transition-colors\"\r\n                >\r\n                  <HiEllipsisHorizontal className=\"w-6 h-6\" />\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Cover Image */}\r\n          <div className=\"relative h-64 w-full z-0\">\r\n            {background ? (\r\n              <Image src={getProxyUrl(background)} alt=\"Cover\" fill className=\"object-cover\" priority sizes=\"100vw\" />\r\n            ) : (\r\n              <div className=\"absolute inset-0 bg-blue-400\" />\r\n            )}\r\n\r\n            {/* Loading Overlay for Background */}\r\n            {isUploadingBackground && (\r\n              <div className=\"absolute inset-0 bg-black/40 z-20 flex items-center justify-center backdrop-blur-sm\">\r\n                <div className=\"w-10 h-10 border-4 border-white/30 border-t-white rounded-full animate-spin\"></div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Edit Cover Button (Owner only) */}\r\n            {isOwner && !isUploadingBackground && (\r\n              <label className=\"absolute bottom-4 right-4 p-2 bg-black/30 backdrop-blur-md rounded-full text-white cursor-pointer hover:bg-black/40 transition-colors z-10\">\r\n                <HiCamera className=\"w-5 h-5\" />\r\n                <input\r\n                  ref={backgroundInputRef}\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  className=\"hidden\"\r\n                  onChange={(e) => e.target.files?.[0] && openCropper(e.target.files[0], 'background')}\r\n                />\r\n              </label>\r\n            )}\r\n          </div>\r\n\r\n          {/* Avatar & Info */}\r\n          <div className=\"relative px-4 flex flex-col items-center -mt-16 pointer-events-none\">\r\n            <div className=\"relative pointer-events-auto\">\r\n              {/* Status Bubble */}\r\n              <div className=\"absolute -top-12 left-1/2 -translate-x-1/2 whitespace-nowrap bg-white text-gray-700 text-xs font-medium px-3 py-1.5 rounded-2xl shadow-lg border border-gray-100 after:content-[''] after:absolute after:top-full after:left-1/2 after:-translate-x-1/2 after:border-4 after:border-transparent after:border-t-white animate-bounce\">\r\n                Trạng thái hiện tại\r\n              </div>\r\n\r\n              {/* Avatar */}\r\n              <div className=\"w-32 h-32 rounded-full border-4 border-white shadow-md overflow-hidden relative bg-gray-200 z-10\">\r\n                {avatar && !avatarError ? (\r\n                  <Image\r\n                    src={getProxyUrl(avatar)}\r\n                    alt=\"Avatar\"\r\n                    fill\r\n                    className=\"object-cover\"\r\n                    sizes=\"(max-width: 768px) 100vw, 33vw\"\r\n                    unoptimized\r\n                    onError={() => setAvatarError(true)}\r\n                    onLoadingComplete={() => setAvatarError(false)}\r\n                  />\r\n                ) : (\r\n                  <div className=\"w-full h-full flex items-center justify-center bg-gray-300 text-gray-500\">\r\n                    <HiUserCircle className=\"w-20 h-20\" />\r\n                  </div>\r\n                )}\r\n\r\n                {/* Loading Overlay for Avatar */}\r\n                {isUploadingAvatar && (\r\n                  <div className=\"absolute inset-0 bg-black/40 z-20 flex items-center justify-center backdrop-blur-sm\">\r\n                    <div className=\"w-8 h-8 border-4 border-white/30 border-t-white rounded-full animate-spin\"></div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Edit Avatar (Owner) */}\r\n                {isOwner && !isUploadingAvatar && (\r\n                  <label className=\"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-pointer z-10\">\r\n                    <HiCamera className=\"w-8 h-8 text-white\" />\r\n                    <input\r\n                      ref={avatarInputRef}\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      className=\"hidden\"\r\n                      onChange={(e) => e.target.files?.[0] && openCropper(e.target.files[0], 'avatar')}\r\n                    />\r\n                  </label>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Name */}\r\n            {isEditingNickname ? (\r\n              <div className=\"mt-3 flex items-center gap-2 pointer-events-auto\">\r\n                <input\r\n                  value={editNickname}\r\n                  onChange={(e) => setEditNickname(e.target.value)}\r\n                  className=\"px-3 py-2 text-xl font-bold text-gray-900 border-b-2 border-blue-500 bg-transparent focus:outline-none\"\r\n                  disabled={isSavingNickname}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') handleSaveNickname(editNickname);\r\n                    if (e.key === 'Escape') setIsEditingNickname(false);\r\n                  }}\r\n                />\r\n                <button\r\n                  onClick={() => handleSaveNickname(editNickname)}\r\n                  disabled={isSavingNickname}\r\n                  className={`p-2 rounded-full ${isSavingNickname ? 'bg-green-100 text-green-500 opacity-70' : 'hover:bg-green-100 text-green-600'}`}\r\n                  title=\"Lưu\"\r\n                >\r\n                  {isSavingNickname ? (\r\n                    <span className=\"w-5 h-5 inline-block border-2 border-green-600 border-t-transparent rounded-full animate-spin\" />\r\n                  ) : (\r\n                    <HiCheck className=\"w-5 h-5\" />\r\n                  )}\r\n                </button>\r\n                <button\r\n                  onClick={() => handleSaveNickname('')}\r\n                  disabled={isSavingNickname}\r\n                  className=\"p-2 rounded-full hover:bg-gray-100 text-gray-600\"\r\n                  title=\"Xóa biệt danh\"\r\n                >\r\n                  <HiArchiveBox className=\"w-5 h-5\" />\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    setIsEditingNickname(false);\r\n                    setEditNickname(displayName);\r\n                  }}\r\n                  disabled={isSavingNickname}\r\n                  className=\"p-2 rounded-full hover:bg-red-100 text-red-500\"\r\n                  title=\"Hủy\"\r\n                >\r\n                  <HiX className=\"w-5 h-5\" />\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <div className=\"mt-3 flex items-center gap-2 pointer-events-auto\">\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">{displayName}</h1>\r\n                {!isOwner && (\r\n                  <button\r\n                    onClick={() => {\r\n                      setEditNickname(displayName);\r\n                      setIsEditingNickname(true);\r\n                    }}\r\n                    className=\"p-2 rounded-full hover:bg-gray-100 text-gray-500\"\r\n                    title=\"Sửa biệt danh\"\r\n                  >\r\n                    <HiPencilSquare className=\"w-5 h-5\" />\r\n                  </button>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Edit Intro Link */}\r\n            <button\r\n              onClick={() => {\r\n                setTabMobile('edit_intro');\r\n                setIntroText(displayBio || '');\r\n                setIsMobileSheetOpen(true);\r\n              }}\r\n              className=\"cursor-pointer mt-1 flex items-center gap-1 text-blue-600 text-sm font-medium hover:underline pointer-events-auto\"\r\n            >\r\n              <HiPencilSquare className=\"w-4 h-4\" />\r\n              {displayBio || 'Cập nhật giới thiệu bản thân'}\r\n            </button>\r\n            {/* Additional Info (Mobile) */}\r\n            <div className=\"flex flex-wrap justify-center gap-2 mt-4 w-full pointer-events-auto\">\r\n              {(overviewData.title || displayTitle) && (\r\n                <div className=\"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm\">\r\n                  <HiBriefcase className=\"w-3.5 h-3.5 text-purple-500\" />\r\n                  {overviewData.title || displayTitle}\r\n                </div>\r\n              )}\r\n              {(overviewData.department || displayDept) && (\r\n                <div className=\"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm\">\r\n                  <HiBuildingOffice2 className=\"w-3.5 h-3.5 text-orange-500\" />\r\n                  {departmentLabel}\r\n                </div>\r\n              )}\r\n              {overviewData.gender && (\r\n                <div className=\"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm\">\r\n                  <HiUserCircle className=\"w-3.5 h-3.5 text-indigo-500\" />\r\n                  {overviewData.gender}\r\n                </div>\r\n              )}\r\n              {overviewData.birthday && (\r\n                <div className=\"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm\">\r\n                  <HiCalendar className=\"w-3.5 h-3.5 text-pink-500\" />\r\n                  {overviewData.birthday}\r\n                </div>\r\n              )}\r\n              {overviewData.phone && (\r\n                <div className=\"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm\">\r\n                  <HiPhone className=\"w-3.5 h-3.5 text-green-500\" />\r\n                  {overviewData.phone}\r\n                </div>\r\n              )}\r\n              {overviewData.email && (\r\n                <div className=\"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm\">\r\n                  <HiEnvelope className=\"w-3.5 h-3.5 text-blue-500\" />\r\n                  <span className=\"truncate max-w-[150px]\">{overviewData.email}</span>\r\n                </div>\r\n              )}\r\n              {overviewData.address && (\r\n                <div className=\"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm\">\r\n                  <HiMapPin className=\"w-3.5 h-3.5 text-red-500\" />\r\n                  <span className=\"truncate max-w-[150px]\">{overviewData.address}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Horizontal Actions */}\r\n          <div className=\"mt-6 mx-4 flex justify-start md:justify-center gap-3 overflow-x-auto custom-scrollbar pb-2 \">\r\n            {/* Cài zStyle (Placeholder for Settings/Style) */}\r\n            <button className=\" cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform\">\r\n              <div className=\"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center\">\r\n                <HiSparkles className=\"w-5 h-5\" />\r\n              </div>\r\n              <span className=\"font-medium text-gray-700 text-sm\">Cài zStyle</span>\r\n            </button>\r\n\r\n            {/* Ảnh của tôi */}\r\n            <button className=\"cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform\">\r\n              <div className=\"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center\">\r\n                <HiPhoto className=\"w-5 h-5\" />\r\n              </div>\r\n              <span className=\"font-medium text-gray-700 text-sm\">Ảnh của tôi</span>\r\n            </button>\r\n\r\n            {/* Kho khoảnh khắc */}\r\n            <button className=\"cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform\">\r\n              <div className=\"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center\">\r\n                <HiArchiveBox className=\"w-5 h-5\" />\r\n              </div>\r\n              <span className=\"font-medium text-gray-700 text-sm\">Kho khoảnh...</span>\r\n            </button>\r\n\r\n            {/* Info Button (Restoring old functionality) */}\r\n            <button\r\n              onClick={() => {\r\n                setTabMobile('info');\r\n                setIsMobileSheetOpen(true);\r\n              }}\r\n              className=\"cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform\"\r\n            >\r\n              <div className=\"w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center\">\r\n                <HiInformationCircle className=\"w-5 h-5\" />\r\n              </div>\r\n              <span className=\"font-medium text-gray-700 text-sm\">Thông tin</span>\r\n            </button>\r\n\r\n            {/* QR Button */}\r\n            <button\r\n              onClick={() => {\r\n                setTabMobile('qr');\r\n                setIsMobileSheetOpen(true);\r\n              }}\r\n              className=\"cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform mr-4\"\r\n            >\r\n              <div className=\"w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center\">\r\n                <HiQrCode className=\"w-5 h-5\" />\r\n              </div>\r\n              <span className=\"font-medium text-gray-700 text-sm\">Mã QR</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Diary Section */}\r\n        <div className=\"bg-white p-6 text-center\">\r\n          <div className=\"relative w-full max-w-[200px] mx-auto mb-4\">\r\n            {/* Illustration placeholder */}\r\n            <div className=\"w-24 h-40 mx-auto bg-blue-50 rounded-2xl border-2 border-blue-100 flex items-center justify-center relative shadow-inner\">\r\n              <div className=\"w-12 h-12 bg-white rounded-full shadow-sm flex items-center justify-center\">\r\n                <HiUserCircle className=\"w-10 h-10 text-gray-300\" />\r\n              </div>\r\n              {/* Chat bubble icon */}\r\n              <div className=\"absolute -top-2 -right-4 bg-green-500 p-1.5 rounded-lg\">\r\n                <HiEllipsisHorizontal className=\"w-4 h-4 text-white\" />\r\n              </div>\r\n              {/* Heart icon */}\r\n              <div className=\"absolute top-10 -left-4 text-red-500\">\r\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-6 h-6\">\r\n                  <path d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\" />\r\n                </svg>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <h3 className=\"text-lg font-bold text-gray-900 mb-2\">Hôm nay {displayName} có gì vui?</h3>\r\n          <p className=\"text-gray-500 text-sm mb-6 max-w-xs mx-auto leading-relaxed\">\r\n            Đây là Nhật ký của bạn - Hãy làm đầy Nhật ký với những dấu ấn cuộc đời và kỷ niệm đáng nhớ nhé!\r\n          </p>\r\n\r\n          <button className=\"cursor-pointer bg-blue-600 text-white font-semibold px-8 py-3 rounded-full shadow-lg shadow-blue-200 active:scale-95 transition-transform hover:bg-blue-700\">\r\n            Đăng lên Nhật ký\r\n          </button>\r\n        </div>\r\n        <MobileProfileSheet\r\n          isOpen={isMobileSheetOpen}\r\n          onClose={() => setIsMobileSheetOpen(false)}\r\n          title={\r\n            tabMobile === 'profile'\r\n              ? 'Hồ sơ'\r\n              : tabMobile === 'qr'\r\n                ? 'Mã QR'\r\n                : tabMobile === 'info'\r\n                  ? 'Thông tin'\r\n                  : tabMobile === 'edit_intro'\r\n                    ? 'Chỉnh sửa lời giới thiệu'\r\n                    : tabMobile === 'more_actions'\r\n                      ? displayName\r\n                      : tabMobile === 'general_settings'\r\n                        ? 'Cài đặt'\r\n                        : tabMobile === 'privacy'\r\n                          ? 'Quyền riêng tư'\r\n                          : tabMobile === 'account'\r\n                            ? 'Quản lý tài khoản'\r\n                            : 'Cài đặt'\r\n          }\r\n          headerClassName={tabMobile === 'more_actions' ? 'bg-blue-500 text-white border-blue-500' : undefined}\r\n          titleClassName={tabMobile === 'more_actions' ? 'text-white' : undefined}\r\n          backButtonClassName={\r\n            tabMobile === 'more_actions' ? 'text-white hover:bg-blue-600 active:bg-blue-700' : undefined\r\n          }\r\n          rightAction={\r\n            tabMobile === 'edit_intro' ? (\r\n              <button\r\n                onClick={() => {\r\n                  handleUpdateProfile('bio', introText);\r\n                  setIsMobileSheetOpen(false);\r\n                }}\r\n                className=\"text-blue-600 font-bold text-base\"\r\n              >\r\n                Lưu\r\n              </button>\r\n            ) : tabMobile === 'general_settings' ? (\r\n              <button className=\"text-gray-800\">\r\n                <HiOutlineMagnifyingGlass className=\"w-6 h-6\" />\r\n              </button>\r\n            ) : undefined\r\n          }\r\n        >\r\n          {tabMobile === 'edit_intro' ? (\r\n            <div className=\"p-4\">\r\n              <textarea\r\n                className=\"w-full h-32 text-lg text-gray-800 placeholder-gray-400 focus:outline-none resize-none bg-transparent\"\r\n                placeholder=\"Thêm lời giới thiệu của bạn\"\r\n                maxLength={100}\r\n                value={introText}\r\n                onChange={(e) => setIntroText(e.target.value)}\r\n                autoFocus\r\n              />\r\n              <div className=\"text-right text-gray-400 text-sm mt-2\">{introText.length}/100</div>\r\n              <div\r\n                className=\"mt-6 flex items-center gap-3 cursor-pointer\"\r\n                onClick={() => setShareToDiary(!shareToDiary)}\r\n              >\r\n                <div\r\n                  className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${\r\n                    shareToDiary ? 'border-blue-500 bg-blue-500' : 'border-gray-300'\r\n                  }`}\r\n                >\r\n                  {shareToDiary && <HiCheck className=\"text-white w-4 h-4\" />}\r\n                </div>\r\n                <span className=\"text-gray-600 font-medium\">Chia sẻ lên nhật ký</span>\r\n              </div>\r\n            </div>\r\n          ) : tabMobile === 'more_actions' ? (\r\n            <div className=\"bg-gray-50 min-h-[50vh] pb-8\">\r\n              {/* Group 1 */}\r\n              <div className=\"bg-white\">\r\n                <button\r\n                  onClick={() => setTabMobile('info')}\r\n                  className=\"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100\"\r\n                >\r\n                  Thông tin\r\n                </button>\r\n                <button\r\n                  onClick={() => avatarInputRef.current?.click()}\r\n                  className=\"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100\"\r\n                >\r\n                  Đổi ảnh đại diện\r\n                </button>\r\n                <button\r\n                  onClick={() => backgroundInputRef.current?.click()}\r\n                  className=\"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100\"\r\n                >\r\n                  Đổi ảnh bìa\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    setTabMobile('edit_intro');\r\n                    setIntroText(displayBio || '');\r\n                  }}\r\n                  className=\"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100\"\r\n                >\r\n                  Cập nhật giới thiệu bản thân\r\n                </button>\r\n                <button\r\n                  onClick={() => alert('Tính năng Ví của tôi đang được phát triển')}\r\n                  className=\"w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 active:bg-gray-100\"\r\n                >\r\n                  Ví của tôi\r\n                </button>\r\n              </div>\r\n\r\n              {/* Spacer */}\r\n              <div className=\"h-2 bg-transparent\"></div>\r\n\r\n              {/* Group 2 */}\r\n              <div className=\"bg-white\">\r\n                <div className=\"px-4 py-3 text-blue-500 font-medium text-sm border-b border-gray-100\">Cài đặt</div>\r\n                <button\r\n                  onClick={() => setTabMobile('qr')}\r\n                  className=\"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100\"\r\n                >\r\n                  Mã QR của tôi\r\n                </button>\r\n                <button\r\n                  onClick={() => setTabMobile('privacy')}\r\n                  className=\"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100\"\r\n                >\r\n                  Quyền riêng tư\r\n                </button>\r\n                <button\r\n                  onClick={() => setTabMobile('settings')}\r\n                  className=\"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 active:bg-gray-100\"\r\n                >\r\n                  Cài đặt chung\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : tabMobile === 'privacy' ? (\r\n            <div className=\"flex flex-col bg-gray-100 min-h-[80vh]\">\r\n              <div className=\"bg-white mb-2 mt-2\">\r\n                <button className=\"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0\">\r\n                  <span className=\"text-base text-gray-800\">Nhật ký</span>\r\n                  <span className=\"text-gray-500 text-sm\">Công khai</span>\r\n                </button>\r\n                <button className=\"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0\">\r\n                  <span className=\"text-base text-gray-800\">Tin nhắn</span>\r\n                  <span className=\"text-gray-500 text-sm\">Mọi người</span>\r\n                </button>\r\n                <button className=\"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0\">\r\n                  <span className=\"text-base text-gray-800\">Sinh nhật</span>\r\n                  <span className=\"text-gray-500 text-sm\">Bạn bè</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : tabMobile === 'account' ? (\r\n            <div className=\"flex flex-col bg-gray-100 min-h-[80vh]\">\r\n              <div className=\"bg-white mb-2 mt-2\">\r\n                <button className=\"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0\">\r\n                  <span className=\"text-base text-gray-800\">Thông tin tài khoản</span>\r\n                  <HiChevronRight className=\"w-5 h-5 text-gray-400\" />\r\n                </button>\r\n                <button className=\"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0\">\r\n                  <span className=\"text-base text-gray-800\">Đổi mật khẩu</span>\r\n                  <HiChevronRight className=\"w-5 h-5 text-gray-400\" />\r\n                </button>\r\n                <button className=\"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0\">\r\n                  <span className=\"text-base text-red-500\">Xóa tài khoản</span>\r\n                  <HiChevronRight className=\"w-5 h-5 text-gray-400\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <ProfileContent\r\n              tab={tabMobile}\r\n              isOwner={!!isOwner}\r\n              overviewData={overviewData}\r\n              handleOverviewData={handleProfileUpdate}\r\n              profileIdForQr={profileIdForQr}\r\n            />\r\n          )}\r\n        </MobileProfileSheet>\r\n      </div>\r\n      <CropImageModal\r\n        open={cropOpen}\r\n        src={cropSrc}\r\n        onClose={() => setCropOpen(false)}\r\n        onConfirm={handleConfirmCrop}\r\n        aspectRatio={cropKind === 'background' ? 16 / 9 : 1}\r\n        circle={cropKind === 'avatar'}\r\n        fileName={cropFileName}\r\n        outputType=\"image/jpeg\"\r\n        quality={0.92}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}