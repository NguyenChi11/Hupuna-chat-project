{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/hooks/%28profile%29/useCurrentUser.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useMemo } from 'react';\r\n\r\nexport function useCurrentUser() {\r\n  const currentUser = useMemo(() => {\r\n    try {\r\n      const raw = typeof window !== 'undefined' ? localStorage.getItem('info_user') : null;\r\n      return raw ? (JSON.parse(raw) as Record<string, unknown>) : null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  }, []);\r\n\r\n  const currentId = useMemo(() => {\r\n    return String(currentUser?.['_id'] || (currentUser?.['username'] as string) || '');\r\n  }, [currentUser]);\r\n\r\n  return { currentUser, currentId };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAIO,SAAS;;IACd,MAAM,cAAc,IAAA,wKAAO;+CAAC;YAC1B,IAAI;gBACF,MAAM,MAAM,uCAAgC,aAAa,OAAO,CAAC,eAAe;gBAChF,OAAO,MAAO,KAAK,KAAK,CAAC,OAAmC;YAC9D,EAAE,OAAM;gBACN,OAAO;YACT;QACF;8CAAG,EAAE;IAEL,MAAM,YAAY,IAAA,wKAAO;6CAAC;YACxB,OAAO,OAAO,aAAa,CAAC,MAAM,IAAK,aAAa,CAAC,WAAW,IAAe;QACjF;4CAAG;QAAC;KAAY;IAEhB,OAAO;QAAE;QAAa;IAAU;AAClC;GAfgB"}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/ComingSoonPage.tsx"],"sourcesContent":["// app/(pages)/coming-soon/page.tsx   (hoặc bất kỳ route nào bạn muốn)\r\n\r\n'use client';\r\n\r\nimport { HiSparkles, HiRocketLaunch, HiClock, HiCheckBadge } from 'react-icons/hi2';\r\n\r\nexport default function ComingSoonPage() {\r\n  return (\r\n    <main className=\"relative h-[100vh] min-h-screen w-full flex items-center justify-center overflow-hidden bg-gradient-to-br from-blue-600 via-blue-500 to-cyan-400\">\r\n      {/* Hiệu ứng nền động */}\r\n      <div className=\"absolute inset-0\">\r\n        <div className=\"absolute top-0 left-0 w-96 h-96 bg-white/10 rounded-full blur-3xl animate-pulse\" />\r\n        <div className=\"absolute bottom-0 right-0 w-96 h-96 bg-cyan-300/20 rounded-full blur-3xl animate-pulse delay-700\" />\r\n        <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-blue-400/20 rounded-full blur-3xl animate-ping\" />\r\n      </div>\r\n\r\n      <div className=\"relative z-10 max-w-4xl mx-auto px-6 text-center\">\r\n        {/* Logo + Tên */}\r\n        \r\n\r\n        {/* Card chính – Glassmorphism đỉnh cao */}\r\n        <div className=\"bg-white/10 backdrop-blur-2xl rounded-3xl shadow-3xl border border-white/20 p-7\">\r\n          <div className=\"flex flex-col items-center\">\r\n            {/* Icon lớn */}\r\n            <div className=\"p-3 bg-white/20 rounded-3xl shadow-2xl mb-4 animate-bounce\">\r\n              <HiRocketLaunch className=\"w-24 h-24 text-white\" />\r\n            </div>\r\n\r\n            {/* Tiêu đề */}\r\n            <h2 className=\"text-xl md:text-6xl font-black text-white mb-6 leading-tight\">\r\n              Đang được\r\n              <br />\r\n              <span className=\"bg-gradient-to-r from-cyan-300 to-white bg-clip-text text-transparent\">hoàn thiện</span>\r\n            </h2>\r\n\r\n        \r\n\r\n            {/* Danh sách tính năng sắp ra mắt */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 w-full mb-12\">\r\n              {[\r\n                { icon: HiSparkles, text: 'Giao diện đẹp như mơ' },\r\n                { icon: HiClock, text: 'Tin nhắn siêu nhanh' },\r\n                { icon: HiCheckBadge, text: 'Bảo mật tuyệt đối' },\r\n              ].map((item, i) => (\r\n                <div\r\n                  key={i}\r\n                  className=\"flex flex-col items-center gap-4 md:p-6 p-1 bg-white/10 rounded-2xl backdrop-blur-xl border border-white/20 hover:scale-105 transition-transform duration-300\"\r\n                >\r\n                  <item.icon className=\"md:w-12 md:h-12 w-8 h-8 text-cyan-300\" />\r\n                  <span className=\"text-white font-semibold text-lg\">{item.text}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Nút hành động */}\r\n            <div className=\"flex flex-col sm:flex-row gap-6 justify-center\">\r\n              <button\r\n                onClick={() => (window.location.href = '/home')}\r\n                className=\"px-6 py-4 bg-gradient-to-r from-blue-600 to-cyan-500 hover:from-blue-700 hover:to-cyan-600 text-white font-bold text-xl rounded-2xl shadow-2xl hover:shadow-3xl transition-all duration-300 active:scale-95 flex items-center justify-center gap-3\"\r\n              >\r\n                <HiRocketLaunch className=\"w-7 h-7 \" />\r\n                Vào ứng dụng ngay\r\n              </button>\r\n\r\n              <button\r\n                onClick={() => alert('Sắp có thông báo khi ra mắt chính thức!')}\r\n                className=\"px-6 py-3 bg-white/20 backdrop-blur-xl border-2 border-white/50 text-white font-bold text-xl rounded-2xl hover:bg-white/30 transition-all duration-300 active:scale-95\"\r\n              >\r\n                Nhận thông báo khi sẵn sàng\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"mt-16 text-white/70 text-sm\">\r\n          <p>© {new Date().getFullYear()} Hupuna – Được xây dựng với tình yêu và công nghệ</p>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,sEAAsE;;;;;;AAItE;AAFA;;;AAIe,SAAS;IACtB,qBACE,6LAAC;QAAK,WAAU;;0BAEd,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;;;;;;;;;;;0BAGjB,6LAAC;gBAAI,WAAU;;kCAKb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CAEb,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,oKAAc;wCAAC,WAAU;;;;;;;;;;;8CAI5B,6LAAC;oCAAG,WAAU;;wCAA+D;sDAE3E,6LAAC;;;;;sDACD,6LAAC;4CAAK,WAAU;sDAAwE;;;;;;;;;;;;8CAM1F,6LAAC;oCAAI,WAAU;8CACZ;wCACC;4CAAE,MAAM,gKAAU;4CAAE,MAAM;wCAAuB;wCACjD;4CAAE,MAAM,6JAAO;4CAAE,MAAM;wCAAsB;wCAC7C;4CAAE,MAAM,kKAAY;4CAAE,MAAM;wCAAoB;qCACjD,CAAC,GAAG,CAAC,CAAC,MAAM,kBACX,6LAAC;4CAEC,WAAU;;8DAEV,6LAAC,KAAK,IAAI;oDAAC,WAAU;;;;;;8DACrB,6LAAC;oDAAK,WAAU;8DAAoC,KAAK,IAAI;;;;;;;2CAJxD;;;;;;;;;;8CAUX,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,SAAS,IAAO,OAAO,QAAQ,CAAC,IAAI,GAAG;4CACvC,WAAU;;8DAEV,6LAAC,oKAAc;oDAAC,WAAU;;;;;;gDAAa;;;;;;;sDAIzC,6LAAC;4CACC,SAAS,IAAM,MAAM;4CACrB,WAAU;sDACX;;;;;;;;;;;;;;;;;;;;;;;kCAQP,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;;gCAAE;gCAAG,IAAI,OAAO,WAAW;gCAAG;;;;;;;;;;;;;;;;;;;;;;;;AAKzC;KA3EwB"}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/app/%28zalo%29/moments/page.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\r\n'use client';\r\n\r\nimport React, { useState, useCallback, useEffect } from 'react';\r\nimport { useCurrentUser } from '@/hooks/(profile)/useCurrentUser';\r\nimport PostComposer from '@/components/(memonts)/PostComposer';\r\nimport PostCard from '@/components/(memonts)/PostCard';\r\nimport ComingSoonPage from '@/components/ComingSoonPage';\r\n\r\nfunction toMegaStream(url: string) {\r\n  return url;\r\n}\r\n\r\n/* ------------------------------ TYPES ------------------------------ */\r\ntype FeedPost = {\r\n  id: string;\r\n  author: { id: string; name: string; avatar?: string };\r\n  content: string;\r\n  images?: string[];\r\n  videos?: string[];\r\n  files?: string[];\r\n  createdAt: number;\r\n  likes: number;\r\n  comments: number;\r\n  liked?: boolean;\r\n};\r\n\r\n/* uploads handled inside PostComposer */\r\n\r\n/* ------------------------------ MAIN PAGE ------------------------------ */\r\nexport default function MomentsPage() {\r\n  const { currentUser, currentId } = useCurrentUser();\r\n\r\n  const authorInfo = currentUser\r\n    ? {\r\n        id: String(currentUser._id || currentUser.username),\r\n        name: String(currentUser.name),\r\n        avatar:\r\n          typeof (currentUser as Record<string, unknown>).avatar === 'string'\r\n            ? toMegaStream(String((currentUser as Record<string, unknown>).avatar))\r\n            : undefined,\r\n      }\r\n    : null;\r\n\r\n  const [posts, setPosts] = useState<FeedPost[]>([]);\r\n  const [skip, setSkip] = useState(0);\r\n  const limit = 20;\r\n\r\n  /* ------------------------------ CREATE POST ------------------------------ */\r\n  const handleCreatePost = async (payload: Omit<FeedPost, 'id' | 'likes' | 'comments' | 'createdAt'>) => {\r\n    const res = await fetch('/api/posts', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        action: 'create',\r\n        data: {\r\n          authorId: payload.author.id,\r\n          authorName: payload.author.name,\r\n          authorAvatar: payload.author.avatar,\r\n          content: payload.content,\r\n          images: payload.images || [],\r\n          videos: payload.videos || [],\r\n          files: payload.files || [],\r\n          visibility: 'public',\r\n        },\r\n      }),\r\n    });\r\n\r\n    const json = await res.json();\r\n\r\n    if (json?._id) {\r\n      setPosts((prev) => [\r\n        {\r\n          id: json._id,\r\n          author: payload.author,\r\n          content: payload.content,\r\n          images: payload.images,\r\n          videos: payload.videos,\r\n          files: payload.files,\r\n          createdAt: Date.now(),\r\n          likes: 0,\r\n          comments: 0,\r\n          liked: false,\r\n        },\r\n        ...prev,\r\n      ]);\r\n    }\r\n  };\r\n\r\n  /* ------------------------------ LIKE POST ------------------------------ */\r\n  const handleLike = async (postId: string) => {\r\n    const post = posts.find((p) => p.id === postId);\r\n    const like = !post?.liked;\r\n\r\n    await fetch('/api/posts', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        action: 'toggleLike',\r\n        postId,\r\n        userId: currentId,\r\n        data: { like },\r\n      }),\r\n    });\r\n\r\n    setPosts((prev) =>\r\n      prev.map((p) => (p.id === postId ? { ...p, liked: like, likes: p.likes + (like ? 1 : -1) } : p)),\r\n    );\r\n  };\r\n\r\n  /* ----------------------------- MAP DB DOC ----------------------------- */\r\n  const mapPostDoc = useCallback(\r\n    (d: {\r\n      _id: string;\r\n      authorId: string;\r\n      authorName?: string;\r\n      authorAvatar?: string;\r\n      content?: string;\r\n      images?: string[];\r\n      videos?: string[];\r\n      files?: string[];\r\n      createdAt?: number;\r\n      likedBy?: string[];\r\n      commentsCount?: number;\r\n    }): FeedPost => ({\r\n      id: String(d._id),\r\n      author: {\r\n        id: String(d.authorId),\r\n        name: d.authorName || '',\r\n        avatar: d.authorAvatar ? toMegaStream(d.authorAvatar) : undefined,\r\n      },\r\n      content: d.content || '',\r\n      images: d.images?.map(toMegaStream) || [],\r\n      videos: d.videos?.map(toMegaStream) || [],\r\n      files: d.files?.map(toMegaStream) || [],\r\n      createdAt: d.createdAt || Date.now(),\r\n      likes: d.likedBy?.length || 0,\r\n      comments: d.commentsCount || 0,\r\n      liked: d.likedBy?.includes(currentId),\r\n    }),\r\n    [currentId],\r\n  );\r\n\r\n  /* ------------------------------ LOAD MORE ------------------------------ */\r\n  const loadPosts = async () => {\r\n    const res = await fetch(`/api/posts?skip=${skip}&limit=${limit}`);\r\n    const json = await res.json();\r\n\r\n    const arr = Array.isArray(json.data) ? json.data.map(mapPostDoc) : [];\r\n\r\n    setPosts((prev) => [...prev, ...arr]);\r\n    setSkip((prev) => prev + arr.length);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadPosts();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  /* ------------------------------ UI ------------------------------ */\r\n  return (\r\n    // <div className=\"h-full overflow-y-auto bg-gradient-to-br from-slate-50 via-white to-indigo-50\">\r\n    //   <div className=\"max-w-2xl mx-auto px-4 py-6 space-y-4 pb-32\">\r\n    //     <PostComposer\r\n    //       onPost={handleCreatePost}\r\n    //       author={\r\n    //         authorInfo ? { ...authorInfo, avatar: authorInfo.avatar ? String(authorInfo.avatar) : undefined } : null\r\n    //       }\r\n    //     />\r\n    //     {posts.map((p) => (\r\n    //       <PostCard key={p.id} post={p} onLike={handleLike} />\r\n    //     ))}\r\n    //   </div>\r\n    // </div>\r\n    <ComingSoonPage />\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}