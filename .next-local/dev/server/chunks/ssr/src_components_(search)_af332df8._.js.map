{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28search%29/RoomSearchResultsModal.tsx"],"sourcesContent":["'use client';\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\n\r\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport Image from 'next/image';\r\nimport { Message } from '@/types/Message';\r\nimport { User } from '@/types/User';\r\nimport type { GlobalSearchMessage } from '@/components/(home)/HomeOverlays';\r\nimport { getProxyUrl, normalizeNoAccent, buildAccentInsensitiveRegex, hasDiacritics, accentAwareIncludes } from '@/utils/utils';\r\nimport { HiArrowLeft, HiPlay, HiXMark } from 'react-icons/hi2';\r\nimport { IoReload, IoReloadCircle } from 'react-icons/io5';\r\n\r\ninterface Props {\r\n  isOpen: boolean;\r\n  roomId: string;\r\n  roomName?: string;\r\n  roomAvatar?: string;\r\n  isGroupChat?: boolean;\r\n  keyword: string;\r\n  allUsers: User[];\r\n  onClose: () => void;\r\n  onNavigateToMessage: (message: GlobalSearchMessage, keyword: string) => void;\r\n  anchorToParent?: boolean;\r\n}\r\n\r\nexport default function RoomSearchResultsModal({\r\n  isOpen,\r\n  roomId,\r\n  roomName,\r\n  roomAvatar,\r\n  isGroupChat = false,\r\n  keyword,\r\n  allUsers,\r\n  onClose,\r\n  onNavigateToMessage,\r\n  anchorToParent = false,\r\n}: Props) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [showLink, setShowLink] = useState(false);\r\n  const [showFile, setShowFile] = useState(false);\r\n  const [senderFilter, setSenderFilter] = useState<string>('');\r\n  const [startDate, setStartDate] = useState<string>('');\r\n  const [endDate, setEndDate] = useState<string>('');\r\n  const listRef = useRef<HTMLDivElement | null>(null);\r\n  const cacheKey = useMemo(() => `__cache_room_results__:${roomId}:${keyword}`, [roomId, keyword]);\r\n  const scrollKey = useMemo(() => `__room_results_scroll__:${roomId}:${keyword}`, [roomId, keyword]);\r\n  const [myId, setMyId] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const raw = localStorage.getItem('info_user');\r\n      if (raw) {\r\n        const user = JSON.parse(raw);\r\n        if (user && user._id) setMyId(String(user._id));\r\n      }\r\n    } catch {}\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    try {\r\n      const isMobile = typeof window !== 'undefined' ? window.innerWidth < 1024 : false;\r\n      if (!isMobile) return;\r\n      localStorage.setItem(\r\n        '__return_room_results__',\r\n        JSON.stringify({\r\n          origin: anchorToParent ? 'sidebar' : 'global',\r\n          roomId,\r\n          roomName,\r\n          roomAvatar,\r\n          isGroupChat,\r\n          keyword,\r\n          ts: Date.now(),\r\n        }),\r\n      );\r\n    } catch {}\r\n  }, [isOpen, roomId, roomName, roomAvatar, isGroupChat, keyword, anchorToParent]);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen || !keyword.trim() || !roomId) {\r\n      setMessages([]);\r\n      return;\r\n    }\r\n    let cancelled = false;\r\n    let fromCache = false;\r\n    try {\r\n      const raw = localStorage.getItem(cacheKey);\r\n      if (raw) {\r\n        const arr = JSON.parse(raw);\r\n        if (Array.isArray(arr)) {\r\n          setMessages(arr as Message[]);\r\n          fromCache = true;\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n    } catch {}\r\n    const run = async () => {\r\n      setIsLoading(!fromCache);\r\n      try {\r\n        const res = await fetch('/api/messages', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            action: 'read',\r\n            filters: {\r\n              roomId,\r\n              searchQuery: keyword.trim(),\r\n              isRecalled: { $ne: true },\r\n              isDeleted: { $ne: true },\r\n              type: { $ne: 'notify' },\r\n            },\r\n            limit: 500,\r\n            sort: { field: 'timestamp', order: 'desc' },\r\n          }),\r\n        });\r\n        const json = await res.json();\r\n        const rows: Message[] = Array.isArray(json?.data) ? (json.data as Message[]) : [];\r\n        if (!cancelled) {\r\n          const term = normalizeNoAccent(keyword);\r\n          const hasDia = hasDiacritics(keyword);\r\n          const filtered = rows.filter((m) => {\r\n            const text =\r\n              m.type === 'file'\r\n                ? String(m.fileName || '')\r\n                : m.type === 'sticker'\r\n                  ? ''\r\n                  : String(m.content || '');\r\n            return accentAwareIncludes(text, keyword);\r\n          });\r\n          const sorted = filtered.slice().sort((a, b) => Number(b.timestamp) - Number(a.timestamp));\r\n          setMessages(sorted);\r\n          try {\r\n            localStorage.setItem(cacheKey, JSON.stringify(sorted));\r\n          } catch {}\r\n        }\r\n      } catch {\r\n        if (!cancelled && !fromCache) setMessages([]);\r\n      } finally {\r\n        if (!cancelled) setIsLoading(false);\r\n      }\r\n    };\r\n    run();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [isOpen, roomId, keyword, cacheKey]);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    try {\r\n      const y = Number(localStorage.getItem(scrollKey) || '0');\r\n      if (listRef.current && y > 0) {\r\n        listRef.current.scrollTop = y;\r\n      }\r\n    } catch {}\r\n  }, [isOpen, scrollKey]);\r\n\r\n  useEffect(() => {\r\n    const el = listRef.current;\r\n    if (!el) return;\r\n    const handler = () => {\r\n      try {\r\n        localStorage.setItem(scrollKey, String(el.scrollTop));\r\n      } catch {}\r\n    };\r\n    el.addEventListener('scroll', handler);\r\n    return () => {\r\n      el.removeEventListener('scroll', handler);\r\n    };\r\n  }, [scrollKey, isOpen]);\r\n\r\n  const hasLink = (m: Message) => {\r\n    const c = String(m.content || '');\r\n    return /(https?:\\/\\/|www\\.)/i.test(c);\r\n  };\r\n\r\n  const isFileLike = (m: Message) => {\r\n    return m.type === 'file' || m.type === 'image' || m.type === 'video';\r\n  };\r\n\r\n  const senderOptions = useMemo(() => {\r\n    const ids = new Set<string>();\r\n    const names = new Map<string, string>();\r\n\r\n    messages.forEach((m) => {\r\n      const id = typeof m.sender === 'object' && m.sender ? String((m.sender as User)._id) : String(m.sender || '');\r\n      if (id) {\r\n        ids.add(id);\r\n        if (typeof m.sender === 'object' && (m.sender as User).name) {\r\n          names.set(id, (m.sender as User).name);\r\n        }\r\n      }\r\n    });\r\n\r\n    const arr = Array.from(ids).map((id) => {\r\n      const u = allUsers.find((x) => String(x._id) === String(id));\r\n      // Prioritize name -> username -> message sender name -> ID\r\n      const name = u?.name || u?.username || names.get(id) || id;\r\n      return { id, name };\r\n    });\r\n    return arr.sort((a, b) => a.name.localeCompare(b.name));\r\n  }, [messages, allUsers]);\r\n\r\n  const filtered = useMemo(() => {\r\n    const arr: Message[] = [];\r\n    const startTs = startDate ? new Date(startDate + 'T00:00:00').getTime() : null;\r\n    const endTs = endDate ? new Date(endDate + 'T23:59:59').getTime() : null;\r\n    messages.forEach((m) => {\r\n      const okLink = showLink ? hasLink(m) : false;\r\n      const okFile = showFile ? isFileLike(m) : false;\r\n      const passType = showLink || showFile ? (showLink && okLink) || (showFile && okFile) : true;\r\n      const sid = typeof m.sender === 'object' && m.sender ? String((m.sender as User)._id) : String(m.sender || '');\r\n      const passSender = senderFilter ? String(sid) === String(senderFilter) : true;\r\n      const ts = Number(m.timestamp || 0);\r\n      const passStart = startTs ? ts >= startTs : true;\r\n      const passEnd = endTs ? ts <= endTs : true;\r\n      if (passType && passSender && passStart && passEnd) arr.push(m);\r\n    });\r\n    return arr;\r\n  }, [messages, showLink, showFile, senderFilter, startDate, endDate]);\r\n\r\n  const groups = useMemo(() => {\r\n    const byKey = new Map<string, Message[]>();\r\n    const now = new Date();\r\n    filtered.forEach((m) => {\r\n      const d = new Date(m.timestamp || 0);\r\n      const sameDay = d.toDateString() === now.toDateString();\r\n      const key = sameDay ? 'Hôm nay' : `Tháng ${d.getMonth() + 1}, ${d.getFullYear()}`;\r\n      if (!byKey.has(key)) byKey.set(key, []);\r\n      byKey.get(key)!.push(m);\r\n    });\r\n    return Array.from(byKey.entries()).map(([label, arr]) => ({\r\n      label,\r\n      items: arr,\r\n      count: arr.length,\r\n    }));\r\n  }, [filtered]);\r\n\r\n  const getSenderAvatar = (senderId: string | User | undefined) => {\r\n    const id = typeof senderId === 'object' && senderId ? (senderId as User)._id : String(senderId || '');\r\n    const u = allUsers.find((x) => String(x._id) === String(id));\r\n    return u?.avatar;\r\n  };\r\n\r\n  const computedRoomAvatar = useMemo(() => {\r\n    if (isGroupChat) return undefined;\r\n    if (roomAvatar) return roomAvatar;\r\n    let partnerId: string | null = null;\r\n    const me = String(myId || '');\r\n    if (roomId && roomId.includes('_')) {\r\n      const parts = roomId.split('_');\r\n      partnerId = parts[0] === me ? parts[1] : parts[1] === me ? parts[0] : null;\r\n    }\r\n    if (!partnerId && messages.length > 0) {\r\n      const other = messages.find((m) => {\r\n        const s = typeof m.sender === 'object' ? (m.sender as User)._id : String(m.sender);\r\n        return s !== me;\r\n      });\r\n      if (other) {\r\n        const s = typeof other.sender === 'object' ? (other.sender as User)._id : String(other.sender);\r\n        partnerId = s;\r\n      }\r\n    }\r\n    const u = partnerId ? allUsers.find((x) => String(x._id) === String(partnerId)) : undefined;\r\n    return u?.avatar;\r\n  }, [isGroupChat, roomAvatar, roomId, myId, messages, allUsers]);\r\n  const headerAvatar = isGroupChat ? roomAvatar : computedRoomAvatar || roomAvatar;\r\n\r\n  const formatTime = (ts: number) => new Date(ts).toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });\r\n\r\n  const highlight = (text: string) => {\r\n    if (!keyword.trim() || !text) return text;\r\n    const re = buildAccentInsensitiveRegex(keyword);\r\n    const parts = String(text).split(re);\r\n    return (\r\n      <span>\r\n        {parts.map((p, i) =>\r\n          re.test(p) ? (\r\n            <span key={i} className=\" text-blue-600 md:text-blue-700 font-semibold rounded\">\r\n              {p}\r\n            </span>\r\n          ) : (\r\n            <span key={i}>{p}</span>\r\n          ),\r\n        )}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div\r\n      className={`${anchorToParent ? 'absolute' : 'fixed'} inset-0 z-[50] flex items-center justify-center bg-black/40 backdrop-blur-sm px-0`}\r\n    >\r\n      <div className=\"bg-white w-full h-full rounded-none shadow-none border-none overflow-hidden flex flex-col\">\r\n        <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-200\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <button onClick={onClose} className=\"p-2 rounded-full hover:bg-gray-100 cursor-pointer\">\r\n              <HiArrowLeft className=\"w-5 h-5 text-gray-700\" />\r\n            </button>\r\n            <div className=\"w-9 h-9 rounded-full overflow-hidden bg-indigo-600 text-white flex items-center justify-center\">\r\n              {headerAvatar ? (\r\n                <Image\r\n                  src={getProxyUrl(headerAvatar)}\r\n                  alt=\"\"\r\n                  width={36}\r\n                  height={36}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              ) : (\r\n                <Image src=\"/logo/avata.webp\" alt=\" \" width={64} height={64} className=\"w-full h-full object-cover\" />\r\n              )}\r\n            </div>\r\n            <div>\r\n              <div className=\"font-semibold text-gray-900 text-sm truncate w-[10rem] md:w-[10rem]\">\r\n                {roomName || 'Cuộc trò chuyện'}\r\n              </div>\r\n              <div className=\"text-xs text-gray-500\">{keyword}</div>\r\n            </div>\r\n          </div>\r\n          <button onClick={onClose} className=\"p-2 rounded-full hover:bg-gray-100 cursor-pointer\">\r\n            <HiXMark className=\"w-5 h-5 text-gray-700\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\" px-4 py-2 space-y-2 border-b border-gray-300\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <button\r\n              onClick={() => setShowLink((v) => !v)}\r\n              className={`px-3 py-1.5 text-sm rounded-full border cursor-pointer ${\r\n                showLink\r\n                  ? 'bg-blue-100 text-blue-700 border-blue-300 hover:bg-blue-200'\r\n                  : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-200'\r\n              }`}\r\n            >\r\n              Link\r\n            </button>\r\n            <button\r\n              onClick={() => setShowFile((v) => !v)}\r\n              className={`px-3 py-1.5 text-sm rounded-full border cursor-pointer ${\r\n                showFile\r\n                  ? 'bg-green-100 text-green-700 border-green-300 hover:bg-green-200'\r\n                  : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-200'\r\n              }`}\r\n            >\r\n              File\r\n            </button>\r\n            <select\r\n              value={senderFilter}\r\n              onChange={(e) => setSenderFilter(e.target.value)}\r\n              className=\"border border-gray-300 rounded-lg px-2 py-1 text-sm cursor-pointer\"\r\n            >\r\n              <option value=\"\">Tất cả</option>\r\n              {senderOptions.map((opt) => (\r\n                <option key={opt.id} value={opt.id}>\r\n                  {opt.name || opt.id}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <div className=\"ml-auto text-xs text-gray-500\">\r\n              {isLoading ? 'Đang tải...' : `${filtered.length} kết quả`}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2 w-full\">\r\n            <input\r\n              type=\"date\"\r\n              value={startDate}\r\n              onChange={(e) => setStartDate(e.target.value)}\r\n              onInput={(e) => setStartDate((e.target as HTMLInputElement).value)}\r\n              placeholder=\"Chọn ngày\"\r\n              className=\"cursor-pointer border border-gray-300 rounded-lg px-2 py-1 text-sm w-1/2\"\r\n            />\r\n            <span className=\"text-gray-500 text-xs\">→</span>\r\n            <input\r\n              type=\"date\"\r\n              value={endDate}\r\n              placeholder=\"Chọn ngày\"\r\n              onChange={(e) => setEndDate(e.target.value)}\r\n              onInput={(e) => setEndDate((e.target as HTMLInputElement).value)}\r\n              className=\" cursor-pointer border border-gray-300 rounded-lg px-2 py-1 text-sm w-1/2\"\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setStartDate('');\r\n                setEndDate('');\r\n              }}\r\n              className=\"ml-auto px-2 py-1 text-xs rounded border border-gray-300 bg-white hover:bg-gray-100 cursor-pointer\"\r\n            >\r\n              <IoReload className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex-1 overflow-y-auto custom-scrollbar\" ref={listRef}>\r\n          {groups.map((g) => (\r\n            <div key={g.label} className=\"px-4 py-3\">\r\n              <div className=\"text-xs font-bold text-gray-600 mb-2\">\r\n                {g.label} ({g.count})\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                {g.items.map((msg) => {\r\n                  const avatar =\r\n                    getSenderAvatar(msg.sender) || (isGroupChat ? undefined : computedRoomAvatar || roomAvatar);\r\n                  const senderId =\r\n                    typeof msg.sender === 'object' && msg.sender ? (msg.sender as User)._id : String(msg.sender);\r\n                  const senderUser = allUsers.find((u) => String(u._id) === String(senderId));\r\n                  const name = senderUser?.name || (typeof msg.sender === 'object' ? (msg.sender as User).name : '');\r\n                  const preview =\r\n                    msg.type === 'file'\r\n                      ? msg.fileName || 'File'\r\n                      : msg.type === 'sticker'\r\n                        ? '[Sticker]'\r\n                        : String(msg.content || '');\r\n                  return (\r\n                    <button\r\n                      key={msg._id}\r\n                      onClick={() => {\r\n                        const senderName =\r\n                          senderUser?.name ||\r\n                          (typeof msg.sender === 'object' && msg.sender ? (msg.sender as User).name : '') ||\r\n                          '';\r\n                        const enriched: GlobalSearchMessage = {\r\n                          _id: msg._id,\r\n                          content: msg.content,\r\n                          type: msg.type as GlobalSearchMessage['type'],\r\n                          fileName: msg.fileName,\r\n                          timestamp: msg.timestamp,\r\n                          sender: senderId,\r\n                          senderName,\r\n                          roomId: msg.roomId,\r\n                          roomName: roomName || '',\r\n                          isGroupChat,\r\n                          fileUrl: msg.fileUrl,\r\n                        };\r\n                        try {\r\n                          localStorage.setItem(\r\n                            '__return_room_results__',\r\n                            JSON.stringify({\r\n                              origin: anchorToParent ? 'sidebar' : 'global',\r\n                              roomId,\r\n                              roomName,\r\n                              roomAvatar,\r\n                              isGroupChat,\r\n                              keyword,\r\n                              ts: Date.now(),\r\n                            }),\r\n                          );\r\n                        } catch {}\r\n                        try {\r\n                          localStorage.setItem(cacheKey, JSON.stringify(messages));\r\n                        } catch {}\r\n                        onNavigateToMessage(enriched, keyword);\r\n                        onClose();\r\n                      }}\r\n                      className=\"cursor-pointer w-full flex items-center gap-3 px-2 py-2 rounded-2xl hover:bg-gray-100 transition-colors text-left\"\r\n                    >\r\n                      <div className=\"w-10 h-10 rounded-full overflow-hidden bg-gray-300 flex items-center justify-center flex-shrink-0\">\r\n                        {avatar ? (\r\n                          <Image\r\n                            src={getProxyUrl(avatar)}\r\n                            alt=\"\"\r\n                            width={40}\r\n                            height={40}\r\n                            className=\"w-full h-full object-cover\"\r\n                          />\r\n                        ) : (\r\n                          <Image\r\n                            src=\"/logo/avata.webp\"\r\n                            alt=\" \"\r\n                            width={64}\r\n                            height={64}\r\n                            className=\"w-full h-full object-cover\"\r\n                          />\r\n                        )}\r\n                      </div>\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <div className=\"flex items-center justify-between gap-2\">\r\n                          <span className=\"font-semibold text-gray-800 text-[1rem] truncate\">{name || roomName}</span>\r\n                          <span className=\"text-sm text-gray-500\">{formatTime(msg.timestamp)}</span>\r\n                        </div>\r\n                        {msg.type === 'image' && msg.fileUrl ? (\r\n                          <div className=\"mt-1\">\r\n                            <Image\r\n                              src={getProxyUrl(String(msg.fileUrl))}\r\n                              alt=\"\"\r\n                              width={320}\r\n                              height={240}\r\n                              className=\"w-10 h-18 rounded-lg object-cover\"\r\n                            />\r\n                          </div>\r\n                        ) : msg.type === 'video' && msg.fileUrl ? (\r\n                          <div className=\"relative rounded-2xl overflow-hidden cursor-pointer shadow-lg max-w-[8vw] sm:max-w-[6rem] aspect-video bg-black\">\r\n                            <video\r\n                              src={getProxyUrl(String(msg.fileUrl))}\r\n                              className=\"w-full h-full object-cover\"\r\n                              muted\r\n                              playsInline\r\n                              loop\r\n                            />\r\n                            <div className=\"absolute inset-0 flex items-center justify-center opacity-100\">\r\n                              <div className=\"w-4 h-4 bg-white/80 rounded-full flex items-center justify-center shadow\">\r\n                                <HiPlay className=\"w-2 h-2 text-blue-600\" />\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        ) : (\r\n                          <p className=\" text-gray-700 line-clamp-2\">{highlight(preview)}</p>\r\n                        )}\r\n                      </div>\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          ))}\r\n          {!isLoading && filtered.length === 0 && (\r\n            <div className=\"h-full flex items-center justify-center px-6\">\r\n              <div className=\"text-center\">\r\n                <div className=\"w-12 h-12 rounded-full bg-gray-100 mx-auto mb-3\" />\r\n                <div className=\"text-sm text-gray-500\">Không tìm thấy tin nhắn phù hợp</div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 809, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28search%29/SearchHeader.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\n\r\ninterface SearchHeaderProps {\r\n  searchTerm: string;\r\n  onSearch: (term: string) => void;\r\n  onClose: () => void;\r\n  isSearching: boolean;\r\n  onSearchingChange: (searching: boolean) => void;\r\n}\r\n\r\nexport default function SearchHeader({\r\n  searchTerm,\r\n  onSearch,\r\n  onClose,\r\n  isSearching,\r\n  onSearchingChange,\r\n}: SearchHeaderProps) {\r\n  const [localSearchTerm, setLocalSearchTerm] = useState(searchTerm);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const debounceRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  useEffect(() => {\r\n    inputRef.current?.focus();\r\n  }, []);\r\n\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const term = e.target.value;\r\n    setLocalSearchTerm(term);\r\n\r\n    if (debounceRef.current) clearTimeout(debounceRef.current);\r\n\r\n    if (!term.trim()) {\r\n      onSearch('');\r\n      onSearchingChange(false);\r\n      return;\r\n    }\r\n\r\n    onSearchingChange(true);\r\n    debounceRef.current = setTimeout(() => {\r\n      onSearch(term);\r\n      onSearchingChange(false);\r\n    }, 400);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex-none px-4 pt-3 pb-2 bg-[#f3f6fb]\">\r\n      <div className=\"flex items-center justify-between mb-3\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-8 h-8 rounded-full bg-[#0088ff] flex items-center justify-center shadow-sm\">\r\n            <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n              />\r\n            </svg>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-sm font-semibold text-gray-800\">Tìm kiếm</p>\r\n            <p className=\"text-xs text-gray-500\">Nhập từ khóa để tìm trong toàn bộ Zalo</p>\r\n          </div>\r\n        </div>\r\n        <button\r\n          onClick={onClose}\r\n          className=\"w-8 h-8 cursor-pointer flex items-center justify-center rounded-full text-gray-500 hover:bg-gray-200 hover:text-gray-700 transition-colors\"\r\n        >\r\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"relative\">\r\n        <svg\r\n          className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n          />\r\n        </svg>\r\n        <input\r\n          ref={inputRef}\r\n          type=\"text\"\r\n          placeholder=\"Tìm kiếm tin nhắn, file, liên hệ...\"\r\n          value={localSearchTerm}\r\n          onChange={handleSearchChange}\r\n          className=\"w-full h-9 pl-9 pr-9 rounded-full bg-white border border-gray-200 text-sm outline-none focus:border-[#0088ff] focus:ring-1 focus:ring-[#0088ff]/40 transition-all placeholder:text-gray-400\"\r\n        />\r\n        {localSearchTerm && (\r\n          <button\r\n            onClick={() => {\r\n              setLocalSearchTerm('');\r\n              onSearch('');\r\n            }}\r\n            className=\"absolute cursor-pointer right-2.5 top-1/2 -translate-y-1/2 w-5 h-5 flex items-center justify-center rounded-full bg-gray-200 hover:bg-gray-300 transition-colors\"\r\n          >\r\n            <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        )}\r\n      </div>\r\n      {isSearching && (\r\n        <div className=\"flex items-center justify-center py-2 mt-2\">\r\n          <div className=\"w-4 h-4 border-[0.125rem] border-blue-600 border-t-transparent rounded-full animate-spin\" />\r\n          <span className=\"ml-2 text-xs text-gray-600\">Đang tìm kiếm...</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAUe,SAAS,aAAa,EACnC,UAAU,EACV,QAAQ,EACR,OAAO,EACP,WAAW,EACX,iBAAiB,EACC;IAClB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,WAAW,IAAA,+MAAM,EAAmB;IAC1C,MAAM,cAAc,IAAA,+MAAM,EAAwB;IAElD,IAAA,kNAAS,EAAC;QACR,SAAS,OAAO,EAAE;IACpB,GAAG,EAAE;IAEL,MAAM,qBAAqB,CAAC;QAC1B,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK;QAC3B,mBAAmB;QAEnB,IAAI,YAAY,OAAO,EAAE,aAAa,YAAY,OAAO;QAEzD,IAAI,CAAC,KAAK,IAAI,IAAI;YAChB,SAAS;YACT,kBAAkB;YAClB;QACF;QAEA,kBAAkB;QAClB,YAAY,OAAO,GAAG,WAAW;YAC/B,SAAS;YACT,kBAAkB;QACpB,GAAG;IACL;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;oCAAqB,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CAC5E,cAAA,8OAAC;wCACC,eAAc;wCACd,gBAAe;wCACf,aAAa;wCACb,GAAE;;;;;;;;;;;;;;;;0CAIR,8OAAC;;kDACC,8OAAC;wCAAE,WAAU;kDAAsC;;;;;;kDACnD,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;;;;;;;;kCAGzC,8OAAC;wBACC,SAAS;wBACT,WAAU;kCAEV,cAAA,8OAAC;4BAAI,WAAU;4BAAU,MAAK;4BAAO,QAAO;4BAAe,SAAQ;sCACjE,cAAA,8OAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,aAAa;gCAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;0BAK3E,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,WAAU;wBACV,MAAK;wBACL,QAAO;wBACP,SAAQ;kCAER,cAAA,8OAAC;4BACC,eAAc;4BACd,gBAAe;4BACf,aAAa;4BACb,GAAE;;;;;;;;;;;kCAGN,8OAAC;wBACC,KAAK;wBACL,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU;wBACV,WAAU;;;;;;oBAEX,iCACC,8OAAC;wBACC,SAAS;4BACP,mBAAmB;4BACnB,SAAS;wBACX;wBACA,WAAU;kCAEV,cAAA,8OAAC;4BAAI,WAAU;4BAAU,MAAK;4BAAO,QAAO;4BAAe,SAAQ;sCACjE,cAAA,8OAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,aAAa;gCAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;YAK5E,6BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAK,WAAU;kCAA6B;;;;;;;;;;;;;;;;;;AAKvD"}},
    {"offset": {"line": 1046, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28search%29/SearchTabs.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ntype TabKey = 'all' | 'contacts' | 'messages' | 'files';\r\n\r\ninterface Tab {\r\n  key: TabKey;\r\n  label: string;\r\n  count: number;\r\n}\r\n\r\ninterface SearchTabsProps {\r\n  activeTab: TabKey;\r\n  tabs: Tab[];\r\n  onTabChange: (key: TabKey) => void;\r\n  searchTerm: string;\r\n}\r\n\r\nexport default function SearchTabs({ activeTab, tabs, onTabChange, searchTerm }: SearchTabsProps) {\r\n  return (\r\n    <div className=\"flex bg-white px-2\">\r\n      {tabs.map((tab) => (\r\n        <button\r\n          key={tab.key}\r\n          onClick={() => onTabChange(tab.key)}\r\n          className={`flex-1 px-3 cursor-pointer py-2 text-xs font-medium relative transition-colors ${\r\n            activeTab === tab.key ? 'text-[#0088ff]' : 'text-gray-600 hover:text-gray-800 hover:bg-gray-50'\r\n          }`}\r\n        >\r\n          {tab.label}\r\n          {tab.count > 0 && searchTerm && (\r\n            <span\r\n              className={`ml-2 px-2 py-0.5 text-[0.6875rem] rounded-full ${\r\n                activeTab === tab.key ? 'bg-[#e3f2ff] text-[#0088ff]' : 'bg-gray-100 text-gray-600'\r\n              }`}\r\n            >\r\n              {tab.count > 99 ? '99+' : tab.count}\r\n            </span>\r\n          )}\r\n          {activeTab === tab.key && (\r\n            <div className=\"absolute bottom-0 left-3 right-3 h-0.5 rounded-full bg-[#0088ff]\" />\r\n          )}\r\n        </button>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAiBe,SAAS,WAAW,EAAE,SAAS,EAAE,IAAI,EAAE,WAAW,EAAE,UAAU,EAAmB;IAC9F,qBACE,8OAAC;QAAI,WAAU;kBACZ,KAAK,GAAG,CAAC,CAAC,oBACT,8OAAC;gBAEC,SAAS,IAAM,YAAY,IAAI,GAAG;gBAClC,WAAW,CAAC,+EAA+E,EACzF,cAAc,IAAI,GAAG,GAAG,mBAAmB,sDAC3C;;oBAED,IAAI,KAAK;oBACT,IAAI,KAAK,GAAG,KAAK,4BAChB,8OAAC;wBACC,WAAW,CAAC,+CAA+C,EACzD,cAAc,IAAI,GAAG,GAAG,gCAAgC,6BACxD;kCAED,IAAI,KAAK,GAAG,KAAK,QAAQ,IAAI,KAAK;;;;;;oBAGtC,cAAc,IAAI,GAAG,kBACpB,8OAAC;wBAAI,WAAU;;;;;;;eAjBZ,IAAI,GAAG;;;;;;;;;;AAuBtB"}},
    {"offset": {"line": 1091, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28search%29/ContactResults.tsx"],"sourcesContent":["import Image from 'next/image';\r\nimport React from 'react';\r\nimport { buildAccentInsensitiveRegex } from '@/utils/utils';\r\n\r\ninterface PhonebookContact {\r\n  _id: string;\r\n  name: string;\r\n  avatar?: string;\r\n  isGroup?: boolean;\r\n}\r\n\r\ninterface HighlightTextProps {\r\n  text: string;\r\n  keyword: string;\r\n}\r\n\r\nfunction HighlightText({ text, keyword }: HighlightTextProps) {\r\n  if (!keyword.trim() || !text) return <>{text}</>;\r\n  const regex = buildAccentInsensitiveRegex(keyword);\r\n  const parts = text.split(regex);\r\n  return (\r\n    <>\r\n      {parts.map((part, i) =>\r\n        regex.test(part) ? (\r\n          <mark key={i} className=\"bg-yellow-200 text-yellow-900 px-0.5 rounded font-medium\">\r\n            {part}\r\n          </mark>\r\n        ) : (\r\n          <span key={i}>{part}</span>\r\n        ),\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\ninterface ContactResultsProps {\r\n  contacts: PhonebookContact[];\r\n  searchTerm: string;\r\n  onSelectContact: (phonebook: PhonebookContact) => void;\r\n}\r\n\r\nexport default function ContactResults({ contacts, searchTerm, onSelectContact }: ContactResultsProps) {\r\n  if (contacts.length === 0) return null;\r\n\r\n  return (\r\n    <section>\r\n      <h4 className=\"font-semibold text-gray-700 mb-3 flex items-center gap-2 text-sm uppercase tracking-wide\">\r\n        <div className=\"w-1 h-4 bg-blue-500 rounded-full\" />\r\n        Liên hệ\r\n        <span className=\"text-xs text-gray-500 font-normal\">({contacts.length})</span>\r\n      </h4>\r\n      <div className=\"space-y-1\">\r\n        {contacts.map((phonebook) => (\r\n          <div\r\n            key={phonebook._id}\r\n            onClick={() => onSelectContact(phonebook)}\r\n            className=\"flex items-center p-3 rounded-xl hover:bg-blue-50 cursor-pointer transition-all group\"\r\n          >\r\n            <div className=\"relative\">\r\n              <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-lg overflow-hidden\">\r\n                {phonebook.avatar ? (\r\n                  <Image src={phonebook.avatar} className=\"w-full h-full object-cover\" alt=\"\" />\r\n                ) : (\r\n                  phonebook.name?.charAt(0).toUpperCase()\r\n                )}\r\n              </div>\r\n              {phonebook.isGroup && (\r\n                <div className=\"absolute -bottom-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center\">\r\n                  <svg className=\"w-3 h-3 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path d=\"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z\" />\r\n                  </svg>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0 ml-3\">\r\n              <p className=\"font-medium text-gray-800 truncate\">\r\n                <HighlightText text={phonebook.name} keyword={searchTerm} />\r\n              </p>\r\n              <p className=\"text-xs text-gray-500 flex items-center gap-1\">{phonebook.isGroup ? 'Nhóm' : 'Liên hệ'}</p>\r\n            </div>\r\n            <svg\r\n              className=\"w-5 h-5 text-gray-400 group-hover:text-blue-500 transition-colors\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n            </svg>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAcA,SAAS,cAAc,EAAE,IAAI,EAAE,OAAO,EAAsB;IAC1D,IAAI,CAAC,QAAQ,IAAI,MAAM,CAAC,MAAM,qBAAO;kBAAG;;IACxC,MAAM,QAAQ,IAAA,oJAA2B,EAAC;IAC1C,MAAM,QAAQ,KAAK,KAAK,CAAC;IACzB,qBACE;kBACG,MAAM,GAAG,CAAC,CAAC,MAAM,IAChB,MAAM,IAAI,CAAC,sBACT,8OAAC;gBAAa,WAAU;0BACrB;eADQ;;;;qCAIX,8OAAC;0BAAc;eAAJ;;;;;;AAKrB;AAQe,SAAS,eAAe,EAAE,QAAQ,EAAE,UAAU,EAAE,eAAe,EAAuB;IACnG,IAAI,SAAS,MAAM,KAAK,GAAG,OAAO;IAElC,qBACE,8OAAC;;0BACC,8OAAC;gBAAG,WAAU;;kCACZ,8OAAC;wBAAI,WAAU;;;;;;oBAAqC;kCAEpD,8OAAC;wBAAK,WAAU;;4BAAoC;4BAAE,SAAS,MAAM;4BAAC;;;;;;;;;;;;;0BAExE,8OAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAC,0BACb,8OAAC;wBAEC,SAAS,IAAM,gBAAgB;wBAC/B,WAAU;;0CAEV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACZ,UAAU,MAAM,iBACf,8OAAC,wIAAK;4CAAC,KAAK,UAAU,MAAM;4CAAE,WAAU;4CAA6B,KAAI;;;;;mDAEzE,UAAU,IAAI,EAAE,OAAO,GAAG;;;;;;oCAG7B,UAAU,OAAO,kBAChB,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC;4CAAI,WAAU;4CAAqB,MAAK;4CAAe,SAAQ;sDAC9D,cAAA,8OAAC;gDAAK,GAAE;;;;;;;;;;;;;;;;;;;;;;0CAKhB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDACX,cAAA,8OAAC;4CAAc,MAAM,UAAU,IAAI;4CAAE,SAAS;;;;;;;;;;;kDAEhD,8OAAC;wCAAE,WAAU;kDAAiD,UAAU,OAAO,GAAG,SAAS;;;;;;;;;;;;0CAE7F,8OAAC;gCACC,WAAU;gCACV,MAAK;gCACL,QAAO;gCACP,SAAQ;0CAER,cAAA,8OAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAG,GAAE;;;;;;;;;;;;uBAhClE,UAAU,GAAG;;;;;;;;;;;;;;;;AAuC9B"}},
    {"offset": {"line": 1285, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28search%29/MessageResults.tsx"],"sourcesContent":["import Image from 'next/image';\r\nimport React from 'react';\r\nimport { buildAccentInsensitiveRegex } from '@/utils/utils';\r\n\r\ninterface Message {\r\n  _id: string;\r\n  content?: string;\r\n  type: 'text' | 'image' | 'file' | 'sticker' | 'video' | 'reminder';\r\n  fileName?: string;\r\n  timestamp: number;\r\n  sender: string;\r\n  senderName: string;\r\n  roomId: string;\r\n  roomName: string;\r\n  isGroupChat: boolean;\r\n  partnerId?: string;\r\n  partnerName?: string;\r\n  fileUrl?: string;\r\n}\r\n\r\ninterface User {\r\n  _id: string;\r\n  name: string;\r\n  avatar?: string;\r\n}\r\n\r\ninterface GroupedMessages {\r\n  roomId: string;\r\n  roomName: string;\r\n  roomAvatar?: string;\r\n  isGroupChat: boolean;\r\n  partnerId?: string;\r\n  messages: Message[];\r\n  latestTimestamp: number;\r\n}\r\n\r\ninterface HighlightTextProps {\r\n  text: string;\r\n  keyword: string;\r\n}\r\n\r\nfunction HighlightText({ text, keyword }: HighlightTextProps) {\r\n  if (!keyword.trim() || !text) return <>{text}</>;\r\n  const regex = buildAccentInsensitiveRegex(keyword);\r\n  const parts = text.split(regex);\r\n  return (\r\n    <>\r\n      {parts.map((part, i) =>\r\n        regex.test(part) ? (\r\n          <mark key={i} className=\"bg-yellow-200 text-yellow-900 px-0.5 rounded font-medium\">\r\n            {part}\r\n          </mark>\r\n        ) : (\r\n          <span key={i}>{part}</span>\r\n        ),\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction formatTime(timestamp: number) {\r\n  const date = new Date(timestamp);\r\n  const now = new Date();\r\n  const diff = now.getTime() - date.getTime();\r\n  const days = Math.floor(diff / (1000 * 60 * 60 * 24));\r\n\r\n  if (days === 0) return date.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });\r\n  if (days === 1) return 'Hôm qua';\r\n  if (days < 7) return `${days} ngày trước`;\r\n  return date.toLocaleDateString('vi-VN');\r\n}\r\n\r\nfunction getContentPreview(msg: Message) {\r\n  if (msg.type === 'file' && msg.fileName) return msg.fileName;\r\n  if (msg.type === 'image') return '[Hình ảnh]';\r\n  if (msg.type === 'sticker') return '[Sticker]';\r\n  return msg.content || 'Tin nhắn';\r\n}\r\n\r\nfunction MessageIcon({ type }: { type: Message['type'] }) {\r\n  const icons = {\r\n    image: (\r\n      <svg className=\"w-4 h-4 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n        <path\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth={2}\r\n          d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\r\n        />\r\n      </svg>\r\n    ),\r\n    file: (\r\n      <svg className=\"w-4 h-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n        <path\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth={2}\r\n          d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\r\n        />\r\n      </svg>\r\n    ),\r\n    video: (\r\n      <svg className=\"w-4 h-4 text-red-500\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n        <path d=\"M4 5a3 3 0 00-3 3v8a3 3 0 003 3h10a3 3 0 003-3V8a3 3 0 00-3-3H4zm15.553 3.106l3.502-1.946A1 1 0 0124 7.06v9.88a1 1 0 01-.945.997l-3.502-1.946A2 2 0 0018 14.24V9.76a2 2 0 001.553-1.654z\" />\r\n      </svg>\r\n    ),\r\n    text: (\r\n      <svg className=\"w-4 h-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n        <path\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth={2}\r\n          d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\r\n        />\r\n      </svg>\r\n    ),\r\n    sticker: (\r\n      <svg className=\"w-4 h-4 text-purple-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n        <path\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          strokeWidth={2}\r\n          d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n        />\r\n      </svg>\r\n    ),\r\n    reminder: (\r\n      <svg className=\"w-4 h-4 text-amber-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3M12 22a10 10 0 100-20 10 10 0 000 20z\" />\r\n      </svg>\r\n    ),\r\n  };\r\n  return icons[type] || icons.text;\r\n}\r\n\r\ninterface MessageResultsProps {\r\n  groupedMessages: GroupedMessages[];\r\n  searchTerm: string;\r\n  allUsers: User[];\r\n  onNavigateToMessage: (message: Message) => void;\r\n  onOpenRoomResults?: (roomId: string, roomName: string, isGroupChat: boolean, roomAvatar?: string) => void;\r\n}\r\n\r\nexport default function MessageResults({\r\n  groupedMessages,\r\n  searchTerm,\r\n  onNavigateToMessage,\r\n  onOpenRoomResults,\r\n}: MessageResultsProps) {\r\n  if (groupedMessages.length === 0) return null;\r\n\r\n  return (\r\n    <section>\r\n      <h4 className=\"font-semibold text-gray-700 mb-3 flex items-center gap-2 text-sm uppercase tracking-wide\">\r\n        <div className=\"w-1 h-4 bg-green-500 rounded-full\" />\r\n        Tin nhắn\r\n        <span className=\"text-xs text-gray-500 font-normal\">({groupedMessages.length} cuộc trò chuyện)</span>\r\n      </h4>\r\n      <div className=\"space-y-3\">\r\n        {groupedMessages.map((group) => (\r\n          <div\r\n            key={group.roomId}\r\n            className=\"border border-gray-200 rounded-xl overflow-hidden hover:border-blue-300 transition-all bg-white shadow-sm\"\r\n          >\r\n            <div className=\"bg-gradient-to-r from-gray-50 to-white p-3 border-b flex items-center gap-3\">\r\n              <div className=\"relative\">\r\n                <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center text-white font-bold overflow-hidden\">\r\n                  {group.roomAvatar ? (\r\n                    <Image\r\n                      width={40}\r\n                      height={40}\r\n                      src={group.roomAvatar}\r\n                      className=\"w-full h-full object-cover\"\r\n                      alt=\"\"\r\n                      unoptimized={String(group.roomAvatar).includes('mega.nz')}\r\n                    />\r\n                  ) : (\r\n                    group.roomName.charAt(0).toUpperCase()\r\n                  )}\r\n                </div>\r\n                {group.isGroupChat && (\r\n                  <div className=\"absolute -bottom-1 -right-1 w-4 h-4 bg-purple-500 rounded-full flex items-center justify-center border border-white\">\r\n                    <svg className=\"w-2.5 h-2.5 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path d=\"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z\" />\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"font-semibold text-gray-800 truncate text-sm\">{group.roomName}</p>\r\n                <p className=\"text-xs text-gray-500\">\r\n                  {group.isGroupChat ? '📱 Nhóm' : '💬 Chat'} • {group.messages.length} tin nhắn\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"divide-y divide-gray-100\">\r\n              {group.messages.slice(0, 3).map((msg) => (\r\n                <div\r\n                  key={msg._id}\r\n                  onClick={() => onNavigateToMessage(msg)}\r\n                  className=\"p-3 hover:bg-blue-50 cursor-pointer transition-colors\"\r\n                >\r\n                  <div className=\"flex items-start gap-2\">\r\n                    <div className=\"mt-0.5\">\r\n                      <MessageIcon type={msg.type} />\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex items-center gap-2 mb-1\">\r\n                        <span className=\"text-xs font-medium text-gray-600\">{msg.senderName}</span>\r\n                        <span className=\"text-xs text-gray-400\">{formatTime(msg.timestamp)}</span>\r\n                      </div>\r\n                      <p className=\"text-sm text-gray-700 line-clamp-2\">\r\n                        <HighlightText text={getContentPreview(msg)} keyword={searchTerm} />\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {group.messages.length > 3 && (\r\n              <div className=\"p-2 bg-gray-50 text-center border-t\">\r\n                <button\r\n                  onClick={() => {\r\n                    if (onOpenRoomResults) {\r\n                      onOpenRoomResults(group.roomId, group.roomName, group.isGroupChat, group.roomAvatar);\r\n                    } else {\r\n                      onNavigateToMessage(group.messages[0]);\r\n                    }\r\n                  }}\r\n                  className=\"text-xs cursor-pointer text-blue-600 hover:text-blue-700 font-medium\"\r\n                >\r\n                  Xem thêm {group.messages.length - 3} tin nhắn\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1721, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28search%29/FileResults.tsx"],"sourcesContent":["import { getProxyUrl, buildAccentInsensitiveRegex } from '@/utils/utils';\r\nimport Image from 'next/image';\r\nimport React from 'react';\r\n\r\ninterface Message {\r\n  _id: string;\r\n  content?: string;\r\n  type: 'text' | 'image' | 'file' | 'sticker' | 'video' | 'reminder';\r\n  fileName?: string;\r\n  timestamp: number;\r\n  sender: string;\r\n  senderName: string;\r\n  roomId: string;\r\n  roomName: string;\r\n  isGroupChat: boolean;\r\n  partnerId?: string;\r\n  partnerName?: string;\r\n  fileUrl?: string;\r\n}\r\n\r\ninterface GroupedFiles {\r\n  roomId: string;\r\n  roomName: string;\r\n  roomAvatar?: string;\r\n  isGroupChat: boolean;\r\n  files: Message[];\r\n  latestTimestamp: number;\r\n}\r\n\r\ninterface HighlightTextProps {\r\n  text: string;\r\n  keyword: string;\r\n}\r\n\r\nfunction HighlightText({ text, keyword }: HighlightTextProps) {\r\n  if (!keyword.trim() || !text) return <>{text}</>;\r\n  const regex = buildAccentInsensitiveRegex(keyword);\r\n  const parts = text.split(regex);\r\n  return (\r\n    <>\r\n      {parts.map((part, i) =>\r\n        regex.test(part) ? (\r\n          <mark key={i} className=\"bg-yellow-200 text-yellow-900 px-0.5 rounded font-medium\">\r\n            {part}\r\n          </mark>\r\n        ) : (\r\n          <span key={i}>{part}</span>\r\n        ),\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction formatTime(timestamp: number) {\r\n  const date = new Date(timestamp);\r\n  const now = new Date();\r\n  const diff = now.getTime() - date.getTime();\r\n  const days = Math.floor(diff / (1000 * 60 * 60 * 24));\r\n\r\n  if (days === 0) return date.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });\r\n  if (days === 1) return 'Hôm qua';\r\n  if (days < 7) return `${days} ngày trước`;\r\n  return date.toLocaleDateString('vi-VN');\r\n}\r\n\r\ninterface FileResultsProps {\r\n  groupedFiles: GroupedFiles[];\r\n  searchTerm: string;\r\n  onNavigateToMessage: (message: Message) => void;\r\n}\r\n\r\nexport default function FileResults({ groupedFiles, searchTerm, onNavigateToMessage }: FileResultsProps) {\r\n  if (groupedFiles.length === 0) return null;\r\n\r\n  return (\r\n    <section>\r\n      <h4 className=\"font-semibold text-gray-700 mb-3 flex items-center gap-2 text-sm uppercase tracking-wide\">\r\n        <div className=\"w-1 h-4 bg-orange-500 rounded-full\" />\r\n        File\r\n        <span className=\"text-xs text-gray-500 font-normal\">\r\n          ({groupedFiles.reduce((sum, g) => sum + g.files.length, 0)} file)\r\n        </span>\r\n      </h4>\r\n      <div className=\"space-y-3\">\r\n        {groupedFiles.map((group) => (\r\n          <div\r\n            key={group.roomId}\r\n            className=\"border border-gray-200 rounded-xl overflow-hidden hover:border-orange-300 transition-all bg-white shadow-sm\"\r\n          >\r\n            <div className=\"bg-gradient-to-r from-orange-50 to-white p-3 border-b flex items-center gap-3\">\r\n              <div className=\"relative\">\r\n                <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center text-white font-bold overflow-hidden\">\r\n                  {group.roomAvatar ? (\r\n                    <Image\r\n                      width={40}\r\n                      height={40}\r\n                      src={group.roomAvatar}\r\n                      className=\"w-full h-full object-cover\"\r\n                      alt=\"\"\r\n                    />\r\n                  ) : (\r\n                    group.roomName.charAt(0).toUpperCase()\r\n                  )}\r\n                </div>\r\n                {group.isGroupChat && (\r\n                  <div className=\"absolute -bottom-1 -right-1 w-4 h-4 bg-orange-500 rounded-full flex items-center justify-center border border-white\">\r\n                    <svg className=\"w-2.5 h-2.5 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path d=\"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z\" />\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"font-semibold text-gray-800 truncate text-sm\">{group.roomName}</p>\r\n                <p className=\"text-xs text-gray-500\">\r\n                  {group.isGroupChat ? '📱 Nhóm' : '💬 Chat'} • {group.files.length} file\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"divide-y divide-gray-100\">\r\n              {group.files.slice(0, 3).map((file) => (\r\n                <div\r\n                  key={file._id}\r\n                  onClick={() => onNavigateToMessage(file)}\r\n                  className=\"p-3 hover:bg-orange-50 cursor-pointer transition-colors\"\r\n                >\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"flex-shrink-0\">\r\n                      {file.type === 'image' ? (\r\n                        <div className=\"w-12 h-12 rounded-lg overflow-hidden bg-gray-100\">\r\n                          <Image\r\n                            src={getProxyUrl(file.fileUrl)}\r\n                            width={48}\r\n                            height={48}\r\n                            alt={file.fileName || 'File'}\r\n                            className=\"w-full h-full object-cover\"\r\n                            onError={(e) => {\r\n                              (e.target as HTMLImageElement).src =\r\n                                'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"%3E%3Crect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"%3E%3C/rect%3E%3Ccircle cx=\"8.5\" cy=\"8.5\" r=\"1.5\"%3E%3C/circle%3E%3Cpolyline points=\"21 15 16 10 5 21\"%3E%3C/polyline%3E%3C/svg%3E';\r\n                            }}\r\n                          />\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center\">\r\n                          <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path\r\n                              strokeLinecap=\"round\"\r\n                              strokeLinejoin=\"round\"\r\n                              strokeWidth={2}\r\n                              d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\r\n                            />\r\n                          </svg>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p className=\"font-medium text-gray-800 truncate text-sm\">\r\n                        <HighlightText text={file.fileName || 'File'} keyword={searchTerm} />\r\n                      </p>\r\n                      <p className=\"text-xs text-gray-500 flex items-center gap-2\">\r\n                        <span>{file.senderName}</span>\r\n                        <span>•</span>\r\n                        <span>{formatTime(file.timestamp)}</span>\r\n                      </p>\r\n                    </div>\r\n                    <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                        strokeWidth={2}\r\n                        d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"\r\n                      />\r\n                    </svg>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {group.files.length > 3 && (\r\n              <div className=\"p-2 bg-orange-50 text-center border-t\">\r\n                <button\r\n                  onClick={() => onNavigateToMessage(group.files[0])}\r\n                  className=\"text-xs cursor-pointer text-orange-600 hover:text-orange-700 font-medium\"\r\n                >\r\n                  Xem thêm {group.files.length - 3} file\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAiCA,SAAS,cAAc,EAAE,IAAI,EAAE,OAAO,EAAsB;IAC1D,IAAI,CAAC,QAAQ,IAAI,MAAM,CAAC,MAAM,qBAAO;kBAAG;;IACxC,MAAM,QAAQ,IAAA,oJAA2B,EAAC;IAC1C,MAAM,QAAQ,KAAK,KAAK,CAAC;IACzB,qBACE;kBACG,MAAM,GAAG,CAAC,CAAC,MAAM,IAChB,MAAM,IAAI,CAAC,sBACT,8OAAC;gBAAa,WAAU;0BACrB;eADQ;;;;qCAIX,8OAAC;0BAAc;eAAJ;;;;;;AAKrB;AAEA,SAAS,WAAW,SAAiB;IACnC,MAAM,OAAO,IAAI,KAAK;IACtB,MAAM,MAAM,IAAI;IAChB,MAAM,OAAO,IAAI,OAAO,KAAK,KAAK,OAAO;IACzC,MAAM,OAAO,KAAK,KAAK,CAAC,OAAO,CAAC,OAAO,KAAK,KAAK,EAAE;IAEnD,IAAI,SAAS,GAAG,OAAO,KAAK,kBAAkB,CAAC,SAAS;QAAE,MAAM;QAAW,QAAQ;IAAU;IAC7F,IAAI,SAAS,GAAG,OAAO;IACvB,IAAI,OAAO,GAAG,OAAO,GAAG,KAAK,WAAW,CAAC;IACzC,OAAO,KAAK,kBAAkB,CAAC;AACjC;AAQe,SAAS,YAAY,EAAE,YAAY,EAAE,UAAU,EAAE,mBAAmB,EAAoB;IACrG,IAAI,aAAa,MAAM,KAAK,GAAG,OAAO;IAEtC,qBACE,8OAAC;;0BACC,8OAAC;gBAAG,WAAU;;kCACZ,8OAAC;wBAAI,WAAU;;;;;;oBAAuC;kCAEtD,8OAAC;wBAAK,WAAU;;4BAAoC;4BAChD,aAAa,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,KAAK,CAAC,MAAM,EAAE;4BAAG;;;;;;;;;;;;;0BAG/D,8OAAC;gBAAI,WAAU;0BACZ,aAAa,GAAG,CAAC,CAAC,sBACjB,8OAAC;wBAEC,WAAU;;0CAEV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACZ,MAAM,UAAU,iBACf,8OAAC,wIAAK;oDACJ,OAAO;oDACP,QAAQ;oDACR,KAAK,MAAM,UAAU;oDACrB,WAAU;oDACV,KAAI;;;;;2DAGN,MAAM,QAAQ,CAAC,MAAM,CAAC,GAAG,WAAW;;;;;;4CAGvC,MAAM,WAAW,kBAChB,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;oDAAI,WAAU;oDAAyB,MAAK;oDAAe,SAAQ;8DAClE,cAAA,8OAAC;wDAAK,GAAE;;;;;;;;;;;;;;;;;;;;;;kDAKhB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAgD,MAAM,QAAQ;;;;;;0DAC3E,8OAAC;gDAAE,WAAU;;oDACV,MAAM,WAAW,GAAG,YAAY;oDAAU;oDAAI,MAAM,KAAK,CAAC,MAAM;oDAAC;;;;;;;;;;;;;;;;;;;0CAKxE,8OAAC;gCAAI,WAAU;0CACZ,MAAM,KAAK,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,qBAC5B,8OAAC;wCAEC,SAAS,IAAM,oBAAoB;wCACnC,WAAU;kDAEV,cAAA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;8DACZ,KAAK,IAAI,KAAK,wBACb,8OAAC;wDAAI,WAAU;kEACb,cAAA,8OAAC,wIAAK;4DACJ,KAAK,IAAA,oIAAW,EAAC,KAAK,OAAO;4DAC7B,OAAO;4DACP,QAAQ;4DACR,KAAK,KAAK,QAAQ,IAAI;4DACtB,WAAU;4DACV,SAAS,CAAC;gEACP,EAAE,MAAM,CAAsB,GAAG,GAChC;4DACJ;;;;;;;;;;6EAIJ,8OAAC;wDAAI,WAAU;kEACb,cAAA,8OAAC;4DAAI,WAAU;4DAAyB,MAAK;4DAAO,QAAO;4DAAe,SAAQ;sEAChF,cAAA,8OAAC;gEACC,eAAc;gEACd,gBAAe;gEACf,aAAa;gEACb,GAAE;;;;;;;;;;;;;;;;;;;;;8DAMZ,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAE,WAAU;sEACX,cAAA,8OAAC;gEAAc,MAAM,KAAK,QAAQ,IAAI;gEAAQ,SAAS;;;;;;;;;;;sEAEzD,8OAAC;4DAAE,WAAU;;8EACX,8OAAC;8EAAM,KAAK,UAAU;;;;;;8EACtB,8OAAC;8EAAK;;;;;;8EACN,8OAAC;8EAAM,WAAW,KAAK,SAAS;;;;;;;;;;;;;;;;;;8DAGpC,8OAAC;oDAAI,WAAU;oDAAwB,MAAK;oDAAO,QAAO;oDAAe,SAAQ;8DAC/E,cAAA,8OAAC;wDACC,eAAc;wDACd,gBAAe;wDACf,aAAa;wDACb,GAAE;;;;;;;;;;;;;;;;;uCAhDH,KAAK,GAAG;;;;;;;;;;4BAwDlB,MAAM,KAAK,CAAC,MAAM,GAAG,mBACpB,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCACC,SAAS,IAAM,oBAAoB,MAAM,KAAK,CAAC,EAAE;oCACjD,WAAU;;wCACX;wCACW,MAAM,KAAK,CAAC,MAAM,GAAG;wCAAE;;;;;;;;;;;;;uBAnGlC,MAAM,MAAM;;;;;;;;;;;;;;;;AA4G7B"}},
    {"offset": {"line": 2088, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ching/OneDrive/Desktop/Chat-Hupuna/hupuna-chat/src/components/%28search%29/SearchEmptyState.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface SearchEmptyStateProps {\r\n  isSearching: boolean;\r\n  searchTerm: string;\r\n  hasResults: boolean;\r\n}\r\n\r\nexport default function SearchEmptyState({ isSearching, searchTerm, hasResults }: SearchEmptyStateProps) {\r\n  if (isSearching) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <div className=\"w-8 h-8 border-[0.1875rem] border-blue-600 border-t-transparent rounded-full animate-spin\" />\r\n        <span className=\"ml-3 text-gray-600 font-medium\">Đang tìm kiếm...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!searchTerm.trim()) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-full text-gray-400\">\r\n        <svg className=\"w-16 h-16 mb-4 opacity-30\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n          />\r\n        </svg>\r\n        <p className=\"text-lg font-medium\">Nhập từ khóa để tìm kiếm</p>\r\n        <p className=\"text-sm mt-2\">Tìm kiếm tin nhắn, file, liên hệ trong tất cả cuộc trò chuyện</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!hasResults) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-full text-gray-400\">\r\n        <svg className=\"w-16 h-16 mb-4 opacity-30\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n          />\r\n        </svg>\r\n        <p className=\"text-lg font-medium\">Không tìm thấy kết quả</p>\r\n        <p className=\"text-sm mt-2\">Thử tìm kiếm với từ khóa khác</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n}\r\n"],"names":[],"mappings":";;;;;;AAQe,SAAS,iBAAiB,EAAE,WAAW,EAAE,UAAU,EAAE,UAAU,EAAyB;IACrG,IAAI,aAAa;QACf,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;;;;;8BACf,8OAAC;oBAAK,WAAU;8BAAiC;;;;;;;;;;;;IAGvD;IAEA,IAAI,CAAC,WAAW,IAAI,IAAI;QACtB,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;oBAA4B,MAAK;oBAAO,QAAO;oBAAe,SAAQ;8BACnF,cAAA,8OAAC;wBACC,eAAc;wBACd,gBAAe;wBACf,aAAa;wBACb,GAAE;;;;;;;;;;;8BAGN,8OAAC;oBAAE,WAAU;8BAAsB;;;;;;8BACnC,8OAAC;oBAAE,WAAU;8BAAe;;;;;;;;;;;;IAGlC;IAEA,IAAI,CAAC,YAAY;QACf,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;oBAA4B,MAAK;oBAAO,QAAO;oBAAe,SAAQ;8BACnF,cAAA,8OAAC;wBACC,eAAc;wBACd,gBAAe;wBACf,aAAa;wBACb,GAAE;;;;;;;;;;;8BAGN,8OAAC;oBAAE,WAAU;8BAAsB;;;;;;8BACnC,8OAAC;oBAAE,WAAU;8BAAe;;;;;;;;;;;;IAGlC;IAEA,OAAO;AACT"}}]
}