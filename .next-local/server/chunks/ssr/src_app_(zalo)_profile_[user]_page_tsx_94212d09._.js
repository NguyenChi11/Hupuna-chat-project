module.exports=[32037,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(71987),f=a.i(99111),g=a.i(45112),h=a.i(10636),i=a.i(75030);let j=function({profilePath:a}){let[d,f]=(0,c.useState)(""),g=(0,c.useMemo)(()=>"",[a]);return(0,c.useEffect)(()=>{let a=!1;return g?(i.default.toDataURL(g,{errorCorrectionLevel:"M",margin:1,width:320}).then(b=>{a||f(b)}).catch(()=>{a||f("")}),()=>{a=!0}):void f("")},[g]),(0,b.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,b.jsx)("div",{className:"w-40 h-40 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:d?(0,b.jsx)(e.default,{width:320,height:320,src:d,alt:"Mã QR hồ sơ",className:"w-full h-full rounded-lg"}):(0,b.jsx)("span",{className:"text-gray-400 text-sm",children:"Đang tạo QR…"})}),(0,b.jsx)("p",{className:"text-sm text-gray-500 text-center md:text-base",children:"Mã QR để người khác kết bạn hoặc xem hồ sơ của bạn."})]})};var k=a.i(86402);function l(){let a=(0,k.useToast)(),[d,e]=(0,c.useState)(""),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[j,l]=(0,c.useState)(!1),m=async()=>{if(!f||f!==h)return void a({type:"error",message:"Mật khẩu xác nhận không khớp"});try{l(!0);let b=String(""),c=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"changePassword",data:{userId:b,currentPassword:d,newPassword:f}})}),h=await c.json();if(!c.ok||!h.success)return void a({type:"error",message:h.message||"Đổi mật khẩu thất bại"});a({type:"success",message:"Đổi mật khẩu thành công"}),e(""),g(""),i("")}finally{l(!1)}};return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("input",{type:"password",placeholder:"Mật khẩu hiện tại",value:d,onChange:a=>e(a.target.value),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800"}),(0,b.jsx)("input",{type:"password",placeholder:"Mật khẩu mới",value:f,onChange:a=>g(a.target.value),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800"}),(0,b.jsx)("input",{type:"password",placeholder:"Xác nhận mật khẩu mới",value:h,onChange:a=>i(a.target.value),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-gray-800"}),(0,b.jsx)("button",{onClick:m,disabled:j,className:"cursor-pointer w-full px-4 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 disabled:opacity-70",children:j?"Đang đổi...":"Đổi mật khẩu"})]})}function m(){let a=(0,k.useToast)(),[d,e]=(0,c.useState)({showOnline:!0,allowFriendRequests:!0,allowTagging:!0}),[f,g]=(0,c.useState)(null);(0,c.useEffect)(()=>{},[]);let h=async(b,c)=>{try{g(String(c));let d=String(""),f=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",field:"_id",value:d,data:{privacy:b}})}),h=await f.json();if(!f.ok||h.error)return void a({type:"error",message:"Cập nhật thất bại"});try{let a=localStorage.getItem("info_user"),c=a?JSON.parse(a):null;c&&localStorage.setItem("info_user",JSON.stringify({...c,privacy:b}))}catch{}e(b),a({type:"success",message:"Đã lưu"})}finally{g(null)}},i=a=>{h({...d,[a]:!d[a]},a)};return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,b.jsx)("span",{className:"text-gray-800 font-medium",children:"Hiển thị trạng thái online"}),(0,b.jsx)("button",{onClick:()=>i("showOnline"),className:`px-3 py-1 rounded-lg text-sm ${d.showOnline?"bg-indigo-600 text-white":"bg-gray-200 text-gray-800"}`,children:"showOnline"===f?"...":d.showOnline?"Bật":"Tắt"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,b.jsx)("span",{className:"text-gray-800 font-medium",children:"Cho phép lời mời kết bạn"}),(0,b.jsx)("button",{onClick:()=>i("allowFriendRequests"),className:`px-3 py-1 rounded-lg text-sm ${d.allowFriendRequests?"bg-indigo-600 text-white":"bg-gray-200 text-gray-800"}`,children:"allowFriendRequests"===f?"...":d.allowFriendRequests?"Bật":"Tắt"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,b.jsx)("span",{className:"text-gray-800 font-medium",children:"Cho phép gắn thẻ @"}),(0,b.jsx)("button",{onClick:()=>i("allowTagging"),className:`px-3 py-1 rounded-lg text-sm ${d.allowTagging?"bg-indigo-600 text-white":"bg-gray-200 text-gray-800"}`,children:"allowTagging"===f?"...":d.allowTagging?"Bật":"Tắt"})]})]})}var n=a.i(54840);function o(){let a=(0,k.useToast)(),[d,e]=(0,c.useState)({soundEnabled:!0,desktopAlerts:!0,showPreview:!0}),[f,g]=(0,c.useState)(null),{playMessageSound:h}=(0,n.useChatNotifications)({});(0,c.useEffect)(()=>{},[]);let i=async(b,c)=>{try{g(String(c));let d=String(""),f=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",field:"_id",value:d,data:{notifications:b}})}),h=await f.json();if(!f.ok||h.error)return void a({type:"error",message:"Cập nhật thất bại"});try{let a=localStorage.getItem("info_user"),c=a?JSON.parse(a):null;c&&localStorage.setItem("info_user",JSON.stringify({...c,notifications:b}))}catch{}e(b),a({type:"success",message:"Đã lưu"})}finally{g(null)}},j=a=>{i({...d,[a]:!d[a]},a)};return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,b.jsx)("span",{className:"text-gray-800 font-medium",children:"Âm thanh thông báo"}),(0,b.jsx)("button",{onClick:()=>j("soundEnabled"),className:`px-3 py-1 rounded-lg text-sm ${d.soundEnabled?"bg-indigo-600 text-white":"bg-gray-200 text-gray-800"}`,children:"soundEnabled"===f?"...":d.soundEnabled?"Bật":"Tắt"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,b.jsx)("span",{className:"text-gray-800 font-medium",children:"Thử âm thanh"}),(0,b.jsx)("button",{onClick:()=>{d.soundEnabled?h():a({type:"info",message:"Âm thanh đang tắt"})},className:"px-3 py-1 rounded-lg text-sm bg-indigo-600 text-white",children:"Phát “ting”"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,b.jsx)("span",{className:"text-gray-800 font-medium",children:"Hiện banner desktop"}),(0,b.jsx)("button",{onClick:()=>j("desktopAlerts"),className:`px-3 py-1 rounded-lg text-sm ${d.desktopAlerts?"bg-indigo-600 text-white":"bg-gray-200 text-gray-800"}`,children:"desktopAlerts"===f?"...":d.desktopAlerts?"Bật":"Tắt"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl",children:[(0,b.jsx)("span",{className:"text-gray-800 font-medium",children:"Hiển thị preview nội dung"}),(0,b.jsx)("button",{onClick:()=>j("showPreview"),className:`px-3 py-1 rounded-lg text-sm ${d.showPreview?"bg-indigo-600 text-white":"bg-gray-200 text-gray-800"}`,children:"showPreview"===f?"...":d.showPreview?"Bật":"Tắt"})]})]})}var p=a.i(74362);let q=function(){let[a,e]=(0,c.useState)(null),f=(0,d.useRouter)(),g={password:"Đổi mật khẩu",privacy:"Quyền riêng tư",notifications:"Cài đặt thông báo"},h=async()=>{try{await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"logout"})})}catch{}try{localStorage.removeItem("info_user"),localStorage.removeItem("remember_login")}catch{}f.push("/login")};return(0,b.jsxs)("div",{className:"space-y-3",children:[[{key:"password",label:"Đổi mật khẩu"},{key:"privacy",label:"Quyền riêng tư"},{key:"notifications",label:"Cài đặt thông báo"}].map(a=>(0,b.jsx)("button",{onClick:()=>e(a.key),className:"cursor-pointer w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 rounded-lg md:text-lg",children:a.label},a.key)),(0,b.jsxs)("button",{onClick:h,className:"cursor-pointer w-full px-4 py-3 text-left bg-red-50 hover:bg-red-100 rounded-lg md:text-lg text-red-600 inline-flex items-center gap-2",children:[(0,b.jsx)(p.HiOutlineLogout,{className:"w-5 h-5"})," Đăng xuất"]}),a&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[9999]",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40 h-[110%]",onClick:()=>e(null)}),(0,b.jsx)("div",{className:"hidden md:flex absolute inset-0 items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b-gray-300",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-800",children:g[a]}),(0,b.jsx)("button",{onClick:()=>e(null),className:"cursor-pointer px-3 py-1 text-sm font-medium rounded-lg bg-gray-100 hover:bg-gray-200",children:"Đóng"})]}),(0,b.jsxs)("div",{className:"p-4",children:["password"===a&&(0,b.jsx)(l,{}),"privacy"===a&&(0,b.jsx)(m,{}),"notifications"===a&&(0,b.jsx)(o,{})]})]})}),(0,b.jsx)("div",{className:"md:hidden absolute inset-x-0 bottom-0 p-5",children:(0,b.jsxs)("div",{className:"bg-white rounded-t-2xl shadow-2xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b-gray-300 border-b",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-800",children:g[a]}),(0,b.jsx)("button",{onClick:()=>e(null),className:"cursor-pointer px-3 py-1 text-sm font-medium rounded-lg bg-gray-100 hover:bg-gray-200",children:"Đóng"})]}),(0,b.jsxs)("div",{className:"p-4 max-h-[70vh] overflow-y-auto",children:["password"===a&&(0,b.jsx)(l,{}),"privacy"===a&&(0,b.jsx)(m,{}),"notifications"===a&&(0,b.jsx)(o,{})]})]})})]})]})};function r({data:a}){let c=[{id:1,name:"Ban lãnh đạo"},{id:2,name:"Quản lý"},{id:3,name:"Kinh doanh"},{id:4,name:"Thiết kế"},{id:5,name:"Sản xuất"},{id:6,name:"Sàn TMĐT"},{id:7,name:"Kế toán"},{id:8,name:"Kho TM"},{id:9,name:"HCNS"},{id:10,name:"Maketing"}].find(b=>b.id===Number(a.department))?.name||a.department||"Chưa cập nhật";return(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Thông tin cá nhân"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Giới tính"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:a.gender||"Chưa cập nhật"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Ngày sinh"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:a.birthday||"Chưa cập nhật"})]}),(0,b.jsxs)("div",{className:"py-2 border-b border-gray-100",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Điện thoại"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:a.phone||"Chưa cập nhật"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2 pl-32",children:"Số điện thoại chỉ hiển thị với người có lưu số bạn trong danh bạ máy"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Email"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:a.email||"Chưa cập nhật"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Địa chỉ"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:a.address||"Chưa cập nhật"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Phòng ban"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:c})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Chức vụ"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:a.title||"Chưa cập nhật"})]})]})]})}var s=a.i(17256);let t={user:(0,b.jsx)(s.HiUser,{className:"w-6 h-6 text-gray-500"}),phone:(0,b.jsx)(s.HiPhone,{className:"w-6 h-6 text-gray-500"}),calendar:(0,b.jsx)(s.HiCalendar,{className:"w-6 h-6 text-gray-500"}),email:(0,b.jsx)(s.HiEnvelope,{className:"w-6 h-6 text-gray-500"}),location:(0,b.jsx)(s.HiMapPin,{className:"w-6 h-6 text-gray-500"}),building:(0,b.jsx)(s.HiBuildingOffice2,{className:"w-6 h-6 text-gray-500"}),briefcase:(0,b.jsx)(s.HiBriefcase,{className:"w-6 h-6 text-gray-500"})};function u({icon:a,label:c,value:d,badge:e}){return(0,b.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-2xl px-6 py-3 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[a?t[a]:null,(0,b.jsx)("span",{className:"text-gray-600 font-medium text-base",children:c})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 text-base",children:d}),e&&(0,b.jsx)("div",{className:"mt-1.5",children:e})]})]})}let v={1:{label:"Ban lãnh đạo",color:"bg-pink-100 text-pink-700"},2:{label:"Quản lý",color:"bg-purple-100 text-purple-700"},3:{label:"Kinh doanh",color:"bg-blue-100 text-blue-700"},4:{label:"Thiết kế",color:"bg-green-100 text-green-700"},5:{label:"Sản xuất",color:"bg-yellow-100 text-yellow-700"},6:{label:"Sàn TMĐT",color:"bg-orange-100 text-orange-700"},7:{label:"Kế toán",color:"bg-red-100 text-red-700"},8:{label:"Kho TM",color:"bg-gray-100 text-gray-700"},9:{label:"HCNS",color:"bg-teal-100 text-teal-700"},10:{label:"Maketing",color:"bg-pink-100 text-pink-700"}};function w({form:a}){let c=a.department?v[a.department]:void 0;return(0,b.jsxs)("div",{className:"space-y-4 max-w-2xl mx-auto",children:[(0,b.jsx)(u,{icon:"user",label:"Tên hiển thị",value:a.name||"Chưa đặt"}),(0,b.jsx)(u,{icon:"phone",label:"Số điện thoại",value:a.phone||"Chưa đặt"}),(0,b.jsx)(u,{icon:"user",label:"Giới tính",value:a.gender||"Chưa chọn"}),(0,b.jsx)(u,{icon:"calendar",label:"Ngày sinh",value:a.birthday||"Chưa chọn"}),(0,b.jsx)(u,{icon:"email",label:"Email",value:a.email||"Chưa đặt"}),(0,b.jsx)(u,{icon:"location",label:"Địa chỉ",value:a.address||"Chưa đặt"}),(0,b.jsx)(u,{icon:"building",label:"Phòng ban",value:c?.label||"Chưa xác định",badge:c&&(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${c.color}`,children:c.label})}),(0,b.jsx)(u,{icon:"briefcase",label:"Chức vụ",value:a.title||"Chưa đặt"})]})}function x({form:a,setForm:d,isSaving:e,onSave:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!1),k=[{id:1,name:"Ban lãnh đạo"},{id:2,name:"Quản lý"},{id:3,name:"Kinh doanh"},{id:4,name:"Thiết kế"},{id:5,name:"Sản xuất"},{id:6,name:"Sàn TMĐT"},{id:7,name:"Kế toán"},{id:8,name:"Kho TM"},{id:9,name:"HCNS"},{id:10,name:"Maketing"}];return(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Chỉnh sửa thông tin"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Tên hiển thị"}),(0,b.jsx)("input",{className:"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400",value:a.name,onChange:b=>d({...a,name:b.target.value}),placeholder:"Chưa cập nhật"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Giới tính"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>h(!g),className:`
      w-full px-5 p-2 rounded-2xl  text-base font-medium text-left cursor-pointer
      flex items-center justify-between transition-all duration-200
      focus:outline-none
      ${g?"bg-white ring-4 ring-[#0068ff]/20 border-2 border-[#0068ff]":"border-2 border-transparent "}
      ${a.gender?"text-gray-900":"text-gray-500"}
    `,children:[(0,b.jsx)("span",{children:a.gender||"Chưa cập nhật"}),(0,b.jsx)(p.HiChevronDown,{className:`w-5 h-5 text-gray-500 transition-transform duration-300 ${g?"rotate-180":""}`})]}),g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>h(!1)}),(0,b.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden z-50",children:["Nam","Nữ","Khác"].map(c=>(0,b.jsxs)("button",{type:"button",onClick:()=>{d({...a,gender:c}),h(!1)},className:`
              w-full px-5 py-4 text-left font-medium transition-all duration-150 cursor-pointer
              ${a.gender===c?"bg-[#0068ff]/5 text-[#0068ff]":"text-gray-800 hover:bg-gray-100"}
              active:bg-gray-200 flex items-center justify-between
            `,children:[(0,b.jsx)("span",{children:c}),a.gender===c&&(0,b.jsx)(s.HiCheck,{className:"w-5 h-5 text-[#0068ff]"})]},c))})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 ",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Ngày sinh"}),(0,b.jsx)("input",{type:"date",className:"flex-1 text-right cursor-pointer text-gray-900 font-medium focus:outline-none bg-transparent",value:a.birthday,onChange:b=>d({...a,birthday:b.target.value})})]}),(0,b.jsxs)("div",{className:"py-2 border-b border-gray-100",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Điện thoại"}),(0,b.jsx)("input",{type:"tel",className:"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400",value:a.phone,onChange:b=>d({...a,phone:b.target.value}),placeholder:"Chưa cập nhật"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2 pl-32",children:"Số điện thoại chỉ hiển thị với người có lưu số bạn trong danh bạ máy"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Email"}),(0,b.jsx)("input",{type:"email",className:"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400",value:a.email,onChange:b=>d({...a,email:b.target.value}),placeholder:"Chưa cập nhật"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Địa chỉ"}),(0,b.jsx)("input",{className:"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400",value:a.address,onChange:b=>d({...a,address:b.target.value}),placeholder:"Chưa cập nhật"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-4 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 text-base w-32",children:"Phòng ban"}),(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>j(!i),className:`
        w-full px-4 py-1 text-right font-medium text-base transition-all duration-200 cursor-pointer
        flex items-center justify-end gap-3
        ${a.department?"text-gray-900":"text-gray-500"}
        focus:outline-none
      `,children:[(0,b.jsx)("span",{className:"truncate max-w-[180px]",children:k.find(b=>String(b.id)===a.department)?.name||"Chưa cập nhật"}),(0,b.jsx)(p.HiChevronDown,{className:`w-5 h-5 text-gray-500 transition-transform duration-300 flex-shrink-0 ${i?"rotate-180":""}`})]}),i&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>j(!1)}),(0,b.jsxs)("div",{className:"absolute h-[24rem] overflow-y-auto right-0 custom-scrollbar bottom-full mt-2 w-64 bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden z-50",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>{d({...a,department:""}),j(!1)},className:`
              w-full px-5 py-4 text-left font-medium transition-all duration-150 cursor-pointer
              ${!a.department?"bg-[#0068ff]/5 text-[#0068ff]":"text-gray-800 hover:bg-gray-100"}
              active:bg-gray-200 flex items-center justify-between
            `,children:[(0,b.jsx)("span",{children:"Chưa cập nhật"}),!a.department&&(0,b.jsx)(s.HiCheck,{className:"w-5 h-5 text-[#0068ff]"})]}),k.map(c=>(0,b.jsxs)("button",{type:"button",onClick:()=>{d({...a,department:String(c.id)}),j(!1)},className:`
                w-full px-5 py-4 text-left font-medium transition-all duration-150 cursor-pointer border-t border-gray-100
                ${a.department===String(c.id)?"bg-[#0068ff]/5 text-[#0068ff]":"text-gray-800 hover:bg-gray-100"}
                active:bg-gray-200 flex items-center justify-between
              `,children:[(0,b.jsx)("span",{children:c.name}),a.department===String(c.id)&&(0,b.jsx)(s.HiCheck,{className:"w-5 h-5 text-[#0068ff]"})]},c.id))]})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Chức vụ"}),(0,b.jsx)("input",{className:"flex-1 text-right text-gray-900 font-medium focus:outline-none placeholder-gray-400",value:a.title,onChange:b=>d({...a,title:b.target.value}),placeholder:"Chưa cập nhật"})]})]}),(0,b.jsx)("button",{onClick:f,disabled:e,className:"w-full mt-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold rounded-full shadow-sm transition-all duration-200 active:scale-95 flex items-center justify-center gap-2 cursor-pointer",children:e?"Đang lưu...":(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.HiCheck,{className:"w-5 h-5"}),"Lưu thông tin"]})})]})}function y({onDataChange:a,isOwner:e}){let f=(0,d.useSearchParams)(),g=(0,k.useToast)(),[h,i]=(0,c.useState)({name:"",phone:"",gender:"",birthday:"",email:"",address:"",department:"",title:""}),[j,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(!1);(0,c.useEffect)(()=>{p(!0)},[]);let q=(0,c.useMemo)(()=>{try{return null}catch{return null}},[]),r=(0,c.useMemo)(()=>String(q?.username||q?._id||""),[q]),t=f.get("user")||"",u=e??(r&&t&&r===t),v=(0,c.useRef)(!1);(0,c.useEffect)(()=>{if(v.current||!q)return;let b={name:String(q.name||q.username||""),phone:String(q.phone||""),gender:String(q.gender||""),birthday:String(q.birthday||""),email:String(q.email||""),address:String(q.address||""),department:String(q.department||""),title:String(q.title||"")};i(b),v.current=!0,a?.(b)},[q,a]);let y=async()=>{if(u){l(!0);try{let b=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",field:q?.username?"username":"_id",value:r,data:h})}),c=await b.json();if(!b.ok||c.error)throw Error(c.error||"Lưu thất bại");localStorage.setItem("info_user",JSON.stringify({...q,...h})),a?.(h),g({type:"success",message:"Đã lưu thông tin!"}),n(!1)}catch(a){g({type:"error",message:a.message||"Lỗi hệ thống"})}finally{l(!1)}}};if(!o)return null;if(!u)return(0,b.jsx)(w,{form:h});if(m)return(0,b.jsx)(x,{form:h,setForm:i,isSaving:j,onSave:y});let z=[{id:2,name:"Quản lý"},{id:3,name:"Kinh doanh"},{id:4,name:"Thiết kế"},{id:5,name:"Sản xuất"},{id:6,name:"Sàn TMĐT"},{id:7,name:"Kế toán"},{id:8,name:"Kho TM"},{id:9,name:"HCNS"},{id:10,name:"Maketing"}].find(a=>a.id===Number(h.department))?.name||h.department||"Chưa cập nhật";return(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Thông tin cá nhân"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Tên hiển thị"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:h.name||"Chưa cập nhật"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Giới tính"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:h.gender||"Chưa cập nhật"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Ngày sinh"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:h.birthday||"Chưa cập nhật"})]}),(0,b.jsxs)("div",{className:"py-2 border-b border-gray-100",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Điện thoại"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:h.phone||"Chưa cập nhật"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2 pl-32",children:"Số điện thoại chỉ hiển thị với người có lưu số bạn trong danh bạ máy"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Email"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:h.email||"Chưa cập nhật"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Địa chỉ"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:h.address||"Chưa cập nhật"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Phòng ban"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:z})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-500 w-32",children:"Chức vụ"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium flex-1 text-right",children:h.title||"Chưa cập nhật"})]})]}),(0,b.jsxs)("button",{onClick:()=>n(!0),className:"w-full mt-6 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-3 rounded-full flex items-center justify-center gap-2 transition-colors cursor-pointer",children:[(0,b.jsx)(s.HiPencil,{className:"w-4 h-4"}),"Chỉnh sửa"]})]})}function z({tab:a,isOwner:c,overviewData:d,handleOverviewData:e,profileIdForQr:f}){return(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 delay-100",children:["info"===a&&(0,b.jsx)(b.Fragment,{children:c?(0,b.jsx)(y,{isOwner:c,onDataChange:a=>e(a)}):(0,b.jsx)(r,{data:d})}),"qr"===a&&(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Mã QR"}),(0,b.jsx)("div",{className:"flex justify-center py-6",children:(0,b.jsx)("div",{className:" p-2  ",children:(0,b.jsx)(j,{profilePath:f?`/profile/${encodeURIComponent(f)}`:""})})})]}),"settings"===a&&c&&(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Cài đặt"}),(0,b.jsx)(q,{})]}),"profile"===a&&(0,b.jsx)(r,{data:d})]}),!["info","qr","settings","profile"].includes(a)&&(0,b.jsx)("div",{className:"text-center py-20 text-gray-500",children:(0,b.jsx)("p",{className:"text-lg",children:"Chưa có nội dung"})})]})}var A=a.i(35112);function B({isOpen:a,onClose:d,title:e,children:f,rightAction:g,headerClassName:h="",titleClassName:i="",backButtonClassName:j=""}){let[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{l(!0)},[]),(0,c.useEffect)(()=>{if(a)n(!0),document.body.style.overflow="hidden";else{let a=setTimeout(()=>n(!1),300);return document.body.style.overflow="",()=>clearTimeout(a)}},[a]),k&&m)?(0,A.createPortal)((0,b.jsxs)("div",{className:"fixed inset-0 z-[9999] flex justify-center items-end md:items-center",children:[(0,b.jsx)("div",{className:`absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity duration-300 ${a?"opacity-100":"opacity-0"}`,onClick:d}),(0,b.jsxs)("div",{className:`relative w-full h-full md:h-[90vh] md:max-w-[480px] md:rounded-3xl md:overflow-hidden bg-white shadow-2xl transition-all duration-300 ease-in-out transform flex flex-col ${a?"translate-x-0 opacity-100 scale-100":"translate-x-full md:translate-x-0 md:opacity-0 md:scale-95"}`,children:[(0,b.jsxs)("div",{className:`flex-none p-2 border-b border-gray-100 flex items-center justify-between sticky top-0 z-10 ${h||"bg-white/80 backdrop-blur-md"}`,children:[(0,b.jsx)("button",{onClick:d,className:`p-2 -ml-2 rounded-full transition-colors cursor-pointer ${j||"text-gray-600 hover:bg-gray-100 active:bg-gray-200"}`,children:(0,b.jsx)(s.HiChevronLeft,{className:"w-6 h-6"})}),(0,b.jsx)("h2",{className:`text-lg font-bold flex-1 text-center pr-8 ${i||"text-gray-800"}`,children:e}),g&&(0,b.jsx)("div",{className:"absolute right-4",children:g})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto bg-gray-50 custom-scrollbar",children:f})]})]}),document.body):null}function C(){let a=(0,d.useParams)(),i=(0,d.useRouter)(),j="string"==typeof a?.user?a.user:"",{currentUser:k,currentId:l}=(0,f.useCurrentUser)(),m=!!(j&&(j===String(k?._id||"")||j===String(k?.username||""))),{viewingUserId:n,overviewData:o,setOverviewData:q,displayName:r,setDisplayName:t,displayDept:u,setDisplayDept:v,displayTitle:w,setDisplayTitle:x,displayBio:y,setDisplayBio:A,avatar:C,background:D,setAvatar:E,setBackground:F}=function(a,b,d){let[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)({phone:"",gender:"",birthday:"",email:"",address:"",department:"",title:"",bio:""}),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(void 0),[s,t]=(0,c.useState)(void 0),u=(0,c.useCallback)(a=>{if(!a)return;f(String(a._id||""));let c=String(d?._id||""),e=a.nicknames||void 0,g=!b&&c&&e?String(e[c]||"").trim():"",i=String(a.name||a.username||"");j(g||i),l(String(a.department||"")),n(String(a.title||"")),p(String(a.bio||"")),r("string"==typeof a.avatar?a.avatar:void 0),t("string"==typeof a.background?a.background:void 0),h({phone:String(a.phone||""),gender:String(a.gender||""),birthday:String(a.birthday||""),email:String(a.email||""),address:String(a.address||""),department:String(a.department||""),title:String(a.title||""),bio:String(a.bio||"")})},[b,d]);return(0,c.useEffect)(()=>{if(b)return void u(d);let c=async()=>{try{let b=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"getById",_id:a})}),c=await b.json(),d=Array.isArray(c?.data)?c.data:void 0,e=c?.row||d?.[0]||c?.user||c;u(e||null)}catch{}};a&&c()},[b,a,d,u]),{viewingUserId:e,overviewData:g,displayName:i,setDisplayName:j,displayDept:k,setDisplayDept:l,displayTitle:m,setDisplayTitle:n,displayBio:o,setDisplayBio:p,avatar:q,background:s,setAvatar:r,setBackground:t,setOverviewData:h}}(j,!!m,k),G=n||m&&String(k?._id||"")||j,{handleUpload:H,isUploadingAvatar:I,isUploadingBackground:J}=function(a,b,d,e){let[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(!1);return{handleUpload:async(c,f)=>{if(b&&a&&c.type.startsWith("image/")&&!(c.size>0x40000000)){"avatar"===f?g(!0):i(!0);try{let b=new FormData;b.append("file",c),b.append("roomId",f),b.append("sender",a),b.append("receiver",""),b.append("type","image"),b.append("folderName","avatar"===f?"Avatars":"Backgrounds");let g=await fetch(`/api/upload?uploadId=${f}_${a}`,{method:"POST",body:b}),h=await g.json();if(!h.success||!h.link)return;let i=h.link,j=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",field:"_id",value:a,data:{[f]:i}})});if((await j.json()).error)return;"avatar"===f?d(i):e(i);try{let a=localStorage.getItem("info_user");if(a){let b=JSON.parse(a);localStorage.setItem("info_user",JSON.stringify({...b,[f]:i}))}}catch{}}finally{"avatar"===f?g(!1):i(!1)}}},isUploadingAvatar:f,isUploadingBackground:h}}(l,!!m,E,F),[K,L]=(0,c.useState)("profile"),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(!1),S=(0,c.useRef)(null),T=(0,c.useRef)(null),[U,V]=(0,c.useState)(!1),[W,X]=(0,c.useState)(r),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)(!1),[aa,ab]=(0,c.useState)(!1),[ac,ad]=(0,c.useState)(null),[ae,af]=(0,c.useState)(null),[ag,ah]=(0,c.useState)("image.jpg"),ai=(a,b)=>{try{let c=new FileReader;c.onload=()=>{ad(String(c.result||"")),af(b),ah(a.name||("avatar"===b?"avatar.jpg":"background.jpg")),ab(!0)},c.readAsDataURL(a)}catch{}},aj=async a=>{ae&&(await H(a,ae),ab(!1),ad(null),af(null))},ak=async a=>{if(!k||!k._id||!j)return;let b=String(a||"").trim();try{if(Z(!0),!(await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"updateNickname",roomId:j,currentUserId:String(k._id),data:{nickname:b}})})).ok)throw Error();if(b)t(b);else try{let a=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"getById",_id:j})}),b=await a.json(),c=b?.row||b?.user||b,d=String(c?.name||c?.username||"");t(d)}catch{}V(!1)}finally{Z(!1)}},al=async(a,b)=>{if(l&&m)try{await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",field:"_id",value:l,data:{[a]:b}})});try{let c=localStorage.getItem("info_user");if(c){let d=JSON.parse(c);localStorage.setItem("info_user",JSON.stringify({...d,[a]:b}))}}catch{}"title"===a&&(x(b),q(a=>({...a,title:b}))),"bio"===a&&(A(b),q(a=>({...a,bio:b})))}catch(a){console.error("Failed to update profile",a)}},am=(0,c.useMemo)(()=>{let a=String(u||o.department||"");return[{id:2,name:"Quản lý"},{id:3,name:"Kinh doanh"},{id:4,name:"Thiết kế"},{id:5,name:"Sản xuất"},{id:6,name:"Sàn TMĐT"},{id:7,name:"Kế toán"},{id:8,name:"Kho TM"},{id:9,name:"HCNS"},{id:10,name:"Maketing"}].find(b=>b.id===Number(a))?.name||a||"Chưa xác định"},[u,o.department]);return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 ",children:[(0,b.jsxs)("div",{className:"w-full bg-gray-50 h-screen overflow-y-auto custom-scrollbar pb-[5rem] md:pb-0 relative no-scrollbar",children:[(0,b.jsxs)("div",{className:"relative bg-white pb-4 mb-2",children:[(0,b.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-30 flex md:justify-end justify-end items-center p-4 text-white",children:[(0,b.jsx)("button",{onClick:()=>i.back(),className:"cursor-pointer hidden p-1.5 rounded-full bg-black/20 backdrop-blur-md hover:bg-black/30 transition-colors",children:(0,b.jsx)(s.HiChevronLeft,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{className:"cursor-pointer p-1.5 rounded-full bg-black/20 backdrop-blur-md hover:bg-black/30 transition-colors",children:(0,b.jsx)(s.HiClock,{className:"w-6 h-6"})}),m&&(0,b.jsx)("button",{onClick:()=>{L("more_actions"),N(!0)},className:"cursor-pointer p-1.5 rounded-full bg-black/20 backdrop-blur-md hover:bg-black/30 transition-colors",children:(0,b.jsx)(s.HiEllipsisHorizontal,{className:"w-6 h-6"})})]})]}),(0,b.jsxs)("div",{className:"relative h-64 w-full z-0",children:[D?(0,b.jsx)(e.default,{src:(0,g.getProxyUrl)(D),alt:"Cover",fill:!0,className:"object-cover",priority:!0,sizes:"100vw"}):(0,b.jsx)("div",{className:"absolute inset-0 bg-blue-400"}),J&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40 z-20 flex items-center justify-center backdrop-blur-sm",children:(0,b.jsx)("div",{className:"w-10 h-10 border-4 border-white/30 border-t-white rounded-full animate-spin"})}),m&&!J&&(0,b.jsxs)("label",{className:"absolute bottom-4 right-4 p-2 bg-black/30 backdrop-blur-md rounded-full text-white cursor-pointer hover:bg-black/40 transition-colors z-10",children:[(0,b.jsx)(s.HiCamera,{className:"w-5 h-5"}),(0,b.jsx)("input",{ref:T,type:"file",accept:"image/*",className:"hidden",onChange:a=>a.target.files?.[0]&&ai(a.target.files[0],"background")})]})]}),(0,b.jsxs)("div",{className:"relative px-4 flex flex-col items-center -mt-16 pointer-events-none",children:[(0,b.jsxs)("div",{className:"relative pointer-events-auto",children:[(0,b.jsx)("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 whitespace-nowrap bg-white text-gray-700 text-xs font-medium px-3 py-1.5 rounded-2xl shadow-lg border border-gray-100 after:content-[''] after:absolute after:top-full after:left-1/2 after:-translate-x-1/2 after:border-4 after:border-transparent after:border-t-white animate-bounce",children:"Trạng thái hiện tại"}),(0,b.jsxs)("div",{className:"w-32 h-32 rounded-full border-4 border-white shadow-md overflow-hidden relative bg-gray-200 z-10",children:[C&&!$?(0,b.jsx)(e.default,{src:(0,g.getProxyUrl)(C),alt:"Avatar",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 33vw",unoptimized:!0,onError:()=>_(!0),onLoadingComplete:()=>_(!1)}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-gray-500",children:(0,b.jsx)(s.HiUserCircle,{className:"w-20 h-20"})}),I&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40 z-20 flex items-center justify-center backdrop-blur-sm",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-white/30 border-t-white rounded-full animate-spin"})}),m&&!I&&(0,b.jsxs)("label",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-pointer z-10",children:[(0,b.jsx)(s.HiCamera,{className:"w-8 h-8 text-white"}),(0,b.jsx)("input",{ref:S,type:"file",accept:"image/*",className:"hidden",onChange:a=>a.target.files?.[0]&&ai(a.target.files[0],"avatar")})]})]})]}),U?(0,b.jsxs)("div",{className:"mt-3 flex items-center gap-2 pointer-events-auto",children:[(0,b.jsx)("input",{value:W,onChange:a=>X(a.target.value),className:"px-3 py-2 text-xl font-bold text-gray-900 border-b-2 border-blue-500 bg-transparent focus:outline-none",disabled:Y,onKeyDown:a=>{"Enter"===a.key&&ak(W),"Escape"===a.key&&V(!1)}}),(0,b.jsx)("button",{onClick:()=>ak(W),disabled:Y,className:`p-2 rounded-full ${Y?"bg-green-100 text-green-500 opacity-70":"hover:bg-green-100 text-green-600"}`,title:"Lưu",children:Y?(0,b.jsx)("span",{className:"w-5 h-5 inline-block border-2 border-green-600 border-t-transparent rounded-full animate-spin"}):(0,b.jsx)(s.HiCheck,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>ak(""),disabled:Y,className:"p-2 rounded-full hover:bg-gray-100 text-gray-600",title:"Xóa biệt danh",children:(0,b.jsx)(s.HiArchiveBox,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>{V(!1),X(r)},disabled:Y,className:"p-2 rounded-full hover:bg-red-100 text-red-500",title:"Hủy",children:(0,b.jsx)(p.HiX,{className:"w-5 h-5"})})]}):(0,b.jsxs)("div",{className:"mt-3 flex items-center gap-2 pointer-events-auto",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:r}),!m&&(0,b.jsx)("button",{onClick:()=>{X(r),V(!0)},className:"p-2 rounded-full hover:bg-gray-100 text-gray-500",title:"Sửa biệt danh",children:(0,b.jsx)(s.HiPencilSquare,{className:"w-5 h-5"})})]}),(0,b.jsxs)("button",{onClick:()=>{L("edit_intro"),P(y||""),N(!0)},className:"cursor-pointer mt-1 flex items-center gap-1 text-blue-600 text-sm font-medium hover:underline pointer-events-auto",children:[(0,b.jsx)(s.HiPencilSquare,{className:"w-4 h-4"}),y||"Cập nhật giới thiệu bản thân"]}),(0,b.jsxs)("div",{className:"flex flex-wrap justify-center gap-2 mt-4 w-full pointer-events-auto",children:[(o.title||w)&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,b.jsx)(s.HiBriefcase,{className:"w-3.5 h-3.5 text-purple-500"}),o.title||w]}),(o.department||u)&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,b.jsx)(s.HiBuildingOffice2,{className:"w-3.5 h-3.5 text-orange-500"}),am]}),o.gender&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,b.jsx)(s.HiUserCircle,{className:"w-3.5 h-3.5 text-indigo-500"}),o.gender]}),o.birthday&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,b.jsx)(s.HiCalendar,{className:"w-3.5 h-3.5 text-pink-500"}),o.birthday]}),o.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,b.jsx)(s.HiPhone,{className:"w-3.5 h-3.5 text-green-500"}),o.phone]}),o.email&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,b.jsx)(s.HiEnvelope,{className:"w-3.5 h-3.5 text-blue-500"}),(0,b.jsx)("span",{className:"truncate max-w-[150px]",children:o.email})]}),o.address&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",children:[(0,b.jsx)(s.HiMapPin,{className:"w-3.5 h-3.5 text-red-500"}),(0,b.jsx)("span",{className:"truncate max-w-[150px]",children:o.address})]})]})]}),(0,b.jsxs)("div",{className:"mt-6 mx-4 flex justify-start md:justify-center gap-3 overflow-x-auto custom-scrollbar pb-2 ",children:[(0,b.jsxs)("button",{className:" cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:(0,b.jsx)(s.HiSparkles,{className:"w-5 h-5"})}),(0,b.jsx)("span",{className:"font-medium text-gray-700 text-sm",children:"Cài zStyle"})]}),(0,b.jsxs)("button",{className:"cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:(0,b.jsx)(s.HiPhoto,{className:"w-5 h-5"})}),(0,b.jsx)("span",{className:"font-medium text-gray-700 text-sm",children:"Ảnh của tôi"})]}),(0,b.jsxs)("button",{className:"cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:(0,b.jsx)(s.HiArchiveBox,{className:"w-5 h-5"})}),(0,b.jsx)("span",{className:"font-medium text-gray-700 text-sm",children:"Kho khoảnh..."})]}),(0,b.jsxs)("button",{onClick:()=>{L("info"),N(!0)},className:"cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center",children:(0,b.jsx)(s.HiInformationCircle,{className:"w-5 h-5"})}),(0,b.jsx)("span",{className:"font-medium text-gray-700 text-sm",children:"Thông tin"})]}),(0,b.jsxs)("button",{onClick:()=>{L("qr"),N(!0)},className:"cursor-pointer flex-shrink-0 flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-200 rounded-xl shadow-sm active:scale-95 transition-transform mr-4",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center",children:(0,b.jsx)(s.HiQrCode,{className:"w-5 h-5"})}),(0,b.jsx)("span",{className:"font-medium text-gray-700 text-sm",children:"Mã QR"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 text-center",children:[(0,b.jsx)("div",{className:"relative w-full max-w-[200px] mx-auto mb-4",children:(0,b.jsxs)("div",{className:"w-24 h-40 mx-auto bg-blue-50 rounded-2xl border-2 border-blue-100 flex items-center justify-center relative shadow-inner",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-white rounded-full shadow-sm flex items-center justify-center",children:(0,b.jsx)(s.HiUserCircle,{className:"w-10 h-10 text-gray-300"})}),(0,b.jsx)("div",{className:"absolute -top-2 -right-4 bg-green-500 p-1.5 rounded-lg",children:(0,b.jsx)(s.HiEllipsisHorizontal,{className:"w-4 h-4 text-white"})}),(0,b.jsx)("div",{className:"absolute top-10 -left-4 text-red-500",children:(0,b.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:(0,b.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})]})}),(0,b.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:["Hôm nay ",r," có gì vui?"]}),(0,b.jsx)("p",{className:"text-gray-500 text-sm mb-6 max-w-xs mx-auto leading-relaxed",children:"Đây là Nhật ký của bạn - Hãy làm đầy Nhật ký với những dấu ấn cuộc đời và kỷ niệm đáng nhớ nhé!"}),(0,b.jsx)("button",{className:"cursor-pointer bg-blue-600 text-white font-semibold px-8 py-3 rounded-full shadow-lg shadow-blue-200 active:scale-95 transition-transform hover:bg-blue-700",children:"Đăng lên Nhật ký"})]}),(0,b.jsx)(B,{isOpen:M,onClose:()=>N(!1),title:"profile"===K?"Hồ sơ":"qr"===K?"Mã QR":"info"===K?"Thông tin":"edit_intro"===K?"Chỉnh sửa lời giới thiệu":"more_actions"===K?r:"general_settings"===K?"Cài đặt":"privacy"===K?"Quyền riêng tư":"account"===K?"Quản lý tài khoản":"Cài đặt",headerClassName:"more_actions"===K?"bg-blue-500 text-white border-blue-500":void 0,titleClassName:"more_actions"===K?"text-white":void 0,backButtonClassName:"more_actions"===K?"text-white hover:bg-blue-600 active:bg-blue-700":void 0,rightAction:"edit_intro"===K?(0,b.jsx)("button",{onClick:()=>{al("bio",O),N(!1)},className:"text-blue-600 font-bold text-base",children:"Lưu"}):"general_settings"===K?(0,b.jsx)("button",{className:"text-gray-800",children:(0,b.jsx)(s.HiOutlineMagnifyingGlass,{className:"w-6 h-6"})}):void 0,children:"edit_intro"===K?(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("textarea",{className:"w-full h-32 text-lg text-gray-800 placeholder-gray-400 focus:outline-none resize-none bg-transparent",placeholder:"Thêm lời giới thiệu của bạn",maxLength:100,value:O,onChange:a=>P(a.target.value),autoFocus:!0}),(0,b.jsxs)("div",{className:"text-right text-gray-400 text-sm mt-2",children:[O.length,"/100"]}),(0,b.jsxs)("div",{className:"mt-6 flex items-center gap-3 cursor-pointer",onClick:()=>R(!Q),children:[(0,b.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${Q?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:Q&&(0,b.jsx)(s.HiCheck,{className:"text-white w-4 h-4"})}),(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Chia sẻ lên nhật ký"})]})]}):"more_actions"===K?(0,b.jsxs)("div",{className:"bg-gray-50 min-h-[50vh] pb-8",children:[(0,b.jsxs)("div",{className:"bg-white",children:[(0,b.jsx)("button",{onClick:()=>L("info"),className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100",children:"Thông tin"}),(0,b.jsx)("button",{onClick:()=>S.current?.click(),className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100",children:"Đổi ảnh đại diện"}),(0,b.jsx)("button",{onClick:()=>T.current?.click(),className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100",children:"Đổi ảnh bìa"}),(0,b.jsx)("button",{onClick:()=>{L("edit_intro"),P(y||"")},className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100",children:"Cập nhật giới thiệu bản thân"}),(0,b.jsx)("button",{onClick:()=>alert("Tính năng Ví của tôi đang được phát triển"),className:"w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 active:bg-gray-100",children:"Ví của tôi"})]}),(0,b.jsx)("div",{className:"h-2 bg-transparent"}),(0,b.jsxs)("div",{className:"bg-white",children:[(0,b.jsx)("div",{className:"px-4 py-3 text-blue-500 font-medium text-sm border-b border-gray-100",children:"Cài đặt"}),(0,b.jsx)("button",{onClick:()=>L("qr"),className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100",children:"Mã QR của tôi"}),(0,b.jsx)("button",{onClick:()=>L("privacy"),className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 border-b border-gray-100 active:bg-gray-100",children:"Quyền riêng tư"}),(0,b.jsx)("button",{onClick:()=>L("settings"),className:"cursor-pointer w-full text-left px-4 py-3.5 text-base text-gray-800 hover:bg-gray-50 active:bg-gray-100",children:"Cài đặt chung"})]})]}):"privacy"===K?(0,b.jsx)("div",{className:"flex flex-col bg-gray-100 min-h-[80vh]",children:(0,b.jsxs)("div",{className:"bg-white mb-2 mt-2",children:[(0,b.jsxs)("button",{className:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0",children:[(0,b.jsx)("span",{className:"text-base text-gray-800",children:"Nhật ký"}),(0,b.jsx)("span",{className:"text-gray-500 text-sm",children:"Công khai"})]}),(0,b.jsxs)("button",{className:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0",children:[(0,b.jsx)("span",{className:"text-base text-gray-800",children:"Tin nhắn"}),(0,b.jsx)("span",{className:"text-gray-500 text-sm",children:"Mọi người"})]}),(0,b.jsxs)("button",{className:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0",children:[(0,b.jsx)("span",{className:"text-base text-gray-800",children:"Sinh nhật"}),(0,b.jsx)("span",{className:"text-gray-500 text-sm",children:"Bạn bè"})]})]})}):"account"===K?(0,b.jsx)("div",{className:"flex flex-col bg-gray-100 min-h-[80vh]",children:(0,b.jsxs)("div",{className:"bg-white mb-2 mt-2",children:[(0,b.jsxs)("button",{className:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0",children:[(0,b.jsx)("span",{className:"text-base text-gray-800",children:"Thông tin tài khoản"}),(0,b.jsx)(p.HiChevronRight,{className:"w-5 h-5 text-gray-400"})]}),(0,b.jsxs)("button",{className:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0",children:[(0,b.jsx)("span",{className:"text-base text-gray-800",children:"Đổi mật khẩu"}),(0,b.jsx)(p.HiChevronRight,{className:"w-5 h-5 text-gray-400"})]}),(0,b.jsxs)("button",{className:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 border-b border-gray-100 last:border-0",children:[(0,b.jsx)("span",{className:"text-base text-red-500",children:"Xóa tài khoản"}),(0,b.jsx)(p.HiChevronRight,{className:"w-5 h-5 text-gray-400"})]})]})}):(0,b.jsx)(z,{tab:K,isOwner:!!m,overviewData:o,handleOverviewData:a=>{q(b=>({...b,...a})),void 0!==a.title&&x(String(a.title)),void 0!==a.bio&&A(String(a.bio)),void 0!==a.department&&v(String(a.department)),void 0!==a.name&&t(String(a.name))},profileIdForQr:G})})]}),(0,b.jsx)(h.default,{open:aa,src:ac,onClose:()=>ab(!1),onConfirm:aj,aspectRatio:"background"===ae?16/9:1,circle:"avatar"===ae,fileName:ag,outputType:"image/jpeg",quality:.92})]})}a.s(["default",()=>C],32037)}];

//# sourceMappingURL=src_app_%28zalo%29_profile_%5Buser%5D_page_tsx_94212d09._.js.map