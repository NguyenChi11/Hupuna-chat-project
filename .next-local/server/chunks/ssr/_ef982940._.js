module.exports=[28525,(a,b,c)=>{!function(){"use strict";var c={}.hasOwnProperty;function d(){for(var a="",b=0;b<arguments.length;b++){var f=arguments[b];f&&(a=e(a,function(a){if("string"==typeof a||"number"==typeof a)return a;if("object"!=typeof a)return"";if(Array.isArray(a))return d.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var b="";for(var f in a)c.call(a,f)&&a[f]&&(b=e(b,f));return b}(f)))}return a}function e(a,b){return b?a?a+" "+b:a+b:a}if(b.exports)d.default=d,b.exports=d;else if("function"==typeof define&&"object"==typeof define.amd&&define.amd)void 0!==d&&a.v(d);else window.classNames=d}()},10636,96284,a=>{"use strict";var b,c,d,e,f,g,h,i=a.i(87924),j=a.i(72131),k=function(a,b){return(k=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)};function l(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}k(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var m=function(){return(m=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function n(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function o(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function p(a,b){var c,d,e,f={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=h(0),g.throw=h(1),g.return=h(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;g&&(g=0,j[0]&&(f=0)),f;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return f.label++,{value:j[1],done:!1};case 5:f.label++,d=j[1],j=[0];continue;case 7:j=f.ops.pop(),f.trys.pop();continue;default:if(!(e=(e=f.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){f=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){f.label=j[1];break}if(6===j[0]&&f.label<e[1]){f.label=e[1],e=j;break}if(e&&f.label<e[2]){f.label=e[2],f.ops.push(j);break}e[2]&&f.ops.pop(),f.trys.pop();continue}j=b.call(a,f)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}}function q(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g}function r(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}function s(a){return a.moveCoordinates||a.resizeCoordinates||a.transformImage.move||a.transformImage.rotate||a.transformImage.flip||a.transformImage.scale}function t(a,b){var c,d;return a&&b?(c=""+a+b[0].toUpperCase()+b.slice(1),d=a+"-"+b):(c=a||b,d=a||b),{camelCase:c,snakeCase:d}}function u(a){return/^blob:/.test(a)}function v(a){return u(a)||/^data:/.test(a)}function w(a){return"function"==typeof a}function x(a){return void 0===a}"function"==typeof SuppressedError&&SuppressedError;var y=function(a){return null!==a&&"object"==typeof a};function z(a,b,c){void 0===c&&(c={});var d={};return y(a)?(Object.keys(b).forEach(function(e){x(a[e])?d[e]=b[e]:y(b[e])?y(a[e])?d[e]=z(a[e],b[e],c[e]):d[e]=a[e]?b[e]:c[e]:!0===b[e]||!1===b[e]?d[e]=!!a[e]:d[e]=a[e]}),d):a?b:c}function A(a){var b=Number(a);return Number.isNaN(b)?a:b}function B(a){return!0===a||!1===a}function C(a){return"number"==typeof a}function D(a){return C(a)&&a==a||"string"==typeof a&&!Number.isNaN(parseFloat(a))&&isFinite(parseFloat(a))}function E(a,b){return Math.sqrt(Math.pow(a.left-b.left,2)+Math.pow(a.top-b.top,2))}function F(a,b,c){return void 0===c&&(c=.001),Math.abs(b-a)<c}function G(a,b,c){return!F(a,b,c)&&a>b}function H(a,b,c){return!F(a,b,c)&&a<b}function I(a){return new Promise(function(b){setTimeout(function(){b()},a)})}function J(a){if(!y(a))return a;var b={};return Array.isArray(a)?b=a.map(function(a){return J(a)}):Object.keys(a).forEach(function(c){return b[c]=J(a[c])}),b}function K(a,b,c){if(void 0===c&&(c=.001),C(a)&&C(b)&&F(a,b,c)||a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;var d,e=void 0;if(Array.isArray(a)){if((d=a.length)!=b.length)return!1;for(e=d;0!=e--;)if(!K(a[e],b[e],c))return!1;return!0}if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();var f=Object.keys(a);if((d=f.length)!==Object.keys(b).length)return!1;for(e=d;0!=e--;)if(!Object.prototype.hasOwnProperty.call(b,f[e]))return!1;for(e=d;0!=e--;){var g=f[e];if(!K(a[g],b[g],c))return!1}return!0}return a!=a&&b!=b}function L(){return{left:0,top:0,width:0,height:0}}function M(a,b){var c,d;function e(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];var h=Date.now()-c,i=w(b)?b():b||0;h<i&&h>=0?d=setTimeout(function(){return e.apply(void 0,f)},i-h):a.apply(void 0,f)}function f(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];c=Date.now(),d=setTimeout(function(){return e.apply(void 0,a)},w(b)?b():b||0)}return f.clear=function(){clearTimeout(d)},f}var N=["left","right","top","bottom"],O=["left","right"],P=["top","bottom"];function Q(a,b){return{left:a.left-b.left,top:a.top-b.top}}function R(a){return{left:a.left+a.width/2,top:a.top+a.height/2}}function S(a,b){return Math.pow(a.width-b.width,2)+Math.pow(a.height-b.height,2)}function T(a,b){return{left:a.left-b.left,top:a.top-b.top,width:a.width+b.left+b.right,height:a.height+b.top+b.bottom}}function U(a){return{left:-a.left,top:-a.top}}function V(a,b){return m(m({},a),{left:a.left+b.left,top:a.top+b.top})}function W(a){return{left:a.left,top:a.top,right:a.left+a.width,bottom:a.top+a.height}}function X(a,b,c,d){if(1===b)return a;if(!("left"in a)&&!("top"in a))return{width:a.width*b,height:a.height*b};if(!c)return{width:a.width*b,height:a.height*b,left:a.left+a.width*(1-b)/2,top:a.top+a.height*(1-b)/2};var e=R(a);return{width:a.width*b,height:a.height*b,left:a.left+a.width*(1-b)/2+(c.left-e.left)*(d||1-b),top:a.top+a.height*(1-b)/2+(c.top-e.top)*(d||1-b)}}function Y(a){return a.width/a.height}function Z(a,b){return Math.min(b.maxWidth?b.maxWidth/a.width:1/0,b.maxHeight?b.maxHeight/a.height:1/0)}function $(a,b){var c;return b.minimum&&H(a,b.minimum)?c=b.minimum:b.maximum&&G(a,b.maximum)&&(c=b.maximum),c}function _(a,b){var c=Y(a),d=1;return b.minWidth>0&&b.minHeight>0?c>b.minWidth/b.minHeight?a.height<b.minHeight&&(d=b.minHeight/a.height):a.width<b.minWidth&&(d=b.minWidth/a.width):b.minWidth>0?a.width<b.minWidth&&(d=b.minWidth/a.width):b.minHeight>0&&a.height<b.minHeight&&(d=b.minHeight/a.height),b.maxWidth<1/0&&b.maxHeight<1/0?c>b.maxWidth/b.maxHeight?a.width>b.maxWidth&&(d=b.maxWidth/a.width):a.height>b.maxHeight&&(d=b.maxHeight/a.height):b.maxWidth<1/0?a.width>b.maxWidth&&(d=b.maxWidth/a.width):b.maxHeight<1/0&&a.height>b.maxHeight&&(d=b.maxHeight/a.height),d}function aa(a,b){var c={left:0,top:0,right:0,bottom:0};return N.forEach(function(d){var e=b[d],f=W(a)[d];void 0!==e&&void 0!==f?"left"===d||"top"===d?c[d]=Math.max(0,e-f):c[d]=Math.max(0,f-e):c[d]=0}),c}function ab(a,b){return X(a,_(a,b))}function ac(a,b){var c=b*Math.PI/180;return{width:Math.abs(a.width*Math.cos(c))+Math.abs(a.height*Math.sin(c)),height:Math.abs(a.width*Math.sin(c))+Math.abs(a.height*Math.cos(c))}}function ad(a,b,c){var d=b*Math.PI/180;return c?{left:(a.left-c.left)*Math.cos(d)-(a.top-c.top)*Math.sin(d)+c.left,top:(a.left-c.left)*Math.sin(d)+(a.top-c.top)*Math.cos(d)+c.top}:{left:a.left*Math.cos(d)-a.top*Math.sin(d),top:a.left*Math.sin(d)+a.top*Math.cos(d)}}function ae(a){return{minWidth:0,minHeight:0,maxWidth:void 0!==a.right&&void 0!==a.left?a.right-a.left:1/0,maxHeight:void 0!==a.bottom&&void 0!==a.top?a.bottom-a.top:1/0}}function af(a,b){var c={};return N.forEach(function(d){var e=a[d],f=b[d];void 0!==e&&void 0!==f?"left"===d||"top"===d?c[d]=Math.max(e,f):c[d]=Math.min(e,f):void 0!==f?c[d]=f:void 0!==e&&(c[d]=e)}),c}function ag(a,b){var c={left:0,top:0},d=aa(a,b);return d.left&&d.left>0?c.left=d.left:d.right&&d.right>0&&(c.left=-d.right),d.top&&d.top>0?c.top=d.top:d.bottom&&d.bottom>0&&(c.top=-d.bottom),c}function ah(a,b){return V(a,ag(a,b))}function ai(a){return(void 0===a&&(a={}),C(a))?{minimum:a,maximum:a}:{minimum:D(a.minimum)?a.minimum:0,maximum:D(a.maximum)?a.maximum:1/0}}function aj(a,b){return(x(b.maxWidth)||!G(a.width,b.maxWidth))&&(x(b.maxHeight)||!G(a.height,b.maxHeight))&&(x(b.minHeight)||!H(a.height,b.minHeight))&&(x(b.minWidth)||!H(a.width,b.minWidth))}function ak(a,b){return(x(b.left)||!H(a.left,b.left))&&(x(b.top)||!H(a.top,b.top))&&(x(b.right)||!G(a.left+a.width,b.right))&&(x(b.bottom)||!G(a.top+a.height,b.bottom))}function al(a){var b=m({},a);return b.minWidth>b.maxWidth&&(b.minWidth=b.maxWidth),b.minHeight>b.maxHeight&&(b.minHeight=b.maxHeight),b}function am(a,b){var c=m({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0},b);return al({maxHeight:Math.min(a.maxHeight,c.maxHeight),minHeight:Math.max(a.minHeight,c.minHeight),maxWidth:Math.min(a.maxWidth,c.maxWidth),minWidth:Math.max(a.minWidth,c.minWidth)})}function an(a){return!!(a&&a.visibleArea&&a.coordinates)}function ao(a,b){var c;return(c=w(b.areaSizeRestrictions)?b.areaSizeRestrictions(a,b):b.areaSizeRestrictions).maxWidth<1/0&&c.maxHeight<1/0&&(Y(a.boundary)>c.maxWidth/c.maxHeight?c.maxHeight=c.maxWidth/Y(a.boundary):c.maxWidth=c.maxHeight*Y(a.boundary)),al(c)}function ap(a,b){return w(b.areaPositionRestrictions)?b.areaPositionRestrictions(a,b):b.areaPositionRestrictions}function aq(a,b){var c,d,e;return c=w(b.sizeRestrictions)?b.sizeRestrictions(a,b):b.sizeRestrictions,d=ar(a,b),e={minWidth:D(c.minWidth)?A(c.minWidth):0,minHeight:D(c.minHeight)?A(c.minHeight):0,maxWidth:D(c.maxWidth)?A(c.maxWidth):1/0,maxHeight:D(c.maxHeight)?A(c.maxHeight):1/0},void 0!==d.left&&void 0!==d.right&&(e.maxWidth=Math.min(e.maxWidth,d.right-d.left)),void 0!==d.bottom&&void 0!==d.top&&(e.maxHeight=Math.min(e.maxHeight,d.bottom-d.top)),al(e)}function ar(a,b){return w(b.positionRestrictions)?b.positionRestrictions(a,b):b.positionRestrictions}function as(a){return a.visibleArea?a.visibleArea.width/a.boundary.width:0}function at(a){if(!an(a))return L();var b=a.coordinates,c=b.width,d=b.height,e=b.left,f=b.top,g=as(a);return{width:c/g,height:d/g,left:(e-a.visibleArea.left)/g,top:(f-a.visibleArea.top)/g}}function au(a,b){return ai(w(b.aspectRatio)?b.aspectRatio(a,b):b.aspectRatio)}function av(a,b){return w(b.defaultCoordinates)?b.defaultCoordinates(a,b):b.defaultCoordinates}function aw(a,b){return w(b.defaultVisibleArea)?b.defaultVisibleArea(a,b):b.defaultVisibleArea}function ax(a){return a.imageSize&&a.imageSize.width&&a.imageSize.height?ac(a.imageSize,a.transforms.rotate):{width:0,height:0}}function ay(a,b){return!an(a)||!$(Y(a.coordinates),au(a,b))&&aj(a.visibleArea,ao(a,b))&&aj(a.coordinates,aq(a,b))&&ak(a.visibleArea,ap(a,b))&&ak(a.coordinates,ar(a,b))}function az(a){var b,c,d,e=a.width,f=a.height,g=a.sizeRestrictions||{minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0},h=ai(a.aspectRatio),i={width:Math.max(g.minWidth,Math.min(g.maxWidth,e)),height:Math.max(g.minHeight,Math.min(g.maxHeight,f))},j=[i];return h&&[h.minimum,h.maximum].forEach(function(a){a&&j.push({width:i.width,height:i.width/a},{width:i.height*a,height:i.height})}),b=j=j.map(function(a){return ab(a,g)}),c={width:e,height:f},(d=function(a){return b.reduce(function(b,d){var e=w(g)?g(d):g,f=e.maxHeight,i=e.maxWidth,j=e.minWidth,k=e.minHeight,l=ai(w(h)?h(d):h);return aj(d,a?{maxWidth:i,maxHeight:f}:{maxWidth:i,maxHeight:f,minWidth:j,minHeight:k})&&!$(Y(d),l)&&d.width&&d.height&&(!b||H(S(d,c),S(b,c)))?d:b},null)})()||d(!0)}function aA(a,b){var c=J(a);if(a.visibleArea){var d=ao(a,b);c.visibleArea=m(m({},a.visibleArea),az({width:a.visibleArea.width,height:a.visibleArea.height,aspectRatio:{minimum:Y(c.boundary),maximum:Y(c.boundary)},sizeRestrictions:d})),c.visibleArea=V(c.visibleArea,Q(R(a.visibleArea),R(c.visibleArea))),c.visibleArea=ah(c.visibleArea,ap(c,b))}return c}function aB(a,b,c){var d=V(a,b);return c?ah(d,c):d}function aC(a,b,c,d){void 0===d&&(d=!0);var e=!1===d?f.unsafe:!0===d?f.zoom:d,g=au(a,b),h=aq(a,b);a.visibleArea&&e===f.limit&&(h=m(m({},h),{minWidth:Math.min(a.visibleArea.width,h.minWidth),minHeight:Math.min(a.visibleArea.height,h.minHeight),maxWidth:Math.min(a.visibleArea.width,h.maxWidth),maxHeight:Math.min(a.visibleArea.height,h.maxHeight)}));var i=ar(a,b);a.visibleArea&&e===f.limit&&(i=af(i,W(a.visibleArea)));var j=function(a,b){return aB(a,{left:b.left-(a.left||0),top:b.top-(a.top||0)},i)},k=a.coordinates?m({},a.coordinates):L();(Array.isArray(c)?c:[c]).forEach(function(c){var d,e,f;(d="function"==typeof c?c(m(m({},a),{coordinates:k}),b):c)&&(x(d.width)&&x(d.height)||(e=k,f=m(m({},k),d),k=j(m(m(m({},e),az({width:f.width,height:f.height,sizeRestrictions:h,aspectRatio:g})),{left:0,top:0}),{left:e.left||0,top:e.top||0})),x(d.left)&&x(d.top)||(k=j(k,m(m({},k),d))))});var l=m(m({},J(a)),{coordinates:k});if(!l.visibleArea||e!==f.zoom)return l;var n=Math.max(0,l.coordinates.width-l.visibleArea.width),o=Math.max(0,l.coordinates.height-l.visibleArea.height),p=ao(a,b),q=n>o?l.coordinates.width/l.visibleArea.width:l.coordinates.height/l.visibleArea.height;return q>1&&(l.visibleArea=X(l.visibleArea,Math.min(q,Z(l.visibleArea,p)))),l.visibleArea=V(l.visibleArea,U(ag(l.coordinates,W(l.visibleArea)))),aA(l,b)}function aD(a,b){if(a.coordinates){var c=J(a),d=au(a,b),e=aq(a,b);return c.coordinates=m(m({},a.coordinates),az({width:a.coordinates.width,height:a.coordinates.height,aspectRatio:d,sizeRestrictions:a.visibleArea?{maxWidth:Math.min(a.visibleArea.width,e.maxWidth),maxHeight:Math.min(a.visibleArea.height,e.maxHeight),minHeight:Math.min(a.visibleArea.height,e.minHeight),minWidth:Math.min(a.visibleArea.width,e.minWidth)}:e})),c.coordinates=V(c.coordinates,Q(R(a.coordinates),R(c.coordinates))),c.coordinates=ah(c.coordinates,a.visibleArea?af(W(a.visibleArea),ar(c,b)):ar(c,b)),c}return a}function aE(a,b,c,d){void 0===d&&(d=!0);var e=m(m({},J(a)),{visibleArea:c});return e=aA(e,b),d&&(e=aD(e,b)),e}function aF(a){var b=a.coordinates,c=a.directions,d=a.positionRestrictions,e=a.sizeRestrictions,f=a.preserveRatio,g=a.allowedDirections,h=a.compensate,i=m({},c),j=T(b,i).width,k=T(b,i).height;j<0&&(i.left<0&&i.right<0?(i.left=-(b.width-e.minWidth)/(i.left/i.right),i.right=-(b.width-e.minWidth)/(i.right/i.left)):i.left<0?i.left=-(b.width-e.minWidth):i.right<0&&(i.right=-(b.width-e.minWidth))),k<0&&(i.top<0&&i.bottom<0?(i.top=-(b.height-e.minHeight)/(i.top/i.bottom),i.bottom=-(b.height-e.minHeight)/(i.bottom/i.top)):i.top<0?i.top=-(b.height-e.minHeight):i.bottom<0&&(i.bottom=-(b.height-e.minHeight)));var l=aa(T(b,i),d),n=N.every(function(a){return!G(l[({left:"right",top:"bottom",right:"left",bottom:"top"})[a]],0)||g[a]});(void 0===h||h)&&n&&(l.left&&l.left>0&&0===l.right?(i.right+=l.left,i.left-=l.left):l.right&&l.right>0&&0===l.left&&(i.left+=l.right,i.right-=l.right),l.top&&l.top>0&&0===l.bottom?(i.bottom+=l.top,i.top-=l.top):l.bottom&&l.bottom>0&&0===l.top&&(i.top+=l.bottom,i.bottom-=l.bottom),l=aa(T(b,i),d));var o={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(N.forEach(function(a){var b=l[a];b&&i[a]&&(o[a]=Math.max(0,1-b/i[a]))}),f){var p=Math.min.apply(Math,N.map(function(a){return o[a]}));p!==1/0&&N.forEach(function(a){i[a]*=p})}else N.forEach(function(a){o[a]!==1/0&&(i[a]*=o[a])});if(j=T(b,i).width,k=T(b,i).height,i.right+i.left&&(j>e.maxWidth?o.width=(e.maxWidth-b.width)/(i.right+i.left):j<e.minWidth&&(o.width=(e.minWidth-b.width)/(i.right+i.left))),i.bottom+i.top&&(k>e.maxHeight?o.height=(e.maxHeight-b.height)/(i.bottom+i.top):k<e.minHeight&&(o.height=(e.minHeight-b.height)/(i.bottom+i.top))),f){var q=Math.min(o.width,o.height);q!==1/0&&N.forEach(function(a){i[a]*=q})}else o.width!==1/0&&O.forEach(function(a){i[a]*=o.width}),o.height!==1/0&&P.forEach(function(a){i[a]*=o.height});return i}function aG(a,b,c){return F(b+c,0)?a/2:F(b,0)?0:F(c,0)?a:a*Math.abs(b/(b+c))}function aH(a,b){var c=b.toLowerCase();return{left:a.left+a.width*(-1!==c.indexOf("west")?1:.5*(-1===c.indexOf("east"))),top:a.top+a.height*(-1!==c.indexOf("north")?1:.5*(-1===c.indexOf("south")))}}function aI(a){var b=a.toLowerCase();return{left:-1===b.indexOf("east"),top:-1===b.indexOf("south"),right:-1===b.indexOf("west"),bottom:-1===b.indexOf("north")}}function aJ(a,b){var c=as(a);return a.visibleArea?{left:b.left*c+a.visibleArea.left,top:b.top*c+a.visibleArea.top}:b}function aK(a,b){var c=as(a);return{left:C(b.left)?b.left*c:0,top:C(b.top)?b.top*c:0}}function aL(a,b){if(a&&b){var c=b();c&&a(c)}}function aM(a,b){a.forEach(function(a){aL(a,b)})}function aN(a,b){var c,d=a.imageSize,e=a.visibleArea,f=aq(a,b),g=au(a,b);if(e)c=e;else{var h=ae(ar(a,b));c={width:Math.max(h.minWidth,Math.min(h.maxWidth,d.width)),height:Math.max(h.minHeight,Math.min(h.maxHeight,d.height))}}var i=Math.min(g.maximum||1/0,Math.max(g.minimum||0,Y(c))),j=c.width<c.height?{width:.8*c.width,height:.8*c.width/i}:{height:.8*c.height,width:.8*c.height*i};return az(m(m({},j),{aspectRatio:g,sizeRestrictions:f}))}function aO(a,b){return{minWidth:D(b.minWidth)?A(b.minWidth):0,minHeight:D(b.minHeight)?A(b.minHeight):0,maxWidth:D(b.maxWidth)?A(b.maxWidth):1/0,maxHeight:D(b.maxHeight)?A(b.maxHeight):1/0}}function aP(a){var b=a.visibleArea,c=a.coordinates,d=b||ax(a);return{left:(b?b.left:0)+d.width/2-(c?c.width/2:0),top:(b?b.top:0)+d.height/2-(c?c.height/2:0)}}function aQ(a){var b=a.src,c=a.arrayBuffer,d=void 0===c?null:c,e=a.orientation,f=void 0===e?null:e,g={src:b,arrayBuffer:d,revoke:!1,transforms:{flip:{horizontal:!1,vertical:!1},rotate:0}};return d&&f&&f>1?u(b)||!v(b)?(g.src=URL.createObjectURL(new Blob([d])),g.revoke=!0):g.src=function(a){for(var b=[],c=new Uint8Array(a);c.length>0;){var d=c.subarray(0,8192);b.push(String.fromCharCode.apply(null,Array.from?Array.from(d):d.slice())),c=c.subarray(8192)}return"data:image/jpeg;base64,"+btoa(b.join(""))}(d):g.src=b,f&&(g.transforms=function(a){var b={flip:{horizontal:!1,vertical:!1},rotate:0};if(a)switch(a){case 2:b.flip.horizontal=!0;break;case 3:b.rotate=-180;break;case 4:b.flip.vertical=!0;break;case 5:b.rotate=90,b.flip.vertical=!0;break;case 6:b.rotate=90;break;case 7:b.rotate=90,b.flip.horizontal=!0;break;case 8:b.rotate=-90}return b}(f)),g}function aR(a,b,c,d,e){void 0===e&&(e=null);var f,g,h,i,j,k=a.width>a.height?{width:Math.min(512,a.width),height:Math.min(512,a.width)/(a.width/a.height)}:{height:Math.min(512,a.height),width:Math.min(512,a.height)*(a.width/a.height)},l=ax(b),n={rotate:b.transforms.rotate,flip:{horizontal:b.transforms.flip.horizontal,vertical:b.transforms.flip.vertical},translateX:c.left/d,translateY:c.top/d,scale:1/d},o={rotate:{left:(k.width-l.width)/(2*d),top:(k.height-l.height)/(2*d)},scale:{left:(1-1/d)*k.width/2,top:(1-1/d)*k.height/2}},p=m(m({},n),{scale:n.scale*(a.width/k.width)}),q={width:k.width+"px",height:k.height+"px",left:"0px",top:"0px",transition:"none",transform:"translate3d("+(-o.rotate.left-o.scale.left-n.translateX)+"px, "+(-o.rotate.top-o.scale.top-n.translateY)+"px, 0px)"+(f=p.rotate,h=void 0===(g=p.flip)?{horizontal:!1,vertical:!1}:g," rotate("+(void 0===f?0:f)+"deg) scaleX("+(j=void 0===(i=p.scale)?1:i)*(h.horizontal?-1:1)+") scaleY("+j*(h.vertical?-1:1)+")"),willChange:"none"};return e&&e.active&&(q.willChange="transform",q.transition=e.duration+"ms "+e.timingFunction),q}function aS(a,b,c){b.style.width="0px",b.style.height="0px",b.style.width=Math.max(a.clientWidth,c.width)+"px";var d=c.width/c.height;b.style.height=Math.max(a.clientHeight,b.clientWidth/d)+"px",b.style.width=b.clientHeight*d+"px"}function aT(a,b,c){b.style.width="0px",b.style.height="0px",b.style.width=Math.max(a.getBoundingClientRect().width,c.width)+"px";var d=c.width/c.height;b.style.height=Math.max(a.getBoundingClientRect().height,b.getBoundingClientRect().width/d)+"px",b.style.width=b.getBoundingClientRect().height*d+"px",b.clientWidth/b.clientHeight>a.clientWidth/a.clientHeight?b.clientWidth>a.clientWidth&&(b.style.width=a.clientWidth+"px",b.style.height=a.clientWidth/d+"px"):b.clientHeight>a.clientHeight&&(b.style.height=a.clientHeight+"px",b.style.width=a.clientHeight*d+"px")}function aU(a){var b=a.getBoundingClientRect();return{width:b.width,height:b.height}}(b=f||(f={})).limit="limit",b.zoom="zoom",b.unsafe="unsafe",(c=g||(g={})).fillArea="fillArea",c.fitArea="fitArea",c.stencil="stencil",c.none="none",(d=h||(h={})).coordinates="coordinates",d.visibleArea="visibleArea";var aV={linear:function(a){return a},"ease-in":function(a){return Math.pow(a,1.675)},"ease-out":function(a){return 1-Math.pow(1-a,1.675)},"ease-in-out":function(a){return .5*(Math.sin((a-.5)*Math.PI)+1)}},aW=function(){function a(){this.active=!1}return a.prototype.start=function(a){var b;this.onStart=a.onStart,this.onProgress=a.onProgress,this.onStop=a.onStop,this.active||null==(b=this.onStart)||b.call(this),this.id&&window.cancelAnimationFrame(this.id),this.startTime=performance.now(),this.timingFunction=a.timingFunction,this.endTime=this.startTime+a.duration,this.active=!0,this.animate()},a.prototype.animate=function(){var a=this;if(this.startTime&&this.endTime){var b=aV[this.timingFunction];b||(b=aV["ease-out"]);var c=1-(this.endTime-performance.now())/(this.endTime-this.startTime),d=Math.min(1,b(c));this.onProgress&&this.onProgress(d),c<1?this.id=window.requestAnimationFrame(function(){return a.animate()}):this.stop()}else this.stop()},a.prototype.stop=function(){this.active=!1,this.id&&window.cancelAnimationFrame(this.id),this.onStop&&this.onStop()},a}();function aX(a,b){var c=b.getBoundingClientRect(),d=c.left,e=c.top,f={left:0,top:0},g=0;return a.forEach(function(b){f.left+=(b.clientX-d)/a.length,f.top+=(b.clientY-e)/a.length}),a.forEach(function(a){g+=E({left:f.left,top:f.top},{left:a.clientX-d,top:a.clientY-e})}),{centerMass:f,spread:g,count:a.length}}function aY(a,b){return a.aspectRatio?{}:{aspectRatio:ai(w(b.aspectRatio)?b.aspectRatio():b.aspectRatio)}}var aZ=a.i(28525);function a$(a,b){var c=aY({},b);return{stencilSize:function(b,d){var e,f,g=w(a.stencilSize)?a.stencilSize(b,d):a.stencilSize;return az(m(m({},g),{aspectRatio:(e=c.aspectRatio,(f=ai(Y(g)))?e?{minimum:Math.min(e.maximum,Math.max(e.minimum,f.minimum)),maximum:Math.max(e.minimum,Math.min(e.maximum,f.maximum))}:f:e)}))}}}function a_(a,b){var c=a.boundary,d=w(b.stencilSize)?b.stencilSize(a,b):b.stencilSize;return(d.width>c.width||d.height>c.height)&&(d=az({sizeRestrictions:{maxWidth:c.width,maxHeight:c.height,minWidth:0,minHeight:0},width:d.width,height:d.height,aspectRatio:{minimum:Y(d),maximum:Y(d)}})),d}function a0(a,b){var c=a_(a,m(m({},b),{stencilSize:b.stencilSize})),d=ao(a,b);return{maxWidth:d.maxWidth*c.width/a.boundary.width,maxHeight:d.maxHeight*c.height/a.boundary.height,minWidth:0,minHeight:0}}function a1(a,b){var c,d,e=a.imageSize,f=a.visibleArea,g=a.boundary,h=aq(a,b),i=au(a,b),j=w(b.stencilSize)?b.stencilSize(a,b):b.stencilSize,k=f||e;return Y(k)>Y(g)?d=(c=j.height*k.height/g.height)*Y(j):c=(d=j.width*k.width/g.width)/Y(j),az({width:d,height:c,aspectRatio:i,sizeRestrictions:h})}function a2(a,b){var c=Y(a_(a,b));return{minimum:c,maximum:c}}function a3(a,b,c){if(c&&c.immediately){if(an(a)){var d=J(a),e=a_(a,b);d.visibleArea=X(d.visibleArea,d.coordinates.width*d.boundary.width/(d.visibleArea.width*e.width));var f=_(d.visibleArea,ao(d,b));return 1!==f&&(d.visibleArea=X(d.visibleArea,f),d.coordinates=X(d.coordinates,f)),d.visibleArea=V(d.visibleArea,Q(R(d.coordinates),R(d.visibleArea))),d.visibleArea=ah(d.visibleArea,ap(d,b)),d.coordinates=ah(d.coordinates,af(W(d.visibleArea),ap(d,b))),d};}return a}function a4(a,b,c){if(c.immediately){if(an(a)){var d=J(a),e={width:0,height:0};Y(d.boundary)>Y(d.coordinates)?(e.height=.8*d.boundary.height,e.width=e.height*Y(d.coordinates)):(e.width=.8*d.boundary.width,e.height=e.width*Y(d.coordinates)),d.visibleArea=X(d.visibleArea,d.coordinates.width*d.boundary.width/(d.visibleArea.width*e.width));var f=_(d.visibleArea,ao(d,b));return d.visibleArea=X(d.visibleArea,f),1!==f&&(e.height/=f,e.width/=f),d.visibleArea=V(d.visibleArea,Q(R(d.coordinates),R(d.visibleArea))),d.visibleArea=ah(d.visibleArea,ap(d,b)),d.coordinates=ah(d.coordinates,af(W(d.visibleArea),ar(d,b))),d};}return a}var a5=function(a,b){var c,d=(c=(0,j.useRef)(!0)).current?(c.current=!1,!0):c.current;(0,j.useEffect)(function(){if(!d)return a()},b)};function a6(a){var b=q((0,j.useState)(a),2),c=b[0],d=b[1],e=q((0,j.useState)(null),2),f=e[0],g=e[1],h=(0,j.useRef)(a);return a5(function(){f&&f(c,h.current)},[f]),[c,function(a,b){h.current=c,d(a),g(function(){return b})}]}var a7=function(a){function b(b,c){var d=a.call(this)||this;return d.props=b,d.notify=c,d.data={state:null,transitions:!1,interactions:{moveCoordinates:!1,resizeCoordinates:!1,transformImage:{rotate:!1,move:!1,scale:!1,flip:!1}}},d}return l(b,a),b.prototype.getProps=function(){return this.props()},b.prototype.setData=function(a){this.data=a,this.notify()},b.prototype.getData=function(){return this.data},b}(function(){var a=this;this.getTransitions=function(){var b=a.getData(),c=a.getProps().transitions;return m(m({},z(c,{timingFunction:"ease-in-out",duration:350})),{active:b.transitions})},this.getInteractions=function(){return J(a.getData().interactions)},this.hasInteractions=function(){return s(a.getData().interactions)},this.startTransitions=function(){var b=a.getProps(),c=b.onTransitionsStart,d=b.onUpdate,e=b.getInstance,f=a.getData(),g=f.transitions,h=n(f,["transitions"]);a.setData(m(m({},h),{transitions:!0})),g||aM([c,d],e),a.endTransitions()},this.endTransitions=M(function(){var b=a.getProps(),c=b.onTransitionsEnd,d=b.onUpdate,e=b.getInstance;a.setData(m(m({},a.getData()),{transitions:!1})),aM([c,d],e)},function(){return a.getTransitions().duration}),this.applyPostProcess=function(b,c){var d=a.getProps(),e=d.settings,f=d.postProcess,g=b.name,h=b.interaction,i=b.transitions,j=b.immediately,k={name:g,interaction:void 0!==h&&h,transitions:void 0!==i&&i,immediately:void 0!==j&&j};return Array.isArray(f)?f.reduce(function(a,b){return b(a,e,k)},c):w(f)?f(c,e,k):c},this.updateState=function(b,c,d){void 0===c&&(c={}),void 0===d&&(d=[]);var e=c.transitions,f=void 0!==e&&e,g=a.getProps(),h=g.onTransitionsStart,i=g.getInstance,j=g.onChange,k=g.onUpdate,l=g.settings,n=a.getData(),o=w(b)?b(n.state,l):b,p=o?.001*as(o):.001,q=!K(n.state,o,p),r=["coordinates","boundary","visibleArea","imageSize","transforms"].some(function(a){var b;return!K(null==(b=n.state)?void 0:b[a],null==o?void 0:o[a],p)}),s=n;q&&(f&&r&&a.endTransitions(),s=m(m({},s),{state:J(o),transitions:f&&r}),a.setData(s),aL(j,i)),s.transitions&&!n.transitions&&aL(h,i),aM(function(){for(var a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(var d=Array(a),e=0,b=0;b<c;b++)for(var f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d}(d,[k]),i)},this.setInteractions=function(b){var c=a.getProps(),d=c.onInteractionStart,e=c.onInteractionEnd,f=c.getInstance,g=a.getInteractions(),h=m(m({},g),b);if(K(g,h)||a.setData(m(m({},a.getData()),{interactions:h})),s(g)!==s(h))if(s(g)){var i=a.getData().state;a.updateState(function(){return i&&a.applyPostProcess({name:"interactionEnd",immediately:!0,transitions:!0},i)},{transitions:!0},[e])}else aL(d,f)},this.resetState=function(b,c){a.updateState(a.createDefaultState(b,c))},this.clear=function(){a.updateState(null)},this.reconcileState=function(b){void 0===b&&(b={});var c=a.getProps(),d=c.reconcileStateAlgorithm,e=c.settings,f=a.getData().state,g=b.transitions,h=void 0!==g&&g;if(f&&!ay(f,e)){var i=(d||function(a,b){if(an(a)){var c=J(a),d=au(a,b),e=aq(a,b),f=ao(a,b),g=$(Y(a.coordinates),d),h=g?{height:a.coordinates.height,width:a.coordinates.height*g}:a.coordinates;c.coordinates=m(m({},c.coordinates),az({width:h.width,height:h.height,aspectRatio:d,sizeRestrictions:am(f,e)})),c.coordinates=V(c.coordinates,Q(R(a.coordinates),R(c.coordinates)));var i=Math.max(c.coordinates.width/c.visibleArea.width,c.coordinates.height/c.visibleArea.height,1);return c.visibleArea=m(m({},a.visibleArea),az({width:a.visibleArea.width*i,height:a.visibleArea.height*i,aspectRatio:{minimum:Y(c.boundary),maximum:Y(c.boundary)},sizeRestrictions:f})),c.visibleArea=V(c.visibleArea,Q(R(a.visibleArea),R(c.visibleArea))),c.visibleArea=ah(c.visibleArea,ap(c,b)),c.coordinates=ah(c.coordinates,af(W(c.visibleArea),ar(c,b))),c}return a})(f,e);i=a.applyPostProcess({name:"reconcileState",immediately:!0,transitions:h},i),a.updateState(i,{transitions:h})}},this.transformImage=function(b,c){void 0===c&&(c={});var d=c.transitions,e=void 0===d||d,f=c.interaction,g=c.immediately,h=void 0!==g&&g,i=c.normalize,j=a.getProps(),k=j.transformImageAlgorithm,l=j.onTransformImage,n=j.onTransformImageEnd,o=j.settings,p=a.getData().state,q=[];if(p){(void 0===i||i)&&((r=b).scale&&(r.scale={factor:C(r.scale)?r.scale:r.scale.factor,center:!C(r.scale)&&r.scale.center?aJ(p,r.scale.center):void 0}),r.rotate&&(r.rotate={angle:C(r.rotate)?r.rotate:r.rotate.angle,center:!C(r.rotate)&&r.rotate.center?aJ(p,r.rotate.center):void 0}),r.move&&(r.move=aK(p,r.move)),b=r);var r,s=a.applyPostProcess({name:"transformImage",transitions:e,immediately:h},(k||function(a,b,c){return c.rotate&&(a=function(a,b,c){if(an(a)){var d=J(a),e=C(c)?c:c.angle,f=ad(R(m({left:0,top:0},ax(a))),e);d.transforms.rotate+=e,d.coordinates=m(m({},az({sizeRestrictions:aq(d,b),aspectRatio:au(d,b),width:d.coordinates.width,height:d.coordinates.height})),ad(R(d.coordinates),e));var g=!C(c)&&c.center?c.center:R(a.coordinates),h=Q(R(a.coordinates),ad(R(a.coordinates),e,g)),i=ax(d);return d.coordinates.left-=f.left-i.width/2+d.coordinates.width/2-h.left,d.coordinates.top-=f.top-i.height/2+d.coordinates.height/2-h.top,d.visibleArea=ab(d.visibleArea,am(ao(d,b),{minWidth:d.coordinates.width,minHeight:d.coordinates.height})),d.coordinates=ah(d.coordinates,ar(d,b)),d.visibleArea=V(d.visibleArea,Q(R(d.coordinates),R(a.coordinates))),d.visibleArea=ah(d.visibleArea,ap(d,b)),d}return a}(a,b,c.rotate)),c.flip&&(a=function(a,b,c,d){if(an(a)){var e=J(a),f=a.transforms.rotate,g=ax(a);if(c||d){var h=ad({left:g.width/2,top:g.height/2},-f),i=ad(R(e.coordinates),-f),j=ad({left:c?h.left-(i.left-h.left):i.left,top:d?h.top-(i.top-h.top):i.top},f);e.coordinates=V(e.coordinates,Q(j,R(e.coordinates))),i=ad(R(e.visibleArea),-f),j=ad({left:c?h.left-(i.left-h.left):i.left,top:d?h.top-(i.top-h.top):i.top},f),e.visibleArea=V(e.visibleArea,Q(j,R(e.visibleArea))),e.visibleArea=ah(e.visibleArea,ap(e,b))}return c&&(e.transforms.flip.horizontal=!a.transforms.flip.horizontal),d&&(e.transforms.flip.vertical=!a.transforms.flip.vertical),e}return a}(a,b,c.flip.horizontal,c.flip.vertical)),(c.move||c.scale)&&(a=function(a,b,c){var d,e=c.scale,f=void 0===e?1:e,g=c.move,h=void 0===g?{}:g;if(an(a)){var i,j=J(a),k=1/(C(f)?f:f.factor),l=C(f)?void 0:f.center,m=!F(k,1),n=1,o=1;j.visibleArea=V(j.visibleArea,{left:h.left||0,top:h.top||0});var p=aq(j,b),q=ar(j,b),r=ao(j,b),s={stencil:{minimum:Math.max(p.minWidth?p.minWidth/j.coordinates.width:0,p.minHeight?p.minHeight/j.coordinates.height:0),maximum:Math.min(p.maxWidth?p.maxWidth/j.coordinates.width:1/0,p.maxHeight?p.maxHeight/j.coordinates.height:1/0,Z(j.coordinates,ae(q)))},area:{maximum:Z(j.visibleArea,r),minimum:(i=j.visibleArea,Math.max(r.minWidth?r.minWidth/i.width:0,r.minHeight?r.minHeight/i.height:0))}};k&&m&&(k<1?(o=Math.max(k,Math.max(s.area.minimum,s.stencil.minimum)))>1&&(o=1):k>1&&(o=Math.min(k,Math.min(s.area.maximum,s.stencil.maximum)))<1&&(o=1)),o&&(j.visibleArea=X(j.visibleArea,o,l));var t={left:a.coordinates.left-a.visibleArea.left,right:a.visibleArea.width+a.visibleArea.left-(a.coordinates.width+a.coordinates.left),top:a.coordinates.top-a.visibleArea.top,bottom:a.visibleArea.height+a.visibleArea.top-(a.coordinates.height+a.coordinates.top)};return j.visibleArea=ah(j.visibleArea,{left:void 0!==q.left?q.left-t.left*o:void 0,top:void 0!==q.top?q.top-t.top*o:void 0,bottom:void 0!==q.bottom?q.bottom+t.bottom*o:void 0,right:void 0!==q.right?q.right+t.right*o:void 0}),j.visibleArea=ah(j.visibleArea,ap(j,b)),j.coordinates.width=j.coordinates.width*o,j.coordinates.height=j.coordinates.height*o,j.coordinates.left=j.visibleArea.left+t.left*o,j.coordinates.top=j.visibleArea.top+t.top*o,j.coordinates=ah(j.coordinates,af(W(j.visibleArea),q)),m&&k&&(null==(d=b.transformImage)?void 0:d.adjustStencil)&&(k>1?n=Math.min(s.area.maximum,k)/o:k<1&&(n=Math.max(j.coordinates.height/j.visibleArea.height,j.coordinates.width/j.visibleArea.width,k/o)),1!==n&&(j.visibleArea=X(j.visibleArea,n,k>1?l:R(j.coordinates)),j.visibleArea=ah(j.visibleArea,ap(j,b)),j.visibleArea=V(j.visibleArea,U(ag(j.coordinates,W(j.visibleArea)))))),j}return a}(a,b,c)),a})(p,o,b));q.push(l),void 0===f||f?a.setInteractions({transformImage:{rotate:!x(b.rotate),flip:!x(b.flip),scale:!x(b.scale),move:!x(b.move)}}):(s=a.applyPostProcess({name:"transformImageEnd",transitions:e,immediately:!0},s),q.push(n)),a.updateState(s,{transitions:h&&e},q)}},this.transformImageEnd=function(b){void 0===b&&(b={});var c=b.immediately,d=void 0===c||c,e=b.transitions,f=void 0===e||e,g=a.getData().state,h=a.getProps().onTransformImageEnd;a.updateState(function(){return g&&a.applyPostProcess({name:"transformImageEnd",immediately:d,transitions:f},g)},{transitions:f},[h]),a.setInteractions({transformImage:{rotate:!1,flip:!1,scale:!1,move:!1}})},this.zoomImage=function(b,c){void 0===c&&(c={});var d=c.interaction,e=c.immediately,f=c.transitions,g=c.normalize;a.transformImage({scale:b},{interaction:void 0!==d&&d,immediately:void 0===e||e,transitions:void 0===f||f,normalize:void 0!==g&&g})},this.moveImage=function(b,c,d){void 0===d&&(d={});var e=d.interaction,f=d.immediately,g=d.transitions,h=d.normalize;a.transformImage({move:{left:b,top:c}},{interaction:void 0!==e&&e,immediately:void 0===f||f,transitions:void 0===g||g,normalize:void 0!==h&&h})},this.flipImage=function(b,c,d){void 0===d&&(d={});var e=d.interaction,f=d.immediately,g=d.transitions,h=d.normalize,i=a.getState(),j={horizontal:b,vertical:c};a.transformImage({flip:i&&(void 0===h||h)?function(a,b){if(a){var c=Math.abs(a.transforms.rotate%180);if(!(c<=45)&&!(c>=135))return{horizontal:b.vertical,vertical:b.horizontal}}return b}(i,j):j},{interaction:void 0!==e&&e,immediately:void 0===f||f,transitions:void 0===g||g})},this.rotateImage=function(b,c){void 0===c&&(c={});var d=c.interaction,e=c.immediately,f=c.transitions,g=c.normalize;a.transformImage({rotate:b},{interaction:void 0!==d&&d,immediately:void 0===e||e,transitions:void 0===f||f,normalize:void 0!==g&&g})},this.reset=function(b,c){a.resetState(b,c)},this.setState=function(b,c){void 0===c&&(c={});var d=a.getSettings(),e=a.getData().state,f=c.transitions,g=void 0===f||f,h=c.immediately,i=void 0!==h&&h,j=c.interaction,k=void 0!==j&&j,l=c.postprocess,n=void 0!==l&&l,o=b&&(w(b)?b(e,d):m(m({},e),b));a.updateState(function(){return n?o&&a.applyPostProcess({name:"setState",immediately:i,transitions:g,interaction:k},o):o},{transitions:g})},this.setCoordinates=function(b,c){void 0===c&&(c={});var d=a.getData().state,e=a.getProps(),g=e.setCoordinatesAlgorithm,h=e.settings,i=c.transitions,j=void 0===i||i,k=c.immediately,l=void 0===k||k;a.updateState(function(){return d&&a.applyPostProcess({name:"setCoordinates",immediately:l,transitions:j},(g||aC)(d,h,b,f.zoom))},{transitions:j})},this.setVisibleArea=function(b,c){void 0===c&&(c={});var d=c.transitions,e=void 0===d||d,f=c.immediately,g=void 0===f||f,h=a.getData().state,i=a.getProps(),j=i.setVisibleAreaAlgorithm,k=i.settings;a.updateState(function(){return h&&a.applyPostProcess({name:"setVisibleArea",immediately:g,transitions:e},(j||aE)(h,k,b))},{transitions:e})},this.setBoundary=function(b,c){void 0===c&&(c={});var d=a.getData().state,e=a.getProps(),f=e.setBoundaryAlgorithm,g=e.settings,h=c.transitions,i=void 0!==h&&h,j=c.immediately,k=void 0===j||j;b?a.updateState(function(){return d&&a.applyPostProcess({name:"setBoundary",immediately:k,transitions:i},(f||function(a,b,c){var d=m(m({},J(a)),{boundary:c});if(d.visibleArea&&d.coordinates&&a.visibleArea){d.visibleArea.height=d.visibleArea.width/Y(c),d.visibleArea.top+=(a.visibleArea.height-d.visibleArea.height)/2;var e=aq(d,b);(Math.max(e.minHeight,d.coordinates.height)-d.visibleArea.height>0||Math.max(e.minWidth,d.coordinates.width)-d.visibleArea.width>0)&&(d.visibleArea=X(d.visibleArea,Math.max(Math.max(e.minHeight,d.coordinates.height)/d.visibleArea.height,Math.max(e.minWidth,d.coordinates.width)/d.visibleArea.width))),d.visibleArea=ab(d.visibleArea,ao(d,b));var f=U(ag(d.coordinates,W(d.visibleArea)));d.visibleArea.width<d.coordinates.width&&(f.left=0),d.visibleArea.height<d.coordinates.height&&(f.top=0),d.visibleArea=V(d.visibleArea,f),d.visibleArea=ah(d.visibleArea,ap(d,b)),d=aD(d,b)}return d})(d,g,b))}):a.updateState(null)},this.moveCoordinates=function(b,c){void 0===c&&(c={});var d=a.getData(),e=a.getProps(),f=e.moveCoordinatesAlgorithm,g=e.onMove,h=e.onMoveEnd,i=e.settings,j=c.interaction,k=void 0===j||j,l=c.transitions,m=void 0!==l&&l,n=c.immediately,o=void 0!==n&&n,p=c.normalize,q=[];if(!d.transitions&&d.state){var r=void 0===p||p?aK(d.state,b):{left:C(b.left)?b.left:0,top:C(b.top)?b.top:0},s=a.applyPostProcess({name:"moveCoordinates",interaction:k,immediately:o,transitions:m},(f||function(a,b,c){if(an(a)){var d=J(a);return d.coordinates=V(d.coordinates,c),d.coordinates=ah(d.coordinates,af(W(d.visibleArea),ar(d,b))),d}return a})(d.state,i,r));q.push(g),k?a.setInteractions({moveCoordinates:!0}):(s=a.applyPostProcess({name:"moveCoordinatesEnd",interaction:k,immediately:o,transitions:m},s),q.push(h)),a.updateState(s,{transitions:o&&m},q)}},this.moveCoordinatesEnd=function(b){void 0===b&&(b={});var c=a.getData().state,d=a.getProps().onMoveEnd,e=b.transitions,f=void 0===e||e,g=b.immediately,h=void 0!==g&&g;a.updateState(function(){return c&&a.applyPostProcess({name:"moveCoordinatesEnd",transitions:f,immediately:h},c)},{transitions:f},[d]),a.setInteractions({moveCoordinates:!1})},this.resizeCoordinates=function(b,c,d,e){void 0===e&&(e={});var f=a.getData().state,g=a.getProps(),h=g.resizeCoordinatesAlgorithm,i=g.onResize,j=g.onResizeEnd,k=g.settings,l=e.interaction,n=void 0===l||l,o=e.transitions,p=void 0!==o&&o,q=e.immediately,r=void 0!==q&&q,s=e.normalize;if(!a.getTransitions().active&&f){var t,u=[],v=void 0===s||s?(t=as(f),{left:C(c.left)?c.left*t:0,top:C(c.top)?c.top*t:0,right:C(c.right)?c.right*t:0,bottom:C(c.bottom)?c.bottom*t:0}):{left:C(c.left)?c.left:0,top:C(c.top)?c.top:0,right:C(c.right)?c.right:0,bottom:C(c.bottom)?c.bottom:0},w=a.applyPostProcess({name:"resizeCoordinates",interaction:n,immediately:r,transitions:p},(h||function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p=a.coordinates?Math.min(a.coordinates.width,a.coordinates.height,20*as(a)):1,q=aq(a,b);return an(a)?m(m({},J(a)),{coordinates:(f=a.coordinates,g={positionRestrictions:af(ar(a,b),W(a.visibleArea)),sizeRestrictions:{maxWidth:Math.min(q.maxWidth,a.visibleArea.width),maxHeight:Math.min(q.maxHeight,a.visibleArea.height),minWidth:Math.max(Math.min(q.minWidth,a.visibleArea.width),p),minHeight:Math.max(Math.min(q.minHeight,a.visibleArea.height),p)},aspectRatio:au(a,b)},h=e.reference,j={left:-1===(i=c.toLowerCase()).indexOf("west")?d.left:-d.left,top:-d.top,right:d.left,bottom:d.top},["north","south","center"].every(function(a){return -1===i.indexOf(a)})&&(j.top=0,j.bottom=0),["west","east","center"].every(function(a){return -1===i.indexOf(a)})&&(j.left=0,j.right=0),k=aI(c),N.forEach(function(a){k[a]||(j[a]=0)}),l=j,n=aI(c),o=function(a,b,c,d){var e=d.aspectRatio,f=d.positionRestrictions,g=d.sizeRestrictions,h=m({},a);b=m({},b);var i=c.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};a.width<g.minWidth&&(b.left=0,b.right=0),a.height<g.minHeight&&(b.top=0,b.bottom=0),N.forEach(function(a){i[a]||(b[a]=0)}),b=aF({coordinates:h,directions:b,sizeRestrictions:g,positionRestrictions:f,allowedDirections:i});var j=T(h,b).width,k=T(h,b).height,l=c.preserveAspectRatio?Y(h):$(j/k,e);if(l){var n=c.respectDirection;if("width"!==n&&"height"!==n&&(n=h.width>=h.height||1===l?"width":"height"),"width"===n){var o=j/l-h.height;if(i.top&&i.bottom){var p=b.top,q=b.bottom;b.bottom=aG(o,q,p),b.top=aG(o,p,q)}else i.bottom?b.bottom=o:i.top?b.top=o:i.right?b.right=0:i.left&&(b.left=0)}else if("height"===n){var r=h.width-k*l;if(i.left&&i.right){var s=b.left,t=b.right;b.left=-aG(r,s,t),b.right=-aG(r,t,s)}else i.left?b.left=-r:i.right?b.right=-r:i.top?b.top=0:i.bottom&&(b.bottom=0)}b=aF({directions:b,coordinates:h,sizeRestrictions:g,positionRestrictions:f,preserveRatio:!0,compensate:c.compensate,allowedDirections:i})}return j=T(h,b).width,k=T(h,b).height,(l=c.preserveAspectRatio?Y(h):$(j/k,e))&&G(Math.abs(l-j/k),0)&&N.forEach(function(a){b[a]=0}),aB({width:a.width+b.right+b.left,height:a.height+b.top+b.bottom,left:a.left,top:a.top},{left:-b.left,top:-b.top},f)}(f,l,m(m({},e),{allowedDirections:n}),g),h&&(o=V(o,Q(aH(h,c),aH(o,c)))),ah(o,g.positionRestrictions))}):a})(f,k,b,v,y(d)?d:{}));u.push(i),n?a.setInteractions({resizeCoordinates:!0}):(w=a.applyPostProcess({name:"resizeCoordinatesEnd",interaction:n,immediately:r,transitions:p},w),u.push(j)),a.updateState(w,{transitions:r&&p},u)}},this.resizeCoordinatesEnd=function(b){void 0===b&&(b={});var c=a.getProps().onResizeEnd,d=a.getData().state,e=b.transitions,f=void 0===e||e,g=b.immediately,h=void 0!==g&&g;a.updateState(function(){return d&&a.applyPostProcess({name:"resizeCoordinatesEnd",transitions:f,immediately:h},d)},{transitions:f},[c]),a.setInteractions({resizeCoordinates:!1})},this.getStencilCoordinates=function(){return at(a.getData().state)},this.getCoordinates=function(b){void 0===b&&(b={});var c=a.getData().state,d=a.getProps().settings;if(!c||!c.coordinates)return null;var e=b.round;if(void 0!==e&&!e)return m({},c.coordinates);if(!an(c))return null;var f=aq(c,d),g=ar(c,d),h={width:Math.round(c.coordinates.width),height:Math.round(c.coordinates.height),left:Math.round(c.coordinates.left),top:Math.round(c.coordinates.top)};return h.width>f.maxWidth?h.width=Math.floor(c.coordinates.width):h.width<f.minWidth&&(h.width=Math.ceil(c.coordinates.width)),h.height>f.maxHeight?h.height=Math.floor(c.coordinates.height):h.height<f.minHeight&&(h.height=Math.ceil(c.coordinates.height)),ah(h,g)},this.getVisibleArea=function(){var b=a.getData().state;return(null==b?void 0:b.visibleArea)?m({},b.visibleArea):null},this.getSettings=function(){var b=a.getProps().settings;return m({},b)},this.getState=function(){return J(a.getData().state)},this.getTransforms=function(){var b=a.getData().state;return b?J(b.transforms):{rotate:0,flip:{horizontal:!1,vertical:!1}}},this.createDefaultState=function(b,c){var d=a.getProps(),e=d.createStateAlgorithm,g=d.settings;return a.applyPostProcess({name:"createState",immediately:!0,transitions:!1},(e||function(a,b){var c,d,e,g,i,j=a.boundary,k=a.image,l={boundary:{width:j.width,height:j.height},imageSize:{width:k.width,height:k.height},transforms:{rotate:(null==(c=k.transforms)?void 0:c.rotate)||0,flip:{horizontal:(null==(e=null==(d=k.transforms)?void 0:d.flip)?void 0:e.horizontal)||!1,vertical:(null==(i=null==(g=k.transforms)?void 0:g.flip)?void 0:i.vertical)||!1}},visibleArea:null,coordinates:null};return b.defaultTransforms&&(l.transforms=function(a,b){var c=m(m({},a.transforms),{flip:m({},a.transforms.flip)});if(b.defaultTransforms){var d=w(b.defaultTransforms)?b.defaultTransforms(a,b):b.defaultTransforms;C(d.rotate)&&(c.rotate=d.rotate),d.flip&&(B(d.flip.horizontal)&&(c.flip.horizontal=d.flip.horizontal),B(d.flip.vertical)&&(c.flip.vertical=d.flip.vertical))}return c}(l,b)),l=b.priority===h.visibleArea?aC(l=aE(l,b,aw(l,b),!1),b,av(l,b),f.limit):aE(l=aC(l,b,av(l,b),f.unsafe),b,aw(l,b),!0)})({image:c,boundary:b},g))},this.isConsistent=function(){var b=a.getData().state,c=a.getProps().settings;return!b||ay(b,c)}});function a8(){var a=q((0,j.useState)({}),2);a[0];var b=a[1];return function(){b({})}}var a9=function(a){var b=(0,j.useRef)(a),c=function(){b.current&&b.current()};(0,j.useEffect)(function(){b.current=a},[a]),(0,j.useEffect)(function(){return window.addEventListener("resize",c),window.addEventListener("orientationchange",c),function(){window.removeEventListener("resize",c),window.removeEventListener("orientationchange",c)}},[])},ba=(0,j.forwardRef)(function(a,b){var c=a.className,d=a.style,e=a.stretcherClassName,f=a.contentClassName,g=a.stretchAlgorithm,h=void 0===g?aS:g,i=a.sizeAlgorithm,k=void 0===i?aU:i,l=a.children,m=(0,j.useRef)(null),n=(0,j.useRef)(null);return(0,j.useImperativeHandle)(b,function(){return{reset:function(){var a=m.current;a&&(a.style.height="",a.style.width="")},stretchTo:function(a){var b=m.current,c=n.current;if(null==a||!a.width||null==a||!a.height||!b||!c)return b&&(b.style.height="",b.style.width=""),Promise.resolve(null);h(c,b,a);var d=k(c,a);return Promise.resolve(d.width&&d.height?d:null)}}}),j.default.createElement("div",{ref:n,style:d,className:(0,aZ.default)("advanced-cropper-boundary",c)},j.default.createElement("div",{ref:m,className:(0,aZ.default)(["advanced-cropper-boundary__stretcher",e])}),j.default.createElement("div",{className:(0,aZ.default)(["advanced-cropper-boundary__content",f])},l))});ba.displayName="StretchableBoundary";var bb=function(a){var b=a.visible,c=a.className,d=a.style,e=a.children;return j.default.createElement("div",{style:d,className:(0,aZ.default)(c,"advanced-cropper-fade",!!b&&"advanced-cropper-fade--visible")},e)},bc=function(a){var b=a.cropper,c=a.children,d=a.className,e=a.style,f=b?b.getState():null,g=!!b&&b.isLoaded();return j.default.createElement("div",{className:(0,aZ.default)(d,"advanced-cropper-wrapper"),style:e},j.default.createElement(bb,{visible:f&&g,className:"advanced-cropper-wrapper__fade"},c))};function bd(a){a.preventDefault()}var be=(0,j.forwardRef)(function(a,b){var c,d=a.className,e=a.style,f=a.cropper,g=a.crossOrigin,h=void 0===g||g,i=f.getState(),k=f.getTransitions(),l=f.getImage(),n=l&&i?(void 0===(c=k)&&(c=null),l&&i&&i.visibleArea)?aR(l,i,i.visibleArea,as(i),c):{}:{},o=l?l.src:void 0;return o?j.default.createElement("img",{key:o,ref:b,className:(0,aZ.default)("advanced-cropper-background-image",d),src:o,crossOrigin:!0===h?"anonymous":h||void 0,style:m(m({},n),e),onMouseDown:bd}):null});be.displayName="CropperBackgroundImage";var bf=(0,j.forwardRef)(function(a,b){var c=(0,j.useRef)(null),d=(0,j.useRef)(null);return(0,j.useImperativeHandle)(b,function(){return{draw:function(a,b,e){return(void 0===e&&(e={}),b&&c.current&&d.current)?function(a,b,c,d,e){if(!an(a))return null;var f=a.transforms,g=a.coordinates,h=0!==f.rotate||f.flip.horizontal||f.flip.vertical?function(a,b,c){var d=c.rotate,e=c.flip,f={width:"naturalWidth"in b?b.naturalWidth:b.width,height:"naturalHeight"in b?b.naturalHeight:b.height},g=ac(f,d),h=a.getContext("2d");if(a.height=g.height,a.width=g.width,h){h.save();var i=ad(R(m({left:0,top:0},f)),d);h.translate(-(i.left-g.width/2),-(i.top-g.height/2)),h.rotate(d*Math.PI/180),h.translate(e.horizontal?f.width:0,e.vertical?f.height:0),h.scale(e.horizontal?-1:1,e.vertical?-1:1),h.drawImage(b,0,0,f.width,f.height),h.restore()}return a}(d,b,f):b,i=m({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:1/0,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},e),j=function(a){return a.find(function(a){return D(a)})},k=az({sizeRestrictions:{minWidth:j([i.width,i.minWidth])||0,minHeight:j([i.height,i.minHeight])||0,maxWidth:j([i.width,i.maxWidth])||1/0,maxHeight:j([i.height,i.maxHeight])||1/0},width:g.width,height:g.height,aspectRatio:{minimum:g.width/g.height,maximum:g.width/g.height}});if(i.maxArea&&k.width*k.height>i.maxArea){var l=Math.sqrt(i.maxArea/(k.width*k.height));k={width:Math.round(l*k.width),height:Math.round(l*k.height)}}var n=k;c.width=n?n.width:g.width,c.height=n?n.height:g.height;var o=c.getContext("2d");if(o){o.clearRect(0,0,c.width,c.height),i&&(i.imageSmoothingEnabled&&(o.imageSmoothingEnabled=i.imageSmoothingEnabled),i.imageSmoothingQuality&&(o.imageSmoothingQuality=i.imageSmoothingQuality),i.fillColor&&(o.fillStyle=i.fillColor,o.fillRect(0,0,c.width,c.height),o.save()));var p=g.left<0?-g.left:0,q=g.top<0?-g.top:0;o.drawImage(h,g.left+p,g.top+q,g.width,g.height,p*(c.width/g.width),q*(c.height/g.height),c.width,c.height)}return c}(a,b,c.current,d.current,e):null}}}),j.default.createElement(j.default.Fragment,null,j.default.createElement("canvas",{className:"advanced-cropper-canvas",ref:c}),j.default.createElement("canvas",{className:"advanced-cropper-canvas",ref:d}))});bf.displayName="CropperCanvas";var bg=function(a){function b(b){var c=a.call(this,b)||this;return c.processMove=function(a,b){var d,e=c.container.current;if(e&&c.touches.length){var f=e.getBoundingClientRect(),g=f.left,h=f.top;if(1===c.touches.length&&1===b.length&&c.props.onMove){var i={left:Math.abs(b[0].clientX-c.anchor.left-g)<Math.abs(c.touches[0].clientX-c.anchor.left-g),top:Math.abs(b[0].clientY-c.anchor.top-h)<Math.abs(c.touches[0].clientY-c.anchor.top-h)},j={left:0,top:0};c.props.useAnchor&&i.left||(j.left=b[0].clientX-c.touches[0].clientX),c.props.useAnchor&&i.top||(j.top=b[0].clientY-c.touches[0].clientY),null==(d=c.props)||d.onMove(j,a),c.touches=r([],q(b),!1)}}},c.processEnd=function(){var a=c.props,b=a.onMoveEnd,d=a.onLeave;!c.props.disabled&&c.touches.length&&(null==b||b()),c.hovered&&(null==d||d(),c.hovered=!1),c.touches=[]},c.initAnchor=function(a){var b=c.container.current;if(b){var d=b.getBoundingClientRect(),e=d.left,f=d.top;c.anchor={left:a.clientX-e,top:a.clientY-f}}},c.onMouseOver=function(){var a=c.props,b=a.onEnter,d=a.disabled;c.hovered||d||(c.hovered=!0,null==b||b())},c.onMouseLeave=function(){var a=c.props.onLeave;c.hovered&&!c.touches.length&&(c.hovered=!1,null==a||a())},c.onTouchStart=function(a){var b=c.props,d=b.onEnter,e=b.onMoveStart,f=b.disabled;if(a.cancelable){c.touches=Array.from(a.touches);var g=!f&&1===a.touches.length;g&&(c.touches=Array.from(a.touches),null==e||e()),c.hovered||f||(c.hovered=!0,null==d||d()),(c.started||g)&&(a.preventDefault(),a.stopPropagation())}},c.onTouchEnd=function(){c.started=!1,c.processEnd()},c.onTouchMove=function(a){c.touches.length>=1&&(c.started?(c.processMove(a,Array.from(a.touches)),a.preventDefault(),a.stopPropagation()):E({left:c.touches[0].clientX,top:c.touches[0].clientY},{left:a.touches[0].clientX,top:a.touches[0].clientY})>(c.props.activationDistance||0)&&(c.initAnchor({clientX:a.touches[0].clientX,clientY:a.touches[0].clientY}),c.started=!0))},c.onMouseDown=function(a){var b=c.props,d=b.onMoveStart;if(!b.disabled&&0===a.button){var e={clientX:a.clientX,clientY:a.clientY};c.touches=[e],c.initAnchor(e),a.stopPropagation(),null==d||d()}},c.onMouseMove=function(a){!c.props.disabled&&c.touches.length&&(c.processMove(a,[{clientX:a.clientX,clientY:a.clientY}]),a.preventDefault&&a.cancelable&&a.preventDefault(),a.stopPropagation())},c.onMouseUp=function(){c.processEnd()},c.touches=[],c.hovered=!1,c.started=!1,c.anchor={left:0,top:0},c.container=(0,j.createRef)(),c}return l(b,a),b.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd);var a=this.container.current;a&&(a.removeEventListener("touchstart",this.onTouchStart),a.removeEventListener("mousedown",this.onMouseDown))},b.prototype.componentDidMount=function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1});var a=this.container.current;a&&(a.addEventListener("touchstart",this.onTouchStart,{passive:!1}),a.addEventListener("mousedown",this.onMouseDown,{passive:!1}))},b.prototype.componentDidUpdate=function(a){this.props.disabled&&!a.disabled&&(this.touches=[])},b.prototype.render=function(){var a=this.props,b=a.children,c=a.className;return j.default.createElement("div",{className:(0,aZ.default)("advanced-cropper-draggable-element",c),ref:this.container,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave},b)},b.defaultProps={disabled:!1,activationDistance:30,useAnchor:!0,rerender:!0},b}(j.Component),bh=function(a){var b=a.position,c=a.className,d=a.disabled,e=a.onDrag,f=a.onDragEnd,g=a.onLeave,h=a.onEnter,i=a.children;return j.default.createElement(bg,{className:(0,aZ.default)(["advanced-cropper-line-wrapper",b&&"advanced-cropper-line-wrapper--".concat(b),d&&"advanced-cropper-line-wrapper--disabled",c]),disabled:d,onMove:e,onMoveEnd:f,onLeave:g,onEnter:h,activationDistance:0},j.default.createElement("div",{className:(0,aZ.default)(["advanced-cropper-line-wrapper__content",b&&"advanced-cropper-line-wrapper__content--".concat(b)])},i))},bi=function(a){var b,c,d=a.position,e=a.hoverClassName,f=a.wrapperClassName,g=a.defaultClassName,h=a.disabled,i=a.onMove,k=a.onMoveEnd,l=q((0,j.useState)(!1),2),m=l[0],n=l[1];return j.default.createElement(bh,{className:(0,aZ.default)("advanced-cropper-simple-line-wrapper",f,((b={})["advanced-cropper-simple-line-wrapper--".concat(d)]=!!d,b)),position:d,disabled:h,onDrag:i,onDragEnd:k,onLeave:function(){n(!1)},onEnter:function(){n(!0)}},j.default.createElement("div",{className:(0,aZ.default)("advanced-cropper-simple-line",m&&"advanced-cropper-simple-line--hover",g,m&&e,((c={})["advanced-cropper-simple-line--".concat(d)]=!!d,c))}))},bj=function(a){var b=a.horizontalPosition,c=a.verticalPosition,d=a.className,e=a.disabled,f=a.onDrag,g=a.onDragEnd,h=a.onLeave,i=a.onEnter,k=a.children,l=a.style,m=b||c?t(b,c).snakeCase:null;return j.default.createElement("div",{style:l,className:(0,aZ.default)(d,"advanced-cropper-handler-wrapper",m&&"advanced-cropper-handler-wrapper--".concat(m),e&&"advanced-cropper-handler-wrapper--disabled")},j.default.createElement(bg,{className:"advanced-cropper-handler-wrapper__draggable",disabled:e,onMove:f,onMoveEnd:g,onLeave:h,onEnter:i,activationDistance:0},k))},bk=function(a){var b,c=a.verticalPosition,d=a.horizontalPosition,e=a.hoverClassName,f=a.wrapperClassName,g=a.defaultClassName,h=a.wrapperStyle,i=a.disabled,k=a.onMove,l=a.onMoveEnd,m=q((0,j.useState)(!1),2),n=m[0],o=m[1];return j.default.createElement(bj,{style:h,className:(0,aZ.default)("advanced-cropper-simple-handler-wrapper",f,c&&"advanced-cropper-simple-handler-wrapper--".concat(c),d&&"advanced-cropper-simple-handler-wrapper--".concat(d),d&&c&&"advanced-cropper-simple-handler-wrapper--".concat(d,"-").concat(c),n&&"advanced-cropper-simple-handler-wrapper--hover"),verticalPosition:c,horizontalPosition:d,disabled:i,onDrag:k,onDragEnd:l,onLeave:function(){o(!1)},onEnter:function(){o(!0)}},j.default.createElement("div",{className:(0,aZ.default)("advanced-cropper-simple-handler",n&&"advanced-cropper-simple-handler--hover",g,n&&e,((b={})["advanced-cropper-simple-handler--".concat(c)]=!!c,b["advanced-cropper-simple-handler--".concat(d)]=!!d,b["advanced-cropper-simple-handler--".concat(d,"-").concat(c)]=d&&c,b))}))},bl=["east","west",null],bm=["south","north",null],bn=function(a){var b=a.style,c=a.className,d=a.children,e=a.onResize,f=a.onResizeEnd,g=a.handlerComponent,h=void 0===g?bk:g,i=a.handlers,k=void 0===i?{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}:i,l=a.handlerClassNames,m=void 0===l?{}:l,n=a.handlerWrapperClassNames,o=void 0===n?{}:n,p=a.lines,r=void 0===p?{west:!0,north:!0,east:!0,south:!0}:p,s=a.lineComponent,u=void 0===s?bi:s,v=a.lineClassNames,w=void 0===v?{}:v,x=a.lineWrapperClassNames,z=void 0===x?{}:x,A=a.disabled,B=void 0!==A&&A,C=a.reference,D=void 0===C?null:C,E=q((0,j.useState)(null),2),F=E[0],G=E[1],H=(0,j.useMemo)(function(){var a=[];return bl.forEach(function(b){bm.forEach(function(c){if(b!==c){var d=t(b,c),e=d.snakeCase,f=d.camelCase;e&&f&&a.push({name:f,className:e,verticalPosition:c,horizontalPosition:b})}})}),a},[]),I=(0,j.useMemo)(function(){var a=[];return H.forEach(function(b){var c;("west"===(c=b.name)||"south"===c||"north"===c||"east"===c)&&(y(r)?r[b.name]:r)&&a.push({name:b.name,component:u,className:(0,aZ.default)(w.default,w[b.name],B&&w.disabled),wrapperClassName:(0,aZ.default)("advanced-cropper-bounding-box__line","advanced-cropper-bounding-box__line--".concat(b.name),z.default,z[b.name],B&&z.disabled),hoverClassName:w.hover,verticalPosition:b.verticalPosition,horizontalPosition:b.horizontalPosition,disabled:B})}),a},[H,r,u,w,z,B]),J=(0,j.useMemo)(function(){var a=[];return H.forEach(function(b){(y(k)?k[b.name]:k)&&a.push({name:b.name,component:h,className:(0,aZ.default)(m.default,m[b.name]),containerClassName:(0,aZ.default)("advanced-cropper-bounding-box__handler-wrapper","advanced-cropper-bounding-box__handler-wrapper--".concat(b.className)),wrapperClassName:(0,aZ.default)("advanced-cropper-bounding-box__handler","advanced-cropper-bounding-box__handler--".concat(b.className),o.default,o[b.name]),hoverClassName:m.hover,verticalPosition:b.verticalPosition,horizontalPosition:b.horizontalPosition,disabled:B})}),a},[H,k,h,m,o,B]),K=function(a,b){return function(c,d){var f,g=c.left,h=c.top;if(!b&&a?f="width":b&&!a&&(f="height"),!B){if(e){var i=t(a,b).camelCase;i&&e(i,{left:g,top:h},{reference:F||D,preserveAspectRatio:d&&d.shiftKey,respectDirection:f,compensate:!0})}F||G(D)}}},L=function(){null==f||f(),G(null)};return j.default.createElement("div",{className:(0,aZ.default)("advanced-cropper-bounding-box",c),style:b},d,j.default.createElement("div",null,I.map(function(a){return j.default.createElement(a.component,{key:a.name,defaultClassName:a.className,hoverClassName:a.hoverClassName,wrapperClassName:a.wrapperClassName,position:a.name,disabled:a.disabled,onMove:K(a.horizontalPosition,a.verticalPosition),onMoveEnd:L})})),j.default.createElement("div",null,J.map(function(a){var b=j.default.createElement(a.component,{defaultClassName:a.className,hoverClassName:a.hoverClassName,wrapperClassName:a.wrapperClassName,horizontalPosition:a.horizontalPosition,verticalPosition:a.verticalPosition,disabled:a.disabled,onMove:K(a.horizontalPosition,a.verticalPosition),onMoveEnd:L});return j.default.createElement("div",{key:a.name,className:a.containerClassName},b)})))},bo=function(a){var b=a.className,c=a.children;return j.default.createElement("div",{className:(0,aZ.default)("advanced-cropper-stencil-overlay",b)},c)},bp=function(a){var b,c,d,e,f,g=a.className,h=a.transitions,i=a.children,k=n(a,["className","transitions","children"]),l=(0,j.useRef)(null),o=(0,j.useRef)(k),p=q((0,j.useState)(k),2),r=p[0],s=p[1],t=q((void 0===(b=h)&&(b=null),c=(0,j.useRef)(new aW),e=(d=q((0,j.useState)(!1),2))[0],f=d[1],[function(a){b&&b.active?c.current.start(m(m({},b),{onStart:function(){f(!0)},onProgress:function(b){a(b)},onStop:function(){f(!1)}})):c.current.active||a(1)},e]),2),u=t[0],v=t[1];(0,j.useLayoutEffect)(function(){if(!K(r,k)){s(k);var a=v?m({},o.current):r;u(function(b){["left","top","height","width"].forEach(function(c){var d=k[c],e=a[c];o.current[c]=C(e)&&C(d)?e+(d-e)*b:d}),l.current&&(l.current.style.width="".concat(o.current.width,"px"),l.current.style.height="".concat(o.current.height,"px"),l.current.style.transform="translate3d(".concat(o.current.left,"px, ").concat(o.current.top,"px, 0px)"))})}},[r,v,k.width,k.height,k.top,k.left]);var w=v?o.current:k,x={left:0,top:0,width:"".concat(w.width,"px"),height:"".concat(w.height,"px"),transform:"translate3d(".concat(w.left,"px, ").concat(w.top,"px, 0px)")};return j.default.createElement("div",{ref:l,className:(0,aZ.default)("advanced-cropper-artificial-transition",g),style:x},i)},bq=function(a){var b=a.className,c=a.transitions,d=a.width,e=a.height,f=a.left,g=a.top,h=a.children;return j.default.createElement(bp,{className:(0,aZ.default)("advanced-cropper-stencil-wrapper",b),transitions:c,width:d,height:e,top:g,left:f},h)},br=function(a){var b=a.columns,c=void 0===b?3:b,d=a.rows,e=void 0===d?3:d,f=a.visible,g=void 0!==f&&f,h=a.className,i=[],k=q((0,j.useState)(c),2),l=k[0],m=k[1],n=q((0,j.useState)(e),2),o=n[0],p=n[1];a5(function(){g&&(p(e),m(c))},[g,c,e]);for(var r=0;r<o;r++){for(var s=[],t=0;t<l;t++)s.push(j.default.createElement("div",{key:t,className:(0,aZ.default)("advanced-cropper-stencil-grid__cell",0===r&&"advanced-cropper-stencil-grid__cell--top",r===o-1&&"advanced-cropper-stencil-grid__cell--bottom",0===t&&"advanced-cropper-stencil-grid__cell--left",t===l-1&&"advanced-cropper-stencil-grid__cell--right")}));i.push(j.default.createElement("div",{key:r,className:"advanced-cropper-stencil-grid__row"},s))}return j.default.createElement("div",{className:(0,aZ.default)("advanced-cropper-stencil-grid",g&&"advanced-cropper-stencil-grid--visible",h)},i)},bs=(0,j.forwardRef)(function(a,b){var c=a.cropper,d=a.coordinates,e=a.aspectRatio,f=a.minAspectRatio,g=a.maxAspectRatio,h=a.handlerComponent,i=a.handlers,k=a.handlerClassNames,l=a.handlerWrapperClassNames,m=a.lines,n=a.lineComponent,o=a.lineClassNames,p=a.lineWrapperClassNames,q=a.resizable,r=a.movable,s=a.grid,t=a.gridClassName,u=a.className,v=a.movingClassName,x=a.resizingClassName,y=a.previewClassName,z=a.boundingBoxClassName,A=a.overlayClassName,B=a.draggableAreaClassName,C=a.disabled,D=c.getState(),E=c.getTransitions(),F=c.getInteractions(),G=(void 0===q||q)&&!C,H=(void 0===r||r)&&!C;(0,j.useImperativeHandle)(b,function(){return{aspectRatio:ai(e||{minimum:f,maximum:g})}});var I=d?w(d)?d(D):d:at(D),J=I.width,K=I.height,L=I.left,M=I.top;return D&&j.default.createElement(bq,{className:(0,aZ.default)("advanced-cropper-rectangle-stencil",u,F.moveCoordinates&&v,F.resizeCoordinates&&x,{"advanced-cropper-rectangle-stencil--movable":H,"advanced-cropper-rectangle-stencil--moving":F.moveCoordinates,"advanced-cropper-rectangle-stencil--resizable":G,"advanced-cropper-rectangle-stencil--resizing":F.resizeCoordinates,"advanced-cropper-rectangle-stencil--disabled":C}),width:J,height:K,left:L,top:M,transitions:E},j.default.createElement(bn,{reference:D.coordinates,className:(0,aZ.default)(z,"advanced-cropper-rectangle-stencil__bounding-box"),handlers:void 0===i?{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}:i,handlerComponent:void 0===h?bk:h,handlerClassNames:void 0===k?{}:k,handlerWrapperClassNames:void 0===l?{}:l,lines:void 0===m?{west:!0,north:!0,east:!0,south:!0}:m,lineComponent:void 0===n?bi:n,lineClassNames:void 0===o?{}:o,lineWrapperClassNames:void 0===p?{}:p,onResize:function(a,b,d){c&&G&&c.resizeCoordinates(a,b,d)},onResizeEnd:function(){c&&c.resizeCoordinatesEnd()},disabled:!G},j.default.createElement(bg,{disabled:!H,onMove:function(a){c&&H&&c.moveCoordinates(a)},onMoveEnd:function(){c&&c.moveCoordinatesEnd()},className:(0,aZ.default)("advanced-cropper-rectangle-stencil__draggable-area",B)},j.default.createElement(bo,{className:(0,aZ.default)("advanced-cropper-rectangle-stencil__overlay",A)},s&&j.default.createElement(br,{visible:c.hasInteractions(),columns:F.transformImage.rotate?9:3,rows:F.transformImage.rotate?9:3,className:(0,aZ.default)("advanced-cropper-rectangle-stencil__grid",t)}),j.default.createElement("div",{className:(0,aZ.default)("advanced-cropper-rectangle-stencil__preview",y)})))))});bs.displayName="RectangleStencil";var bt=function(){function a(a){var b=a.active;this.active=b,this.defaultPrevented=!1}return a.prototype.preventDefault=function(){this.defaultPrevented=!0},a}(),bu=function(a){function b(b){var c=a.call(this,b)||this;return c.processMove=function(a){var b=c.props,d=b.onTransform,e=b.touchScale,f=b.touchMove,g=b.touchRotate,h=c.container.current;h&&d&&(d(function(a,b,c,d){if(void 0===d&&(d={}),1===b.length&&1===a.length)d.move&&(e={left:b[0].clientX-a[0].clientX,top:b[0].clientY-a[0].clientY});else if(a.length>1){var e,f,g,h=aX(b,c),i=aX(a,c);if(d.rotate&&2===b.length&&2===a.length){var j={left:[a[0].clientX-a[1].clientX,b[0].clientX-b[1].clientX],top:[a[0].clientY-a[1].clientY,b[0].clientY-b[1].clientY]},k=j.left[0]*j.top[1]-j.left[1]*j.top[0],l=j.left[0]*j.left[1]+j.top[0]*j.top[1];if(!F(l,0)&&!F(k,0)){var m=-(180*Math.atan2(k,l))/Math.PI;g={center:i.centerMass,angle:m}}}d.move&&(e={left:h.centerMass.left-i.centerMass.left,top:h.centerMass.top-i.centerMass.top}),d.scale&&(f={factor:i.spread/h.spread,center:i.centerMass})}return{move:e,scale:f,rotate:g}}(a,c.touches,h,{scale:e,rotate:g,move:f})),c.touches=a)},c.processEnd=function(){var a=c.props.onTransformEnd;c.transforming&&(c.transforming=!1,a&&a())},c.processStart=function(){c.transforming=!0,c.debouncedProcessEnd.clear()},c.processEvent=function(a){var b=c.props,d=b.onEvent,e=b.disabled,f=b.preventDefault,g=new bt({active:c.transforming});return d?d(g,a):(void 0===f||f)&&(a.preventDefault(),a.stopPropagation()),!e&&!g.defaultPrevented},c.onWheel=function(a){var b=c.props,d=b.onTransform,e=b.wheelScale,f=c.container.current;e&&c.processEvent(a)&&(c.processStart(),d&&f&&d(function(a,b,c){void 0===c&&(c=.1);var d,e=b.getBoundingClientRect(),f=e.left,g=e.top;return{scale:{factor:1-c*(0==(d=+(a.deltaY||a.detail||a.wheelDelta))||d!=d?d:d>0?1:-1),center:{left:a.clientX-f,top:a.clientY-g}}}}(a,f,!0===e?.1:e.ratio)),c.touches.length||c.debouncedProcessEnd())},c.onTouchStart=function(a){var b=c.props,d=b.touchMove,e=b.touchScale,f=b.touchRotate;if(a.cancelable&&(d||(e||f)&&a.touches.length>1)&&c.processEvent(a)){var g=c.container.current;if(g){var h=g.getBoundingClientRect(),i=h.left,j=h.top,k=h.bottom,l=h.right;c.touches=Array.from(a.touches).filter(function(a){return a.clientX>i&&a.clientX<l&&a.clientY>j&&a.clientY<k})}}},c.onTouchEnd=function(a){0===a.touches.length&&(c.touches=[],c.processEnd())},c.onTouchMove=function(a){if(c.touches.length){var b=r([],q(a.touches),!1).filter(function(a){return!a.identifier||c.touches.find(function(b){return b.identifier===a.identifier})});c.processEvent(a)&&(c.processMove(b),c.processStart())}},c.onMouseDown=function(a){c.props.mouseMove&&"buttons"in a&&1===a.buttons&&c.processEvent(a)&&(c.touches=[{clientX:a.clientX,clientY:a.clientY}],c.processStart())},c.onMouseMove=function(a){c.touches.length&&c.processEvent(a)&&c.processMove([{clientX:a.clientX,clientY:a.clientY}])},c.onMouseUp=function(){c.touches=[],c.processEnd()},c.transforming=!1,c.touches=[],c.anchor={left:0,top:0},c.container=(0,j.createRef)(),c.debouncedProcessEnd=M(c.processEnd,b.timeout),c}return l(b,a),b.prototype.shouldComponentUpdate=function(){return!0},b.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd);var a=this.container.current;a&&(a.removeEventListener("touchstart",this.onTouchStart),a.removeEventListener("mousedown",this.onMouseDown),a.removeEventListener("wheel",this.onWheel))},b.prototype.componentDidMount=function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1});var a=this.container.current;a&&(a.addEventListener("touchstart",this.onTouchStart,{passive:!1}),a.addEventListener("mousedown",this.onMouseDown,{passive:!1}),a.addEventListener("wheel",this.onWheel,{passive:!1}))},b.prototype.render=function(){var a=this.props,b=a.className,c=a.children,d=a.style;return j.default.createElement("div",{className:b,style:d,ref:this.container},c)},b.defaultProps={touchMove:!0,mouseMove:!0,touchScale:!0,touchRotate:!1,wheelScale:!0,timeout:500},b}(j.Component),bv=function(a){var b,c,d,e=a.scaleImage,f=a.moveImage,g=a.rotateImage,h=a.children,i=a.className,k=a.style,l=a.cropper,m=a.timeout,n=a.disabled,o=l.getTransitions(),p=(b=void 0!==g&&g,(0,j.useMemo)(function(){return z(b,{touch:!0},{touch:!1})},[b])),q=(c=void 0===e||e,(0,j.useMemo)(function(){return z(c,{touch:!0,wheel:{ratio:.1}},{touch:!1,wheel:!1})},[c])),r=(d=void 0===f||f,(0,j.useMemo)(function(){return z(d,{touch:!0,mouse:!0},{touch:!1,mouse:!1})},[d]));return j.default.createElement(bu,{className:i,style:k,onTransform:l.transformImage,onTransformEnd:l.transformImageEnd,touchMove:r.touch,mouseMove:r.mouse,touchScale:q.touch,wheelScale:q.wheel,touchRotate:p.touch,disabled:o.active||n,preventDefault:!n,timeout:m},h)},bw=(e=function(a,b){var c=a.style,d=a.className,e=a.stencilComponent,f=void 0===e?bs:e,h=a.stencilConstraints,i=void 0===h?aY:h,k=a.stencilProps,l=void 0===k?{}:k,s=a.wrapperComponent,t=a.wrapperProps,u=a.backgroundComponent,y=void 0===u?be:u,z=a.backgroundProps,A=a.backgroundClassName,B=a.backgroundWrapperComponent,C=a.backgroundWrapperProps,D=a.boundaryComponent,E=void 0===D?ba:D,F=a.boundaryProps,G=a.boundaryClassName,H=a.canvas,J=void 0===H||H,K=a.crossOrigin,L=void 0===K||K,M=a.disabled,N=a.settings,O=n(a,["style","className","stencilComponent","stencilConstraints","stencilProps","wrapperComponent","wrapperProps","backgroundComponent","backgroundProps","backgroundClassName","backgroundWrapperComponent","backgroundWrapperProps","boundaryComponent","boundaryProps","boundaryClassName","canvas","crossOrigin","disabled","settings"]),P=(0,j.useRef)(null),Q=function(a){var b,c,d,e,f,h,i,k,l,s,t,u,y,z,A,B,C,D,E,F,G,H,J,K,L,M,N,O,P,Q=this,R=a(),S=R.src,T=R.onReady,U=R.onError,V=R.onUpdate,X=R.canvas,Z=R.unloadTime,$=R.crossOrigin,_=R.checkOrientation,ac=R.autoReconcileState,ad=(0,j.useRef)(null),ae=(0,j.useRef)(null),af=(0,j.useRef)(null),ag=(0,j.useRef)(null),aj=q(a6(null),2),ak=aj[0],al=aj[1],am=(b=function(){return m(m({},a()),{getInstance:function(){return ag.current}})},c=a8(),d=function(){var a=b(),c=a.settings,d=n(a,["settings"]),e=m({imageRestriction:g.fitArea,transformImage:{adjustStencil:!0}},c),f=m({transitions:!0},d);return m({settings:m(m({},e),m(m({},e),{sizeRestrictions:function(a,b){return e.sizeRestrictions?w(e.sizeRestrictions)?e.sizeRestrictions(a,b):e.sizeRestrictions:aO(a,b)},areaPositionRestrictions:function(a,b){var c,d,f,h,i;return e.areaPositionRestrictions?w(e.areaPositionRestrictions)?e.areaPositionRestrictions(a,b):e.areaPositionRestrictions:(c=a.visibleArea,d=a.boundary,f=b.imageRestriction,h=ax(a),i={},f===g.fillArea?i={left:0,top:0,right:h.width,bottom:h.height}:f===g.fitArea&&(Y(d)>Y(h)?(i={top:0,bottom:h.height},c&&(c.width>h.width?(i.left=-(c.width-h.width)/2,i.right=h.width-i.left):(i.left=0,i.right=h.width))):(i={left:0,right:h.width},c&&(c.height>h.height?(i.top=-(c.height-h.height)/2,i.bottom=h.height-i.top):(i.top=0,i.bottom=h.height)))),i)},areaSizeRestrictions:function(a,b){var c,d,f,h;return e.areaSizeRestrictions?w(e.areaSizeRestrictions)?e.areaSizeRestrictions(a,b):e.areaSizeRestrictions:(c=a.boundary,d=b.imageRestriction,f=ax(a),h={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0},d===g.fillArea?(h.maxWidth=f.width,h.maxHeight=f.height):d===g.fitArea&&(Y(c)>Y(f)?(h.maxHeight=f.height,h.maxWidth=f.height*Y(c)):(h.maxWidth=f.width,h.maxHeight=f.width/Y(c))),h)},positionRestrictions:function(a,b){var c,d;return e.positionRestrictions?w(e.positionRestrictions)?e.positionRestrictions(a,b):e.positionRestrictions:(c=ax(a),d={},b.imageRestriction&&"none"!==b.imageRestriction&&(d={left:0,top:0,right:c.width,bottom:c.height}),d)},defaultCoordinates:function(a,b){if(e.defaultCoordinates)return w(e.defaultCoordinates)?e.defaultCoordinates(a,b):e.defaultCoordinates;var c=e.defaultSize;c||(c=aN);var d=w(c)?c(a,b):c,f=e.defaultPosition||aP;return[d,function(a){return m({},w(f)?f(a,b):f)}]},defaultVisibleArea:function(a,b){return e.defaultVisibleArea?w(e.defaultVisibleArea)?e.defaultVisibleArea(a,b):e.defaultVisibleArea:function(a,b){var c=a.coordinates,d=a.boundary,e=ax(a),f=Y(d);if(c){var g={height:Math.max(c.height,e.height),width:Math.max(c.width,e.width)},h={left:0,top:0,width:Y(g)>f?g.width:g.height*f,height:Y(g)>f?g.width/f:g.height};(h=ab(h,ao(a,b))).left=c.left+c.width/2-h.width/2,h.top=c.top+c.height/2-h.height/2;var i=aa(c,W(m({left:0,top:0},e))),j={};return i.left||i.right||!(h.width<=e.width)||(j.left=0,j.right=e.width),i.top||i.bottom||!(h.height<=e.height)||(j.top=0,j.bottom=e.height),ah(h,j)}var k=Y(e),l={height:k<f?e.height:e.width/f,width:k<f?e.height*f:e.width};return{left:e.width/2-l.width/2,top:e.height/2-l.height/2,width:l.width,height:l.height}}(a,b)},aspectRatio:function(a,b){return ai(w(e.aspectRatio)?e.aspectRatio(a,b):e.aspectRatio)}}))},f)},(e=(0,j.useRef)(d)).current=d,f=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return e.current.apply(e,r([],q(a),!1))},(0,j.useRef)(new a7(f,c)).current),an=(i=(h={src:S,crossOrigin:void 0===$||$,checkOrientation:void 0===_||_,unloadTime:void 0===Z?500:Z,canvas:void 0===X||X,onError:function(){ag.current&&(null==U||U(ag.current))}}).src,k=h.onLoadingStart,l=h.onLoadingEnd,s=h.onError,t=h.onLoad,u=h.crossOrigin,y=h.checkOrientation,z=h.canvas,A=h.unloadTime,C=(B=q((0,j.useState)(null),2))[0],D=B[1],F=(E=q((0,j.useState)(!1),2))[0],G=E[1],J=(H=q(a6(!1),2))[0],K=H[1],L=(0,j.useRef)(null),(0,j.useEffect)(function(){if(L.current!==i)if(L.current=i||null,K(!1),i){G(!0),null==k||k();var a,b,c,d,e=[(a={crossOrigin:x(u)?z:u,checkOrientation:y},(void 0===(b=m(m({},a),{crossOrigin:function(a){if(v(a))return!1;var b=window.location,c=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(a)||[],d={protocol:c[1]||"",host:c[2]||"",port:c[3]||""},e=function(a){return a.port||("http"===(a.protocol||b.protocol)?80:433)};return!(!d.protocol&&!d.host&&!d.port||d.protocol&&d.protocol==b.protocol&&d.host&&d.host==b.host&&d.host&&e(d)==e(b))}(i)&&a.crossOrigin}))&&(b={}),c=b.checkOrientation,d=b.parse,new Promise(function(a){if(c||d)new Promise(function(a,b){try{if(i)if(/^data:/i.test(i))a(function(a){for(var b=atob(a=a.replace(/^data:([^;]+);base64,/gim,"")),c=b.length,d=new ArrayBuffer(c),e=new Uint8Array(d),f=0;f<c;f++)e[f]=b.charCodeAt(f);return d}(i));else if(/^blob:/i.test(i)){var c,d,e=new FileReader;e.onload=function(b){var c;a(null==(c=b.target)?void 0:c.result)},c=function(a){e.readAsArrayBuffer(a)},(d=new XMLHttpRequest).open("GET",i,!0),d.responseType="blob",d.onload=function(){(200==this.status||0===this.status)&&c(this.response)},d.send()}else{var f=new XMLHttpRequest;f.onreadystatechange=function(){4===f.readyState&&(200===f.status||0===f.status?a(f.response):b("Warning: could not load an image to parse its orientation"))},f.onprogress=function(){"image/jpeg"!==f.getResponseHeader("content-type")&&f.abort()},f.withCredentials=!1,f.open("GET",i,!0),f.responseType="arraybuffer",f.send(null)}else b("Error: the image is empty")}catch(a){b(a)}}).then(function(b){var c=function(a){try{var b,c=new DataView(a),d=void 0,e=void 0,f=void 0,g=void 0,h=void 0;if(255===c.getUint8(0)&&216===c.getUint8(1))for(var i=c.byteLength,j=2;j+1<i;){if(255===c.getUint8(j)&&225===c.getUint8(j+1)){g=j;break}j++}if(g&&(d=g+4,e=g+10,"Exif"===function(a,b,c){var d,e="";for(d=b,c+=b;d<c;d++)e+=String.fromCharCode(a.getUint8(d));return e}(c,d,4))){var k=c.getUint16(e);if(((f=18761===k)||19789===k)&&42===c.getUint16(e+2,f)){var l=c.getUint32(e+4,f);l>=8&&(h=e+l)}}if(h)for(var m=c.getUint16(h,f),n=0;n<m;n++){var j=h+12*n+2;if(274===c.getUint16(j,f)){j+=8,b=c.getUint16(j,f),c.setUint16(j,1,f);break}}return b}catch(a){return null}}(b);a(aQ(b?{src:i,arrayBuffer:b,orientation:c}:{src:i,arrayBuffer:null,orientation:null}))}).catch(function(b){console.warn(b),a(aQ({src:i}))});else a(aQ({src:i}))})).then(function(b){return new Promise(function(c,d){var e,f;(e=b.src,void 0===(f=a)&&(f={}),new Promise(function(a,b){var c=document.createElement("img");f.crossOrigin&&(c.crossOrigin=!0!==f.crossOrigin?f.crossOrigin:"anonymous"),c.src=e,c.style.visibility="hidden",c.style.position="fixed",document.body.appendChild(c),c.complete?(a(c),document.body.removeChild(c)):(c.addEventListener("load",function(){a(c),document.body.removeChild(c)}),c.addEventListener("error",function(){b(null),document.body.removeChild(c)}))})).then(function(a){c(m(m({},b),{width:a.naturalWidth,height:a.naturalHeight}))}).catch(function(){d(null)})})}))];J&&A&&e.push(I(A)),Promise.all(e).then(function(a){var b=q(a,1)[0];L.current===i&&D(b)}).catch(function(){L.current===i&&(null==s||s())}).finally(function(){L.current===i&&(null==l||l(),G(!1))})}else A?I(A).then(function(){L.current===i&&D(null)}):D(null)},[i,C]),(0,j.useEffect)(function(){C&&K(!0,function(){null==t||t(C)})},[C]),{isLoading:function(){return F},isLoaded:function(){return J},getImage:function(){return C},setImage:D}),ap=(void 0===(M=void 0===ac||ac)&&(M=!0),O=(N=q((0,j.useState)(M),2))[0],P=N[1],(0,j.useLayoutEffect)(function(){O&&!am.hasInteractions()&&am.reconcileState()}),{pause:function(){P(!1)},resume:function(){P(!0)}}),aq=function(){return o(Q,void 0,void 0,function(){var a,b,c;return p(this,function(d){switch(d.label){case 0:if(!ae.current)return[3,2];return ap.pause(),a=an.getImage(),[4,null==(c=ae.current)?void 0:c.stretchTo(a)];case 1:b=d.sent(),al(a,function(){b&&a?am.reset(b,a):am.clear()}),ap.resume(),d.label=2;case 2:return[2]}})})},ar=function(){return o(Q,void 0,void 0,function(){var a,b,c,d;return p(this,function(e){switch(e.label){case 0:if(!ae.current)return[3,2];return ap.pause(),a=an.getImage(),[4,null==(d=ae.current)?void 0:d.stretchTo(a)];case 1:(b=e.sent())&&a?(c=am.getState())?(b.width!==c.boundary.width||b.height!==c.boundary.height)&&(am.setBoundary(b),am.reconcileState()):am.reset(b,a):am.clear(),ap.resume(),e.label=2;case 2:return[2]}})})},as={reset:function(){return aq()},refresh:function(){return ar()},setImage:function(a){return al(a)},reconcileState:am.reconcileState,moveCoordinates:am.moveCoordinates,moveCoordinatesEnd:am.moveCoordinatesEnd,resizeCoordinates:am.resizeCoordinates,clear:am.clear,resizeCoordinatesEnd:am.resizeCoordinatesEnd,moveImage:am.moveImage,flipImage:am.flipImage,zoomImage:am.zoomImage,rotateImage:am.rotateImage,transformImage:am.transformImage,transformImageEnd:am.transformImageEnd,setCoordinates:am.setCoordinates,setVisibleArea:am.setVisibleArea,startTransitions:am.startTransitions,setState:am.setState,hasInteractions:am.hasInteractions,getStencilCoordinates:am.getStencilCoordinates,getCoordinates:am.getCoordinates,getVisibleArea:am.getVisibleArea,getTransforms:am.getTransforms,getTransitions:am.getTransitions,getInteractions:am.getInteractions,getSettings:am.getSettings,getState:am.getState,getDefaultState:function(){var a=am.getState(),b=an.getImage();return a&&b?am.createDefaultState(a.boundary,b):null},getCanvas:function(a){var b=am.getState();return ad.current&&af.current&&b?af.current.draw(b,ad.current,a):null},getImage:function(){return ak?m({},ak):null},isLoading:an.isLoading,isLoaded:an.isLoaded};return a9(function(){ar()}),a5(function(){aq()},[an.getImage()]),a5(function(){ag.current&&ak&&(null==T||T(ag.current))},[ak]),a5(function(){ag.current&&(null==V||V(ag.current))},[an.isLoaded(),an.isLoading()]),(0,j.useImperativeHandle)(ag,function(){return as}),{cropper:as,refs:{image:ad,boundary:ae,canvas:af},image:ak}}(function(){return m(m({},O),{crossOrigin:L,stencilProps:l,canvas:J,settings:m(m({},N),i(N,m(m({},l),P.current)))})}),R=Q.cropper,S=Q.image,T=Q.refs;(0,j.useImperativeHandle)(b,function(){return R});var U={loading:R.isLoading(),loaded:R.isLoaded()};return j.default.createElement(void 0===s?bc:s,m({},void 0===t?{}:t,{disabled:M,className:(0,aZ.default)("advanced-cropper",d),cropper:R,style:c},U),j.default.createElement(E,m({},F,{ref:T.boundary,className:(0,aZ.default)("advanced-cropper__boundary",G)}),j.default.createElement(void 0===B?bv:B,m({},void 0===C?{}:C,{disabled:M,cropper:R,className:"advanced-cropper__background-wrapper"}),R.getState()&&j.default.createElement(y,m({},void 0===z?{}:z,{ref:T.image,crossOrigin:L,cropper:R,className:(0,aZ.default)("advanced-cropper__background",A)})),j.default.createElement(f,m({},l,{disabled:M,ref:P,cropper:R,image:S}))),J&&j.default.createElement(bf,{ref:T.canvas})))},(0,j.forwardRef)(e)),bx=["transformImage","moveCoordinates","resizeCoordinates","defaultCoordinates","defaultVisibleArea","areaPositionRestrictions","areaSizeRestrictions","sizeRestrictions","positionRestrictions","aspectRatio","minWidth","minHeight","maxWidth","maxHeight","defaultSize","defaultPosition","defaultTransforms","imageRestriction","priority"];function by(a,b){void 0===b&&(b=bx);var c={settings:{},props:{}};return Object.keys(a).forEach(function(d){b.some(function(a){return a===d})?c.settings[d]=a[d]:c.props[d]=a[d]}),c}var bz=(0,j.forwardRef)(function(a,b){var c=by(a,r(r([],q(bx),!1),["stencilSize"],!1));return j.default.createElement(bw,m({postProcess:a3,stencilConstraints:a$},c.props,{settings:m(m({defaultSize:a1,aspectRatio:a2,sizeRestrictions:function(a,b){var c=w(a0)?a0(a,b):a0;return am(aO(a,b),c)}},c.settings),{transformImage:m(m({},c.settings.transformImage),{adjustStencil:!1})}),ref:b}))});bz.displayName="FixedCropper";var bA=(0,j.forwardRef)(function(a,b){var c,d=by(a),e=d.props,f=d.settings,g=f.stencilSize,h=f.autoZoom,i=n(f,["stencilSize","autoZoom"]),k=(c=(0,j.useRef)([]),function(a){-1===c.current.indexOf(a)&&c.current.push(a)});return(x(h)||(e.postProcess||g?k("prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function."):(k("prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function. The 'postProcess' automatically set to 'hybridAutoZoom'"),e.postProcess=a4)),x(g))?j.default.createElement(bw,m({},e,{ref:b,settings:i})):(k("prop 'stencilSize' is deprecated for <Cropper/> component now and will be removed, use <FixedCropper/> component instead."),j.default.createElement(bz,m({ref:b,stencilSize:g},i,e)))});bA.displayName="CropperComponent";var bB=(0,j.forwardRef)(function(a,b){var c=a.cropper,d=a.coordinates,e=a.handlerComponent,f=a.handlers,g=a.handlerClassNames,h=a.handlerWrapperClassNames,i=a.lines,k=a.lineComponent,l=a.lineClassNames,m=a.lineWrapperClassNames,n=a.resizable,o=a.movable,p=a.grid,q=a.gridClassName,r=a.className,s=a.movingClassName,t=a.resizingClassName,u=a.previewClassName,v=a.boundingBoxClassName,x=a.overlayClassName,y=a.draggableAreaClassName,z=a.disabled,A=c.getState(),B=c.getTransitions(),C=c.getInteractions(),D=(void 0===n||n)&&!z,E=(void 0===o||o)&&!z;(0,j.useImperativeHandle)(b,function(){return{aspectRatio:1,boundingBox:"circle"}});var F=d?w(d)?d(A):d:at(A),G=F.width,H=F.height,I=F.left,J=F.top;return A&&j.default.createElement(bq,{className:(0,aZ.default)("advanced-cropper-circle-stencil",r,C.moveCoordinates&&s,C.resizeCoordinates&&t,{"advanced-cropper-circle-stencil--movable":E,"advanced-cropper-circle-stencil--moving":C.moveCoordinates,"advanced-cropper-circle-stencil--resizable":D,"advanced-cropper-circle-stencil--resizing":C.resizeCoordinates,"advanced-cropper-circle-stencil--disabled":z}),width:G,height:H,left:I,top:J,transitions:B},j.default.createElement(bn,{reference:A.coordinates,className:(0,aZ.default)(v,"advanced-cropper-circle-stencil__bounding-box"),handlers:void 0===f?{eastNorth:!0,westNorth:!0,westSouth:!0,eastSouth:!0}:f,handlerComponent:void 0===e?bk:e,handlerClassNames:void 0===g?{}:g,handlerWrapperClassNames:void 0===h?{}:h,lines:void 0===i?{west:!0,north:!0,east:!0,south:!0}:i,lineComponent:void 0===k?bi:k,lineClassNames:void 0===l?{}:l,lineWrapperClassNames:void 0===m?{}:m,onResize:function(a,b,d){c&&D&&c.resizeCoordinates(a,b,d)},onResizeEnd:function(){c&&c.resizeCoordinatesEnd()},disabled:!D},j.default.createElement(bg,{disabled:!E,onMove:function(a){c&&E&&c.moveCoordinates(a)},onMoveEnd:function(){c&&c.moveCoordinatesEnd()},className:(0,aZ.default)("advanced-cropper-circle-stencil__draggable-area",y)},j.default.createElement(bo,{className:(0,aZ.default)("advanced-cropper-circle-stencil__overlay",x)},p&&j.default.createElement(br,{visible:c.hasInteractions(),columns:C.transformImage.rotate?9:3,rows:C.transformImage.rotate?9:3,className:(0,aZ.default)("advanced-cropper-circle-stencil__grid",q)}),j.default.createElement("div",{className:(0,aZ.default)("advanced-cropper-circle-stencil__preview",u)})))))});bB.displayName="CircleStencil",(0,j.forwardRef)(function(a,b){var c=a.src,d=a.crossOrigin,e=void 0===d||d,f=n(a,["src","crossOrigin"]);return c?j.default.createElement("img",m({key:c,ref:b,src:c,className:(0,aZ.default)("advanced-cropper-source"),crossOrigin:!0===e?"anonymous":e||void 0},f)):null}).displayName="CropperSource";var bC=function(a){var b=a.children,c=a.cropper,d=a.className,e=a.style;return j.default.createElement("div",{className:(0,aZ.default)(d,"cropper-preview-wrapper"),style:e},j.default.createElement(bb,{visible:null==c?void 0:c.isLoaded(),className:"cropper-preview-wrapper__fade"},b))},bD=function(a){var b,c=a.className,d=a.cropper,e=a.crossOrigin,f=void 0===e||e,g=a.size,h=a.style,i=d.getState(),k=d.getTransitions(),l=d.getImage(),n=g&&l&&(null==i?void 0:i.coordinates)?(void 0===(b=k)&&(b=null),l&&i&&i.visibleArea&&i.coordinates)?aR(l,i,i.coordinates,Y(i.coordinates)>Y(g)?i.coordinates.width/g.width:i.coordinates.height/g.height,b):{}:{},o=l?l.src:void 0;return o?j.default.createElement("img",{key:o,className:(0,aZ.default)("advanced-cropper-background-image",c),src:o,crossOrigin:!0===f?"anonymous":f||void 0,style:m(m({},n),h),onMouseDown:bd}):null};function bE({open:a,src:b,onClose:c,onConfirm:d,aspectRatio:e=1,circle:f=!1,fileName:h="cropped.jpg",outputType:k="image/jpeg",quality:l=.92}){let m=(0,j.useRef)(null),[n,o]=(0,j.useState)(!1),p=(0,j.useMemo)(()=>f?bB:bs,[f]);(0,j.useEffect)(()=>{a||o(!1)},[a]);let q=a=>{try{m.current?.zoomImage(1+a,{transitions:!0})}catch{}},r=async()=>{let a=m.current?.getCanvas();a&&a.toBlob(a=>{if(!a)return;let b="image/png"===k?"png":"image/webp"===k?"webp":"jpg";d(new File([a],h?.trim()?h:`cropped.${b}`,{type:k}))},k,l)};return a?(0,i.jsx)("div",{className:"fixed inset-0 z-[1000] bg-black/70 backdrop-blur-sm flex items-center justify-center",children:(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-[90vw] max-w-[800px]",children:[(0,i.jsxs)("div",{className:"px-4 py-3 border-b flex items-center justify-between",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"iu chnh nh"}),(0,i.jsx)("button",{onClick:c,className:"p-2 rounded-full hover:bg-gray-100 text-gray-600 transition-colors","aria-label":"Close",children:(0,i.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("div",{className:"relative w-full h-[50vh] min-h-[320px] bg-gray-50 rounded-lg overflow-hidden",children:b?(0,i.jsx)(bA,{ref:m,src:b,className:"w-full h-full",stencilComponent:p,stencilProps:{aspectRatio:e,movable:!0,resizable:!0},imageRestriction:g.fitArea,onReady:()=>o(!0),defaultSize:({imageSize:a})=>({width:Math.min(a.width,800),height:Math.min(a.height,600)})}):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:"Khng c nh"})}),(0,i.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("button",{onClick:()=>q(-.1),className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-gray-700",children:"Thu nh"}),(0,i.jsx)("button",{onClick:()=>q(.1),className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-gray-700",children:"Phng to"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("button",{onClick:c,className:"px-4 py-2 rounded bg-gray-100 hover:bg-gray-200 text-gray-700",children:"Hy"}),(0,i.jsx)("button",{onClick:r,disabled:!n,className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",children:"Lu"})]})]})]})]})}):null}(0,j.forwardRef)(function(a,b){var c,d,e,f,g=a.className,h=a.contentClassName,i=a.state,k=void 0===i?null:i,l=a.image,n=void 0===l?null:l,o=a.transitions,p=void 0===o?null:o,r=a.backgroundComponent,s=a.backgroundProps,t=a.backgroundClassName,u=a.boundaryComponent,v=void 0===u?ba:u,w=a.boundaryProps,x=a.boundaryClassName,y=a.wrapperComponent,z=a.wrapperProps,A=a.loaded,B=void 0===A||A,C=a.loading,D=void 0!==C&&C,E=a.style,F=a.cropper,H=a8(),I=(0,j.useRef)(null),J=(0,j.useRef)(null),K=F||(J.current?J:{current:{getState:function(){return k},getTransitions:function(){return p},getImage:function(){return n},isLoaded:function(){return B},isLoading:function(){return D}}}),L=q((0,j.useState)(null),2),M=L[0],N=L[1],O=null==(d=null==(c=K.current)?void 0:c.getState())?void 0:d.coordinates,P=null==(f=null==(e=K.current)?void 0:e.getImage())?void 0:f.src,Q=M?{width:"".concat(M.width,"px"),height:"".concat(M.height,"px")}:{},R=function(){var a,b,c=null==(b=null==(a=K.current)?void 0:a.getState())?void 0:b.coordinates;I.current&&c&&I.current.stretchTo(c).then(function(a){a&&c?G(Y(c),Y(a))?N({width:a.width,height:a.width/Y(c)}):N({width:a.height*Y(c),height:a.height}):N(null)}),H()};return a9(R),(0,j.useLayoutEffect)(R,[null==O?void 0:O.height,null==O?void 0:O.width]),(0,j.useImperativeHandle)(b,function(){return{refresh:R,update:function(a){a?J.current=a:J.current=null,R()}}}),j.default.createElement(void 0===y?bC:y,m({},z,{className:(0,aZ.default)(g,"advanced-cropper-preview"),cropper:K.current,style:E}),j.default.createElement(v,m({ref:I,stretchAlgorithm:aT},w,{className:(0,aZ.default)("advanced-cropper-preview__boundary",x)}),j.default.createElement("div",{className:(0,aZ.default)(h,"advanced-cropper-preview__content"),style:Q},K.current&&j.default.createElement(void 0===r?bD:r,m({},s,{cropper:K.current,size:M,className:(0,aZ.default)(t,"advanced-cropper-preview__image",P&&"advanced-cropper-preview__image--visible")})))))}),a.s(["CircleStencil",()=>bB,"Cropper",()=>bA,"RectangleStencil",()=>bs],96284),a.s(["default",()=>bE],10636)},54840,a=>{"use strict";var b=a.i(72131);function c({chatName:a}){(0,b.useRef)(null),(0,b.useRef)(0),(0,b.useRef)(null);let c=(0,b.useCallback)(()=>{},[]),d=(0,b.useCallback)(()=>{},[]),e=(0,b.useCallback)(a=>{},[a]);return(0,b.useEffect)(()=>{},[]),(0,b.useEffect)(()=>{},[]),{playMessageSound:d,showMessageNotification:e,flashTabTitle:c}}a.i(45112),a.s(["useChatNotifications",()=>c])}];

//# sourceMappingURL=_ef982940._.js.map